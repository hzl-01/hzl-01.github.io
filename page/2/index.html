<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-自动化工具/Shell脚本自动化实践" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%9E%E8%B7%B5/" class="article-date">
  <time class="dt-published" datetime="2025-09-25T15:00:00.000Z" itemprop="datePublished">2025-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a>►<a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Shell%E7%BC%96%E7%A8%8B/">Shell编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%9E%E8%B7%B5/">Shell脚本自动化实践指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Shell脚本自动化实践指南"><a href="#Shell脚本自动化实践指南" class="headerlink" title="Shell脚本自动化实践指南"></a>Shell脚本自动化实践指南</h1><h2 id="一、Shell脚本基础与环境"><a href="#一、Shell脚本基础与环境" class="headerlink" title="一、Shell脚本基础与环境"></a>一、Shell脚本基础与环境</h2><h3 id="为什么选择Shell脚本"><a href="#为什么选择Shell脚本" class="headerlink" title="为什么选择Shell脚本"></a>为什么选择Shell脚本</h3><p>Shell脚本在自动化领域的独特优势：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Shell脚本的核心优势</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1. 系统原生支持 - 无需额外安装&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2. 直接调用系统命令 - 效率高&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3. 文本处理能力强 - 适合日志分析&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4. 管道操作灵活 - 命令组合强大&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;5. 学习成本低 - 基于命令行经验&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="脚本环境配置"><a href="#脚本环境配置" class="headerlink" title="脚本环境配置"></a>脚本环境配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 脚本模板 - 包含基础配置和错误处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置严格模式</span></span><br><span class="line"><span class="built_in">set</span> -euo pipefail  <span class="comment"># 遇到错误立即退出，未定义变量报错，管道错误传播</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本信息</span></span><br><span class="line">SCRIPT_NAME=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">SCRIPT_DIR=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>&quot;</span> &amp;&amp; <span class="built_in">pwd</span>)</span><br><span class="line">LOG_FILE=<span class="string">&quot;<span class="variable">$&#123;SCRIPT_DIR&#125;</span>/<span class="variable">$&#123;SCRIPT_NAME%.*&#125;</span>.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 颜色定义</span></span><br><span class="line">RED=<span class="string">&#x27;\033[0;31m&#x27;</span></span><br><span class="line">GREEN=<span class="string">&#x27;\033[0;32m&#x27;</span></span><br><span class="line">YELLOW=<span class="string">&#x27;\033[1;33m&#x27;</span></span><br><span class="line">BLUE=<span class="string">&#x27;\033[0;34m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\033[0m&#x27;</span> <span class="comment"># No Color</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志函数</span></span><br><span class="line"><span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> level=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line">    <span class="built_in">local</span> message=<span class="string">&quot;$*&quot;</span></span><br><span class="line">    <span class="built_in">local</span> timestamp=$(<span class="built_in">date</span> <span class="string">&#x27;+%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$level</span> <span class="keyword">in</span></span><br><span class="line">        INFO)  <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;GREEN&#125;</span>[INFO]<span class="variable">$&#123;NC&#125;</span> <span class="variable">$message</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> ;;</span><br><span class="line">        WARN)  <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;YELLOW&#125;</span>[WARN]<span class="variable">$&#123;NC&#125;</span> <span class="variable">$message</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> ;;</span><br><span class="line">        ERROR) <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;RED&#125;</span>[ERROR]<span class="variable">$&#123;NC&#125;</span> <span class="variable">$message</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> ;;</span><br><span class="line">        DEBUG) <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;BLUE&#125;</span>[DEBUG]<span class="variable">$&#123;NC&#125;</span> <span class="variable">$message</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span> ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误处理函数</span></span><br><span class="line"><span class="function"><span class="title">error_exit</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> ERROR <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查命令是否存在</span></span><br><span class="line"><span class="function"><span class="title">check_command</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> ! <span class="built_in">command</span> -v <span class="string">&quot;<span class="variable">$1</span>&quot;</span> &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;命令 &#x27;<span class="variable">$1</span>&#x27; 未找到，请先安装&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例使用</span></span><br><span class="line"><span class="built_in">log</span> INFO <span class="string">&quot;脚本开始执行: <span class="variable">$SCRIPT_NAME</span>&quot;</span></span><br><span class="line">check_command <span class="string">&quot;curl&quot;</span></span><br><span class="line">check_command <span class="string">&quot;jq&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="二、系统管理自动化"><a href="#二、系统管理自动化" class="headerlink" title="二、系统管理自动化"></a>二、系统管理自动化</h2><h3 id="系统信息收集脚本"><a href="#系统信息收集脚本" class="headerlink" title="系统信息收集脚本"></a>系统信息收集脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 系统信息收集和健康检查脚本</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/common.sh&quot;</span>  <span class="comment"># 引入公共函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line">REPORT_FILE=<span class="string">&quot;system_report_<span class="subst">$(date +%Y%m%d_%H%M%S)</span>.txt&quot;</span></span><br><span class="line">THRESHOLD_CPU=80</span><br><span class="line">THRESHOLD_MEMORY=85</span><br><span class="line">THRESHOLD_DISK=90</span><br><span class="line"></span><br><span class="line"><span class="comment"># 收集系统基本信息</span></span><br><span class="line"><span class="function"><span class="title">collect_system_info</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;收集系统基本信息...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">========================================</span></span><br><span class="line"><span class="string">系统健康检查报告</span></span><br><span class="line"><span class="string">生成时间: $(date)</span></span><br><span class="line"><span class="string">========================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. 系统基本信息</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">主机名: $(hostname)</span></span><br><span class="line"><span class="string">操作系统: $(cat /etc/os-release | grep PRETTY_NAME | cut -d&#x27;&quot;&#x27; -f2)</span></span><br><span class="line"><span class="string">内核版本: $(uname -r)</span></span><br><span class="line"><span class="string">系统架构: $(uname -m)</span></span><br><span class="line"><span class="string">运行时间: $(uptime -p)</span></span><br><span class="line"><span class="string">当前用户: $(whoami)</span></span><br><span class="line"><span class="string">当前目录: $(pwd)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查CPU使用率</span></span><br><span class="line"><span class="function"><span class="title">check_cpu_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查CPU使用率...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> cpu_usage=$(top -bn1 | grep <span class="string">&quot;Cpu(s)&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | <span class="built_in">cut</span> -d<span class="string">&#x27;%&#x27;</span> -f1)</span><br><span class="line">    <span class="built_in">local</span> cpu_int=<span class="variable">$&#123;cpu_usage%.*&#125;</span>  <span class="comment"># 去掉小数部分</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">2. CPU使用情况</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">当前CPU使用率: $&#123;cpu_usage&#125;%</span></span><br><span class="line"><span class="string">CPU核心数: $(nproc)</span></span><br><span class="line"><span class="string">负载平均值: $(uptime | awk -F&#x27;load average:&#x27; &#x27;&#123;print $2&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$cpu_int</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$THRESHOLD_CPU</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;CPU使用率过高: <span class="variable">$&#123;cpu_usage&#125;</span>%&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;⚠️  CPU使用率告警: <span class="variable">$&#123;cpu_usage&#125;</span>% (阈值: <span class="variable">$&#123;THRESHOLD_CPU&#125;</span>%)&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;CPU使用率正常: <span class="variable">$&#123;cpu_usage&#125;</span>%&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;✅ CPU使用率正常&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查内存使用率</span></span><br><span class="line"><span class="function"><span class="title">check_memory_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查内存使用情况...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> memory_info=$(free -h)</span><br><span class="line">    <span class="built_in">local</span> memory_percent=$(free | awk <span class="string">&#x27;NR==2&#123;printf &quot;%.0f&quot;, $3*100/$2&#125;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. 内存使用情况</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">$memory_info</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">内存使用率: $&#123;memory_percent&#125;%</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$memory_percent</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$THRESHOLD_MEMORY</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;内存使用率过高: <span class="variable">$&#123;memory_percent&#125;</span>%&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;⚠️  内存使用率告警: <span class="variable">$&#123;memory_percent&#125;</span>% (阈值: <span class="variable">$&#123;THRESHOLD_MEMORY&#125;</span>%)&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 显示内存占用最高的进程</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;内存占用最高的10个进程:&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">        ps aux --<span class="built_in">sort</span>=-%mem | <span class="built_in">head</span> -11 &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;内存使用率正常: <span class="variable">$&#123;memory_percent&#125;</span>%&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;✅ 内存使用率正常&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查磁盘使用率</span></span><br><span class="line"><span class="function"><span class="title">check_disk_usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查磁盘使用情况...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. 磁盘使用情况</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">$(df -h)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 检查每个挂载点的使用率</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">read</span> -r line; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="variable">$line</span> == *<span class="string">&quot;%&quot;</span>* ]] &amp;&amp; [[ <span class="variable">$line</span> != <span class="string">&quot;Filesystem&quot;</span>* ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">local</span> usage=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$line</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> | sed <span class="string">&#x27;s/%//&#x27;</span>)</span><br><span class="line">            <span class="built_in">local</span> mount_point=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$line</span>&quot;</span> | awk <span class="string">&#x27;&#123;print $6&#125;&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$usage</span>&quot;</span> -gt <span class="string">&quot;<span class="variable">$THRESHOLD_DISK</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">log</span> WARN <span class="string">&quot;磁盘使用率过高: <span class="variable">$mount_point</span> <span class="variable">$&#123;usage&#125;</span>%&quot;</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;⚠️  磁盘使用率告警: <span class="variable">$mount_point</span> <span class="variable">$&#123;usage&#125;</span>% (阈值: <span class="variable">$&#123;THRESHOLD_DISK&#125;</span>%)&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span> &lt;&lt;&lt; <span class="string">&quot;<span class="subst">$(df -h)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查网络连接</span></span><br><span class="line"><span class="function"><span class="title">check_network</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查网络连接...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. 网络连接情况</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">网络接口信息:</span></span><br><span class="line"><span class="string">$(ip addr show | grep -E &#x27;^[0-9]+:|inet &#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">连接测试:</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 测试网络连接</span></span><br><span class="line">    <span class="built_in">local</span> test_hosts=(<span class="string">&quot;8.8.8.8&quot;</span> <span class="string">&quot;114.114.114.114&quot;</span> <span class="string">&quot;baidu.com&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> host <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;test_hosts[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> ping -c 1 -W 3 <span class="string">&quot;<span class="variable">$host</span>&quot;</span> &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;✅ <span class="variable">$host</span> - 连接正常&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">            <span class="built_in">log</span> INFO <span class="string">&quot;网络连接正常: <span class="variable">$host</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;❌ <span class="variable">$host</span> - 连接失败&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">            <span class="built_in">log</span> WARN <span class="string">&quot;网络连接失败: <span class="variable">$host</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查服务状态</span></span><br><span class="line"><span class="function"><span class="title">check_services</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查关键服务状态...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. 服务状态检查</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义需要检查的服务</span></span><br><span class="line">    <span class="built_in">local</span> services=(<span class="string">&quot;ssh&quot;</span> <span class="string">&quot;nginx&quot;</span> <span class="string">&quot;apache2&quot;</span> <span class="string">&quot;mysql&quot;</span> <span class="string">&quot;postgresql&quot;</span> <span class="string">&quot;docker&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> service <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;services[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> systemctl is-active --quiet <span class="string">&quot;<span class="variable">$service</span>&quot;</span> 2&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;✅ <span class="variable">$service</span> - 运行中&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">            <span class="built_in">log</span> INFO <span class="string">&quot;服务运行正常: <span class="variable">$service</span>&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> systemctl list-unit-files | grep -q <span class="string">&quot;^<span class="variable">$service</span>.service&quot;</span>; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;❌ <span class="variable">$service</span> - 已停止&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">            <span class="built_in">log</span> WARN <span class="string">&quot;服务已停止: <span class="variable">$service</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;➖ <span class="variable">$service</span> - 未安装&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查系统日志错误</span></span><br><span class="line"><span class="function"><span class="title">check_system_logs</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;检查系统日志错误...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">7. 系统日志检查</span></span><br><span class="line"><span class="string">----------------------------------------</span></span><br><span class="line"><span class="string">最近的系统错误 (最近24小时):</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 检查系统日志中的错误</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">command</span> -v journalctl &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        journalctl --since <span class="string">&quot;24 hours ago&quot;</span> --priority=err --no-pager | <span class="built_in">tail</span> -20 &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> 2&gt;/dev/null || <span class="built_in">echo</span> <span class="string">&quot;无法读取系统日志&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">tail</span> -50 /var/log/syslog | grep -i error | <span class="built_in">tail</span> -10 &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> 2&gt;/dev/null || <span class="built_in">echo</span> <span class="string">&quot;无法读取系统日志&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成总结</span></span><br><span class="line"><span class="function"><span class="title">generate_summary</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;生成检查总结...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">========================================</span></span><br><span class="line"><span class="string">检查总结</span></span><br><span class="line"><span class="string">========================================</span></span><br><span class="line"><span class="string">报告生成完成时间: $(date)</span></span><br><span class="line"><span class="string">报告文件位置: $(pwd)/$REPORT_FILE</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">建议:</span></span><br><span class="line"><span class="string">1. 定期运行此脚本进行系统健康检查</span></span><br><span class="line"><span class="string">2. 关注告警项目并及时处理</span></span><br><span class="line"><span class="string">3. 建立监控告警机制</span></span><br><span class="line"><span class="string">4. 定期备份重要数据</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;系统健康检查完成，报告已保存到: <span class="variable">$REPORT_FILE</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始系统健康检查...&quot;</span></span><br><span class="line">    </span><br><span class="line">    collect_system_info</span><br><span class="line">    check_cpu_usage</span><br><span class="line">    check_memory_usage</span><br><span class="line">    check_disk_usage</span><br><span class="line">    check_network</span><br><span class="line">    check_services</span><br><span class="line">    check_system_logs</span><br><span class="line">    generate_summary</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 如果有告警，返回非零退出码</span></span><br><span class="line">    <span class="keyword">if</span> grep -q <span class="string">&quot;⚠️\|❌&quot;</span> <span class="string">&quot;<span class="variable">$REPORT_FILE</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;发现系统告警，请查看报告文件&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;系统状态良好&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本入口</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;BASH_SOURCE[0]&#125;</span>&quot;</span> == <span class="string">&quot;<span class="variable">$&#123;0&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="自动化备份脚本"><a href="#自动化备份脚本" class="headerlink" title="自动化备份脚本"></a>自动化备份脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 自动化备份脚本 - 支持数据库、文件、配置等多种备份</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/common.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置文件</span></span><br><span class="line">CONFIG_FILE=<span class="string">&quot;<span class="variable">$&#123;SCRIPT_DIR&#125;</span>/backup_config.conf&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认配置</span></span><br><span class="line">DEFAULT_BACKUP_DIR=<span class="string">&quot;/backup&quot;</span></span><br><span class="line">DEFAULT_RETENTION_DAYS=7</span><br><span class="line">DEFAULT_COMPRESS=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载配置</span></span><br><span class="line"><span class="function"><span class="title">load_config</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$CONFIG_FILE</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$CONFIG_FILE</span>&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;配置文件已加载: <span class="variable">$CONFIG_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;配置文件不存在，使用默认配置&quot;</span></span><br><span class="line">        create_default_config</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 设置默认值</span></span><br><span class="line">    BACKUP_DIR=<span class="variable">$&#123;BACKUP_DIR:-<span class="variable">$DEFAULT_BACKUP_DIR</span>&#125;</span></span><br><span class="line">    RETENTION_DAYS=<span class="variable">$&#123;RETENTION_DAYS:-<span class="variable">$DEFAULT_RETENTION_DAYS</span>&#125;</span></span><br><span class="line">    COMPRESS=<span class="variable">$&#123;COMPRESS:-<span class="variable">$DEFAULT_COMPRESS</span>&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建默认配置文件</span></span><br><span class="line"><span class="function"><span class="title">create_default_config</span></span>() &#123;</span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$CONFIG_FILE</span>&quot;</span> &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="comment"># 备份配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份目录</span></span><br><span class="line">BACKUP_DIR=<span class="string">&quot;/backup&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保留天数</span></span><br><span class="line">RETENTION_DAYS=7</span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否压缩</span></span><br><span class="line">COMPRESS=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line">DB_TYPE=<span class="string">&quot;mysql&quot;</span>  <span class="comment"># mysql, postgresql, mongodb</span></span><br><span class="line">DB_HOST=<span class="string">&quot;localhost&quot;</span></span><br><span class="line">DB_PORT=<span class="string">&quot;3306&quot;</span></span><br><span class="line">DB_USER=<span class="string">&quot;backup_user&quot;</span></span><br><span class="line">DB_PASSWORD=<span class="string">&quot;backup_password&quot;</span></span><br><span class="line">DB_NAMES=(<span class="string">&quot;database1&quot;</span> <span class="string">&quot;database2&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件备份路径</span></span><br><span class="line">FILE_PATHS=(</span><br><span class="line">    <span class="string">&quot;/etc&quot;</span></span><br><span class="line">    <span class="string">&quot;/home/user/important_data&quot;</span></span><br><span class="line">    <span class="string">&quot;/var/www&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排除模式</span></span><br><span class="line">EXCLUDE_PATTERNS=(</span><br><span class="line">    <span class="string">&quot;*.tmp&quot;</span></span><br><span class="line">    <span class="string">&quot;*.log&quot;</span></span><br><span class="line">    <span class="string">&quot;cache/*&quot;</span></span><br><span class="line">    <span class="string">&quot;node_modules/*&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程备份配置</span></span><br><span class="line">REMOTE_BACKUP=<span class="literal">false</span></span><br><span class="line">REMOTE_HOST=<span class="string">&quot;backup.example.com&quot;</span></span><br><span class="line">REMOTE_USER=<span class="string">&quot;backup&quot;</span></span><br><span class="line">REMOTE_PATH=<span class="string">&quot;/remote/backup&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通知配置</span></span><br><span class="line">NOTIFICATION=<span class="literal">true</span></span><br><span class="line">EMAIL_TO=<span class="string">&quot;admin@example.com&quot;</span></span><br><span class="line">WEBHOOK_URL=<span class="string">&quot;&quot;</span></span><br><span class="line">EOF</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;默认配置文件已创建: <span class="variable">$CONFIG_FILE</span>&quot;</span></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;请编辑配置文件后重新运行脚本&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建备份目录</span></span><br><span class="line"><span class="function"><span class="title">create_backup_dir</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> backup_date=$(<span class="built_in">date</span> +%Y%m%d_%H%M%S)</span><br><span class="line">    CURRENT_BACKUP_DIR=<span class="string">&quot;<span class="variable">$BACKUP_DIR</span>/<span class="variable">$backup_date</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$CURRENT_BACKUP_DIR</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;无法创建备份目录: <span class="variable">$CURRENT_BACKUP_DIR</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份目录已创建: <span class="variable">$CURRENT_BACKUP_DIR</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库备份</span></span><br><span class="line"><span class="function"><span class="title">backup_databases</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$&#123;#DB_NAMES[@]&#125;</span> -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;未配置数据库备份&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始数据库备份...&quot;</span></span><br><span class="line">    <span class="built_in">local</span> db_backup_dir=<span class="string">&quot;<span class="variable">$CURRENT_BACKUP_DIR</span>/databases&quot;</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$db_backup_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> db_name <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;DB_NAMES[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;备份数据库: <span class="variable">$db_name</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$DB_TYPE</span> <span class="keyword">in</span></span><br><span class="line">            mysql)</span><br><span class="line">                backup_mysql_database <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> <span class="string">&quot;<span class="variable">$db_backup_dir</span>&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">            postgresql)</span><br><span class="line">                backup_postgresql_database <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> <span class="string">&quot;<span class="variable">$db_backup_dir</span>&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">            mongodb)</span><br><span class="line">                backup_mongodb_database <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> <span class="string">&quot;<span class="variable">$db_backup_dir</span>&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                <span class="built_in">log</span> ERROR <span class="string">&quot;不支持的数据库类型: <span class="variable">$DB_TYPE</span>&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># MySQL备份</span></span><br><span class="line"><span class="function"><span class="title">backup_mysql_database</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> db_name=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> backup_dir=<span class="variable">$2</span></span><br><span class="line">    <span class="built_in">local</span> backup_file=<span class="string">&quot;<span class="variable">$backup_dir</span>/<span class="variable">$&#123;db_name&#125;</span>.sql&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! mysqldump -h<span class="string">&quot;<span class="variable">$DB_HOST</span>&quot;</span> -P<span class="string">&quot;<span class="variable">$DB_PORT</span>&quot;</span> -u<span class="string">&quot;<span class="variable">$DB_USER</span>&quot;</span> -p<span class="string">&quot;<span class="variable">$DB_PASSWORD</span>&quot;</span> \</span><br><span class="line">        --single-transaction --routines --triggers <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> &gt; <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> ERROR <span class="string">&quot;MySQL数据库备份失败: <span class="variable">$db_name</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$COMPRESS</span>&quot;</span> == <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        gzip <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span></span><br><span class="line">        backup_file=<span class="string">&quot;<span class="variable">$&#123;backup_file&#125;</span>.gz&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;MySQL数据库备份完成: <span class="variable">$backup_file</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL备份</span></span><br><span class="line"><span class="function"><span class="title">backup_postgresql_database</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> db_name=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> backup_dir=<span class="variable">$2</span></span><br><span class="line">    <span class="built_in">local</span> backup_file=<span class="string">&quot;<span class="variable">$backup_dir</span>/<span class="variable">$&#123;db_name&#125;</span>.sql&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">export</span> PGPASSWORD=<span class="string">&quot;<span class="variable">$DB_PASSWORD</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! pg_dump -h <span class="string">&quot;<span class="variable">$DB_HOST</span>&quot;</span> -p <span class="string">&quot;<span class="variable">$DB_PORT</span>&quot;</span> -U <span class="string">&quot;<span class="variable">$DB_USER</span>&quot;</span> -d <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> &gt; <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> ERROR <span class="string">&quot;PostgreSQL数据库备份失败: <span class="variable">$db_name</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$COMPRESS</span>&quot;</span> == <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        gzip <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span></span><br><span class="line">        backup_file=<span class="string">&quot;<span class="variable">$&#123;backup_file&#125;</span>.gz&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;PostgreSQL数据库备份完成: <span class="variable">$backup_file</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># MongoDB备份</span></span><br><span class="line"><span class="function"><span class="title">backup_mongodb_database</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> db_name=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> backup_dir=<span class="variable">$2</span></span><br><span class="line">    <span class="built_in">local</span> backup_path=<span class="string">&quot;<span class="variable">$backup_dir</span>/<span class="variable">$db_name</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! mongodump --host <span class="string">&quot;<span class="variable">$DB_HOST</span>:<span class="variable">$DB_PORT</span>&quot;</span> --db <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span> --out <span class="string">&quot;<span class="variable">$backup_path</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> ERROR <span class="string">&quot;MongoDB数据库备份失败: <span class="variable">$db_name</span>&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$COMPRESS</span>&quot;</span> == <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        tar -czf <span class="string">&quot;<span class="variable">$&#123;backup_path&#125;</span>.tar.gz&quot;</span> -C <span class="string">&quot;<span class="variable">$backup_dir</span>&quot;</span> <span class="string">&quot;<span class="variable">$db_name</span>&quot;</span></span><br><span class="line">        <span class="built_in">rm</span> -rf <span class="string">&quot;<span class="variable">$backup_path</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;MongoDB数据库备份完成: <span class="variable">$backup_path</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件备份</span></span><br><span class="line"><span class="function"><span class="title">backup_files</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$&#123;#FILE_PATHS[@]&#125;</span> -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;未配置文件备份&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始文件备份...&quot;</span></span><br><span class="line">    <span class="built_in">local</span> file_backup_dir=<span class="string">&quot;<span class="variable">$CURRENT_BACKUP_DIR</span>/files&quot;</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$file_backup_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 构建排除参数</span></span><br><span class="line">    <span class="built_in">local</span> exclude_args=()</span><br><span class="line">    <span class="keyword">for</span> pattern <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;EXCLUDE_PATTERNS[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        exclude_args+=(--exclude=<span class="string">&quot;<span class="variable">$pattern</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> path <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;FILE_PATHS[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ ! -e <span class="string">&quot;<span class="variable">$path</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> WARN <span class="string">&quot;路径不存在，跳过: <span class="variable">$path</span>&quot;</span></span><br><span class="line">            <span class="built_in">continue</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;备份文件: <span class="variable">$path</span>&quot;</span></span><br><span class="line">        <span class="built_in">local</span> path_name=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$path</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">local</span> backup_file=<span class="string">&quot;<span class="variable">$file_backup_dir</span>/<span class="variable">$&#123;path_name&#125;</span>.tar&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$COMPRESS</span>&quot;</span> == <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            backup_file=<span class="string">&quot;<span class="variable">$&#123;backup_file&#125;</span>.gz&quot;</span></span><br><span class="line">            tar -czf <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;exclude_args[@]&#125;</span>&quot;</span> -C <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$path</span>&quot;</span>)</span>&quot;</span> <span class="string">&quot;<span class="variable">$path_name</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            tar -cf <span class="string">&quot;<span class="variable">$backup_file</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;exclude_args[@]&#125;</span>&quot;</span> -C <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$path</span>&quot;</span>)</span>&quot;</span> <span class="string">&quot;<span class="variable">$path_name</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> [[ $? -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">log</span> INFO <span class="string">&quot;文件备份完成: <span class="variable">$backup_file</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> ERROR <span class="string">&quot;文件备份失败: <span class="variable">$path</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理旧备份</span></span><br><span class="line"><span class="function"><span class="title">cleanup_old_backups</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;清理 <span class="variable">$RETENTION_DAYS</span> 天前的备份...&quot;</span></span><br><span class="line">    </span><br><span class="line">    find <span class="string">&quot;<span class="variable">$BACKUP_DIR</span>&quot;</span> -maxdepth 1 -<span class="built_in">type</span> d -name <span class="string">&quot;20*&quot;</span> -mtime +<span class="variable">$RETENTION_DAYS</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -rf &#123;&#125; \; 2&gt;/dev/null</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> remaining_backups=$(find <span class="string">&quot;<span class="variable">$BACKUP_DIR</span>&quot;</span> -maxdepth 1 -<span class="built_in">type</span> d -name <span class="string">&quot;20*&quot;</span> | <span class="built_in">wc</span> -l)</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;剩余备份数量: <span class="variable">$remaining_backups</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程同步</span></span><br><span class="line"><span class="function"><span class="title">sync_to_remote</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$REMOTE_BACKUP</span>&quot;</span> != <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;未启用远程备份&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始远程同步...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! rsync -avz --delete <span class="string">&quot;<span class="variable">$CURRENT_BACKUP_DIR</span>/&quot;</span> <span class="string">&quot;<span class="variable">$REMOTE_USER</span>@<span class="variable">$REMOTE_HOST</span>:<span class="variable">$REMOTE_PATH</span>/&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> ERROR <span class="string">&quot;远程同步失败&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;远程同步完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送通知</span></span><br><span class="line"><span class="function"><span class="title">send_notification</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> status=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">local</span> message=<span class="variable">$2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$NOTIFICATION</span>&quot;</span> != <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> subject=<span class="string">&quot;备份任务 - <span class="variable">$status</span>&quot;</span></span><br><span class="line">    <span class="built_in">local</span> body=<span class="string">&quot;备份时间: <span class="subst">$(date)</span>\n备份目录: <span class="variable">$CURRENT_BACKUP_DIR</span>\n\n<span class="variable">$message</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发送邮件通知</span></span><br><span class="line">    <span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$EMAIL_TO</span>&quot;</span> ]] &amp;&amp; <span class="built_in">command</span> -v mail &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$body</span>&quot;</span> | mail -s <span class="string">&quot;<span class="variable">$subject</span>&quot;</span> <span class="string">&quot;<span class="variable">$EMAIL_TO</span>&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;邮件通知已发送&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发送Webhook通知</span></span><br><span class="line">    <span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$WEBHOOK_URL</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        curl -X POST <span class="string">&quot;<span class="variable">$WEBHOOK_URL</span>&quot;</span> \</span><br><span class="line">            -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">            -d <span class="string">&quot;&#123;\&quot;text\&quot;:\&quot;<span class="variable">$subject</span>\n<span class="variable">$body</span>\&quot;&#125;&quot;</span> &amp;&gt; /dev/null</span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;Webhook通知已发送&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成备份报告</span></span><br><span class="line"><span class="function"><span class="title">generate_report</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> report_file=<span class="string">&quot;<span class="variable">$CURRENT_BACKUP_DIR</span>/backup_report.txt&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$report_file</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">备份报告</span></span><br><span class="line"><span class="string">========================================</span></span><br><span class="line"><span class="string">备份时间: $(date)</span></span><br><span class="line"><span class="string">备份目录: $CURRENT_BACKUP_DIR</span></span><br><span class="line"><span class="string">保留天数: $RETENTION_DAYS</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">备份内容:</span></span><br><span class="line"><span class="string">$(find &quot;$CURRENT_BACKUP_DIR&quot; -type f -exec ls -lh &#123;&#125; \; | awk &#x27;&#123;print $5, $9&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">总大小: $(du -sh &quot;$CURRENT_BACKUP_DIR&quot; | cut -f1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">备份状态: 成功</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份报告已生成: <span class="variable">$report_file</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始执行备份任务...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 加载配置</span></span><br><span class="line">    load_config</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建备份目录</span></span><br><span class="line">    create_backup_dir</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 执行备份</span></span><br><span class="line">    backup_databases</span><br><span class="line">    backup_files</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 生成报告</span></span><br><span class="line">    generate_report</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 清理旧备份</span></span><br><span class="line">    cleanup_old_backups</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 远程同步</span></span><br><span class="line">    sync_to_remote</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发送通知</span></span><br><span class="line">    send_notification <span class="string">&quot;成功&quot;</span> <span class="string">&quot;备份任务执行成功&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份任务完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误处理</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;send_notification &quot;失败&quot; &quot;备份任务执行失败&quot;; exit 1&#x27;</span> ERR</span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本入口</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;BASH_SOURCE[0]&#125;</span>&quot;</span> == <span class="string">&quot;<span class="variable">$&#123;0&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="三、部署自动化"><a href="#三、部署自动化" class="headerlink" title="三、部署自动化"></a>三、部署自动化</h2><h3 id="应用部署脚本"><a href="#应用部署脚本" class="headerlink" title="应用部署脚本"></a>应用部署脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 应用自动化部署脚本</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/common.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署配置</span></span><br><span class="line">APP_NAME=<span class="string">&quot;myapp&quot;</span></span><br><span class="line">APP_VERSION=<span class="string">&quot;&quot;</span></span><br><span class="line">DEPLOY_ENV=<span class="string">&quot;production&quot;</span></span><br><span class="line">DEPLOY_USER=<span class="string">&quot;deploy&quot;</span></span><br><span class="line">DEPLOY_PATH=<span class="string">&quot;/opt/apps&quot;</span></span><br><span class="line">BACKUP_PATH=<span class="string">&quot;/opt/backups&quot;</span></span><br><span class="line">SERVICE_NAME=<span class="string">&quot;myapp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Git配置</span></span><br><span class="line">GIT_REPO=<span class="string">&quot;&quot;</span></span><br><span class="line">GIT_BRANCH=<span class="string">&quot;main&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line">DB_MIGRATE=<span class="literal">false</span></span><br><span class="line">DB_BACKUP=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析命令行参数</span></span><br><span class="line"><span class="function"><span class="title">parse_arguments</span></span>() &#123;</span><br><span class="line">    <span class="keyword">while</span> [[ <span class="variable">$#</span> -gt 0 ]]; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">            -v|--version)</span><br><span class="line">                APP_VERSION=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">                <span class="built_in">shift</span> 2</span><br><span class="line">                ;;</span><br><span class="line">            -e|--<span class="built_in">env</span>)</span><br><span class="line">                DEPLOY_ENV=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">                <span class="built_in">shift</span> 2</span><br><span class="line">                ;;</span><br><span class="line">            -b|--branch)</span><br><span class="line">                GIT_BRANCH=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">                <span class="built_in">shift</span> 2</span><br><span class="line">                ;;</span><br><span class="line">            --migrate)</span><br><span class="line">                DB_MIGRATE=<span class="literal">true</span></span><br><span class="line">                <span class="built_in">shift</span></span><br><span class="line">                ;;</span><br><span class="line">            --no-backup)</span><br><span class="line">                DB_BACKUP=<span class="literal">false</span></span><br><span class="line">                <span class="built_in">shift</span></span><br><span class="line">                ;;</span><br><span class="line">            -h|--<span class="built_in">help</span>)</span><br><span class="line">                show_help</span><br><span class="line">                <span class="built_in">exit</span> 0</span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                error_exit <span class="string">&quot;未知参数: <span class="variable">$1</span>&quot;</span></span><br><span class="line">                ;;</span><br><span class="line">        <span class="keyword">esac</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 验证必需参数</span></span><br><span class="line">    <span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$APP_VERSION</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;请指定应用版本: -v VERSION&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示帮助信息</span></span><br><span class="line"><span class="function"><span class="title">show_help</span></span>() &#123;</span><br><span class="line">    <span class="built_in">cat</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">应用自动化部署脚本</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">用法: $0 [选项]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">选项:</span></span><br><span class="line"><span class="string">    -v, --version VERSION    应用版本 (必需)</span></span><br><span class="line"><span class="string">    -e, --env ENV           部署环境 (默认: production)</span></span><br><span class="line"><span class="string">    -b, --branch BRANCH     Git分支 (默认: main)</span></span><br><span class="line"><span class="string">    --migrate               执行数据库迁移</span></span><br><span class="line"><span class="string">    --no-backup             跳过备份</span></span><br><span class="line"><span class="string">    -h, --help              显示帮助信息</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">示例:</span></span><br><span class="line"><span class="string">    $0 -v 1.2.3 -e staging --migrate</span></span><br><span class="line"><span class="string">    $0 -v 2.0.0 -b release/2.0 --no-backup</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预检查</span></span><br><span class="line"><span class="function"><span class="title">pre_deployment_check</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;执行部署前检查...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查用户权限</span></span><br><span class="line">    <span class="keyword">if</span> [[ $(<span class="built_in">id</span> -u) -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;不建议使用root用户部署&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查磁盘空间</span></span><br><span class="line">    <span class="built_in">local</span> available_space=$(<span class="built_in">df</span> <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>&quot;</span> | awk <span class="string">&#x27;NR==2 &#123;print $4&#125;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$available_space</span> -lt 1048576 ]]; <span class="keyword">then</span>  <span class="comment"># 1GB</span></span><br><span class="line">        error_exit <span class="string">&quot;磁盘空间不足，至少需要1GB可用空间&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查必需的命令</span></span><br><span class="line">    <span class="built_in">local</span> required_commands=(<span class="string">&quot;git&quot;</span> <span class="string">&quot;systemctl&quot;</span> <span class="string">&quot;tar&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> cmd <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;required_commands[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        check_command <span class="string">&quot;<span class="variable">$cmd</span>&quot;</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查服务状态</span></span><br><span class="line">    <span class="keyword">if</span> systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;服务当前状态: 运行中&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;服务当前状态: 已停止&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;部署前检查完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份当前版本</span></span><br><span class="line"><span class="function"><span class="title">backup_current_version</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$DB_BACKUP</span>&quot;</span> != <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;跳过备份&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份当前版本...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> backup_dir=<span class="string">&quot;<span class="variable">$BACKUP_PATH</span>/<span class="subst">$(date +%Y%m%d_%H%M%S)</span>&quot;</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$backup_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 备份应用文件</span></span><br><span class="line">    <span class="keyword">if</span> [[ -d <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        tar -czf <span class="string">&quot;<span class="variable">$backup_dir</span>/<span class="variable">$&#123;APP_NAME&#125;</span>_files.tar.gz&quot;</span> -C <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>&quot;</span> <span class="string">&quot;<span class="variable">$APP_NAME</span>&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;应用文件备份完成&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 备份数据库</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$DB_BACKUP</span>&quot;</span> == <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        backup_database <span class="string">&quot;<span class="variable">$backup_dir</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 保存当前版本信息</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>/VERSION&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cp</span> <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>/VERSION&quot;</span> <span class="string">&quot;<span class="variable">$backup_dir</span>/&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份完成: <span class="variable">$backup_dir</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$backup_dir</span>&quot;</span> &gt; /tmp/last_backup_path</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库备份</span></span><br><span class="line"><span class="function"><span class="title">backup_database</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> backup_dir=<span class="variable">$1</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;备份数据库...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 这里根据实际数据库类型调整</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">command</span> -v mysqldump &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        mysqldump --all-databases &gt; <span class="string">&quot;<span class="variable">$backup_dir</span>/database_backup.sql&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;MySQL数据库备份完成&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">command</span> -v pg_dumpall &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        pg_dumpall &gt; <span class="string">&quot;<span class="variable">$backup_dir</span>/database_backup.sql&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;PostgreSQL数据库备份完成&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;未找到数据库备份工具&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载新版本</span></span><br><span class="line"><span class="function"><span class="title">download_new_version</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;下载新版本: <span class="variable">$APP_VERSION</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> temp_dir=<span class="string">&quot;/tmp/<span class="variable">$&#123;APP_NAME&#125;</span>_<span class="variable">$&#123;APP_VERSION&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">rm</span> -rf <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$GIT_REPO</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 从Git仓库下载</span></span><br><span class="line">        git <span class="built_in">clone</span> --branch <span class="string">&quot;<span class="variable">$GIT_BRANCH</span>&quot;</span> --depth 1 <span class="string">&quot;<span class="variable">$GIT_REPO</span>&quot;</span> <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 检出指定版本</span></span><br><span class="line">        <span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span></span><br><span class="line">        <span class="keyword">if</span> git tag | grep -q <span class="string">&quot;^$APP_VERSION$&quot;</span>; <span class="keyword">then</span></span><br><span class="line">            git checkout <span class="string">&quot;<span class="variable">$APP_VERSION</span>&quot;</span></span><br><span class="line">            <span class="built_in">log</span> INFO <span class="string">&quot;已检出版本标签: <span class="variable">$APP_VERSION</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">log</span> WARN <span class="string">&quot;版本标签不存在，使用分支: <span class="variable">$GIT_BRANCH</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># 从其他源下载（如HTTP、FTP等）</span></span><br><span class="line">        <span class="built_in">log</span> ERROR <span class="string">&quot;未配置下载源&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span> &gt; /tmp/new_version_path</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;新版本下载完成: <span class="variable">$temp_dir</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建应用</span></span><br><span class="line"><span class="function"><span class="title">build_application</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> source_dir=$(<span class="built_in">cat</span> /tmp/new_version_path)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;构建应用...&quot;</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$source_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 根据项目类型执行构建</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;package.json&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Node.js项目</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;检测到Node.js项目&quot;</span></span><br><span class="line">        npm ci --production</span><br><span class="line">        <span class="keyword">if</span> [[ -f <span class="string">&quot;webpack.config.js&quot;</span> ]] || [[ -f <span class="string">&quot;vite.config.js&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            npm run build</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">elif</span> [[ -f <span class="string">&quot;requirements.txt&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Python项目</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;检测到Python项目&quot;</span></span><br><span class="line">        pip install -r requirements.txt</span><br><span class="line">    <span class="keyword">elif</span> [[ -f <span class="string">&quot;go.mod&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Go项目</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;检测到Go项目&quot;</span></span><br><span class="line">        go build -o <span class="string">&quot;<span class="variable">$APP_NAME</span>&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> [[ -f <span class="string">&quot;Makefile&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 使用Makefile构建</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;使用Makefile构建&quot;</span></span><br><span class="line">        make build</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;未检测到构建配置，跳过构建步骤&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;应用构建完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止服务</span></span><br><span class="line"><span class="function"><span class="title">stop_service</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;停止服务: <span class="variable">$SERVICE_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        systemctl stop <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 等待服务完全停止</span></span><br><span class="line">        <span class="built_in">local</span> <span class="built_in">timeout</span>=30</span><br><span class="line">        <span class="keyword">while</span> systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span> &amp;&amp; [[ <span class="variable">$timeout</span> -gt 0 ]]; <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">sleep</span> 1</span><br><span class="line">            ((timeout--))</span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">            error_exit <span class="string">&quot;服务停止超时&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;服务已停止&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;服务未运行&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署新版本</span></span><br><span class="line"><span class="function"><span class="title">deploy_new_version</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> source_dir=$(<span class="built_in">cat</span> /tmp/new_version_path)</span><br><span class="line">    <span class="built_in">local</span> target_dir=<span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;部署新版本到: <span class="variable">$target_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建目标目录</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$target_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 复制文件</span></span><br><span class="line">    rsync -av --delete <span class="string">&quot;<span class="variable">$source_dir</span>/&quot;</span> <span class="string">&quot;<span class="variable">$target_dir</span>/&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 设置权限</span></span><br><span class="line">    <span class="built_in">chown</span> -R <span class="string">&quot;<span class="variable">$DEPLOY_USER</span>:<span class="variable">$DEPLOY_USER</span>&quot;</span> <span class="string">&quot;<span class="variable">$target_dir</span>&quot;</span></span><br><span class="line">    <span class="built_in">chmod</span> -R 755 <span class="string">&quot;<span class="variable">$target_dir</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建版本文件</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$APP_VERSION</span>&quot;</span> &gt; <span class="string">&quot;<span class="variable">$target_dir</span>/VERSION&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(date)</span>&quot;</span> &gt; <span class="string">&quot;<span class="variable">$target_dir</span>/DEPLOY_TIME&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;文件部署完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新配置</span></span><br><span class="line"><span class="function"><span class="title">update_configuration</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;更新配置文件...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> config_dir=<span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>/config&quot;</span></span><br><span class="line">    <span class="built_in">local</span> env_config=<span class="string">&quot;<span class="variable">$config_dir</span>/<span class="variable">$DEPLOY_ENV</span>.conf&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 根据环境更新配置</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$env_config</span>.template&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 从模板生成配置</span></span><br><span class="line">        envsubst &lt; <span class="string">&quot;<span class="variable">$env_config</span>.template&quot;</span> &gt; <span class="string">&quot;<span class="variable">$env_config</span>&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;配置文件已从模板生成: <span class="variable">$env_config</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 设置配置文件权限</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$env_config</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">chmod</span> 600 <span class="string">&quot;<span class="variable">$env_config</span>&quot;</span></span><br><span class="line">        <span class="built_in">chown</span> <span class="string">&quot;<span class="variable">$DEPLOY_USER</span>:<span class="variable">$DEPLOY_USER</span>&quot;</span> <span class="string">&quot;<span class="variable">$env_config</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库迁移</span></span><br><span class="line"><span class="function"><span class="title">migrate_database</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$DB_MIGRATE</span>&quot;</span> != <span class="string">&quot;true&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;跳过数据库迁移&quot;</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;执行数据库迁移...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 根据项目类型执行迁移</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;manage.py&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Django项目</span></span><br><span class="line">        python manage.py migrate</span><br><span class="line">    <span class="keyword">elif</span> [[ -f <span class="string">&quot;artisan&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Laravel项目</span></span><br><span class="line">        php artisan migrate --force</span><br><span class="line">    <span class="keyword">elif</span> [[ -f <span class="string">&quot;bin/rails&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># Rails项目</span></span><br><span class="line">        bundle <span class="built_in">exec</span> rails db:migrate RAILS_ENV=<span class="string">&quot;<span class="variable">$DEPLOY_ENV</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;未找到数据库迁移工具&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;数据库迁移完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line"><span class="function"><span class="title">start_service</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;启动服务: <span class="variable">$SERVICE_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    systemctl start <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 等待服务启动</span></span><br><span class="line">    <span class="built_in">local</span> <span class="built_in">timeout</span>=30</span><br><span class="line">    <span class="keyword">while</span> ! systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span> &amp;&amp; [[ <span class="variable">$timeout</span> -gt 0 ]]; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">sleep</span> 1</span><br><span class="line">        ((timeout--))</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ! systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;服务启动失败&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;服务启动成功&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 健康检查</span></span><br><span class="line"><span class="function"><span class="title">health_check</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;执行健康检查...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查服务状态</span></span><br><span class="line">    <span class="keyword">if</span> ! systemctl is-active --quiet <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;服务未运行&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查端口监听</span></span><br><span class="line">    <span class="built_in">local</span> port=$(grep -o <span class="string">&#x27;port.*[0-9]\+&#x27;</span> <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>/<span class="variable">$APP_NAME</span>/config/<span class="variable">$DEPLOY_ENV</span>.conf&quot;</span> | grep -o <span class="string">&#x27;[0-9]\+&#x27;</span> | <span class="built_in">head</span> -1)</span><br><span class="line">    <span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$port</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> ! netstat -tuln | grep -q <span class="string">&quot;:<span class="variable">$port</span> &quot;</span>; <span class="keyword">then</span></span><br><span class="line">            error_exit <span class="string">&quot;端口 <span class="variable">$port</span> 未监听&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;端口 <span class="variable">$port</span> 监听正常&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># HTTP健康检查</span></span><br><span class="line">    <span class="built_in">local</span> health_url=<span class="string">&quot;http://localhost:<span class="variable">$&#123;port:-8080&#125;</span>/health&quot;</span></span><br><span class="line">    <span class="keyword">if</span> curl -f -s <span class="string">&quot;<span class="variable">$health_url</span>&quot;</span> &amp;&gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;HTTP健康检查通过&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;HTTP健康检查失败，但服务可能仍在启动中&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;健康检查完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 回滚</span></span><br><span class="line"><span class="function"><span class="title">rollback</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> ERROR <span class="string">&quot;部署失败，开始回滚...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> backup_path=$(<span class="built_in">cat</span> /tmp/last_backup_path 2&gt;/dev/null)</span><br><span class="line">    <span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$backup_path</span>&quot;</span> ]] || [[ ! -d <span class="string">&quot;<span class="variable">$backup_path</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        error_exit <span class="string">&quot;无法找到备份，回滚失败&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 停止服务</span></span><br><span class="line">    systemctl stop <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span> || <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 恢复文件</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$backup_path</span>/<span class="variable">$&#123;APP_NAME&#125;</span>_files.tar.gz&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        tar -xzf <span class="string">&quot;<span class="variable">$backup_path</span>/<span class="variable">$&#123;APP_NAME&#125;</span>_files.tar.gz&quot;</span> -C <span class="string">&quot;<span class="variable">$DEPLOY_PATH</span>&quot;</span></span><br><span class="line">        <span class="built_in">log</span> INFO <span class="string">&quot;应用文件已恢复&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 恢复数据库</span></span><br><span class="line">    <span class="keyword">if</span> [[ -f <span class="string">&quot;<span class="variable">$backup_path</span>/database_backup.sql&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        mysql &lt; <span class="string">&quot;<span class="variable">$backup_path</span>/database_backup.sql&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        psql -f <span class="string">&quot;<span class="variable">$backup_path</span>/database_backup.sql&quot;</span> 2&gt;/dev/null || \</span><br><span class="line">        <span class="built_in">log</span> WARN <span class="string">&quot;数据库恢复失败&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 启动服务</span></span><br><span class="line">    systemctl start <span class="string">&quot;<span class="variable">$SERVICE_NAME</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;回滚完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理</span></span><br><span class="line"><span class="function"><span class="title">cleanup</span></span>() &#123;</span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;清理临时文件...&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">local</span> temp_dir=$(<span class="built_in">cat</span> /tmp/new_version_path 2&gt;/dev/null)</span><br><span class="line">    <span class="keyword">if</span> [[ -n <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span> ]] &amp;&amp; [[ -d <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">rm</span> -rf <span class="string">&quot;<span class="variable">$temp_dir</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">rm</span> -f /tmp/new_version_path /tmp/last_backup_path</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;清理完成&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    parse_arguments <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;开始部署 <span class="variable">$APP_NAME</span> v<span class="variable">$APP_VERSION</span> 到 <span class="variable">$DEPLOY_ENV</span> 环境&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 设置错误处理</span></span><br><span class="line">    <span class="built_in">trap</span> <span class="string">&#x27;rollback; cleanup; exit 1&#x27;</span> ERR</span><br><span class="line">    </span><br><span class="line">    pre_deployment_check</span><br><span class="line">    backup_current_version</span><br><span class="line">    download_new_version</span><br><span class="line">    build_application</span><br><span class="line">    stop_service</span><br><span class="line">    deploy_new_version</span><br><span class="line">    update_configuration</span><br><span class="line">    migrate_database</span><br><span class="line">    start_service</span><br><span class="line">    health_check</span><br><span class="line">    cleanup</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;部署成功完成！&quot;</span></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;应用版本: <span class="variable">$APP_VERSION</span>&quot;</span></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;部署环境: <span class="variable">$DEPLOY_ENV</span>&quot;</span></span><br><span class="line">    <span class="built_in">log</span> INFO <span class="string">&quot;部署时间: <span class="subst">$(date)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本入口</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;BASH_SOURCE[0]&#125;</span>&quot;</span> == <span class="string">&quot;<span class="variable">$&#123;0&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    main <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="四、后记与总结"><a href="#四、后记与总结" class="headerlink" title="四、后记与总结"></a>四、后记与总结</h2><ul>
<li><strong>本文核心观点</strong>: Shell脚本是系统管理和自动化运维的基础工具，通过规范化的脚本编写可以大幅提升运维效率</li>
<li><strong>值得进一步探讨的问题</strong>: <ul>
<li>如何在复杂环境中保证Shell脚本的可靠性和可维护性</li>
<li>如何与现代DevOps工具链（Docker、Kubernetes、CI&#x2F;CD）集成</li>
<li>如何处理Shell脚本的安全性和权限管理</li>
</ul>
</li>
<li><strong>行动项</strong>: <ul>
<li>✅ 掌握Shell脚本的核心语法和最佳实践</li>
<li>📋 建立标准化的脚本模板和公共函数库</li>
<li>📋 在实际项目中应用自动化脚本</li>
<li>📋 持续优化和完善脚本的错误处理和日志记录</li>
</ul>
</li>
</ul>
<h2 id="相关技术文档"><a href="#相关技术文档" class="headerlink" title="相关技术文档"></a>相关技术文档</h2><h3 id="深度学习资源"><a href="#深度学习资源" class="headerlink" title="深度学习资源"></a>深度学习资源</h3><ul>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%B7%A5%E5%85%B7%E6%89%A9%E5%B1%95/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/Shell%E7%BC%96%E7%A8%8B.md">Shell编程进阶技巧</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/CI_CD/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2.md">CI&#x2F;CD自动化实践</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%B7%A5%E5%85%B7%E6%89%A9%E5%B1%95/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6.md">系统监控告警方案</a></li>
</ul>
<h3 id="相关工具链接"><a href="#相关工具链接" class="headerlink" title="相关工具链接"></a>相关工具链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.gnu.org/software/bash/manual/">Bash官方手册</a></li>
<li><a target="_blank" rel="noopener" href="https://www.shellcheck.net/">ShellCheck语法检查</a></li>
<li><a target="_blank" rel="noopener" href="https://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</a></li>
</ul>
<hr>
<p><em>创建于：2025年09月25日 15:00</em><br><em>更新于：2025年09月25日 15:00</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E5%AE%9E%E8%B7%B5/" data-id="cmfzn3a7x001jla3i6scgaf13" data-title="Shell脚本自动化实践指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Bash/" rel="tag">Bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" rel="tag">系统管理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" rel="tag">脚本编程</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" rel="tag">自动化部署</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-自动化工具/Python自动化脚本实战指南" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" class="article-date">
  <time class="dt-published" datetime="2025-09-25T14:30:00.000Z" itemprop="datePublished">2025-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a>►<a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Python%E7%BC%96%E7%A8%8B/">Python编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/">Python自动化脚本实战指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="一、Python自动化概述"><a href="#一、Python自动化概述" class="headerlink" title="一、Python自动化概述"></a>一、Python自动化概述</h2><h3 id="为什么选择Python做自动化"><a href="#为什么选择Python做自动化" class="headerlink" title="为什么选择Python做自动化"></a>为什么选择Python做自动化</h3><p>Python在自动化领域具有独特优势：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python自动化的核心优势</span></span><br><span class="line">优势 = &#123;</span><br><span class="line">    <span class="string">&quot;语法简洁&quot;</span>: <span class="string">&quot;易读易写，开发效率高&quot;</span>,</span><br><span class="line">    <span class="string">&quot;库生态丰富&quot;</span>: <span class="string">&quot;几乎所有场景都有现成的库&quot;</span>,</span><br><span class="line">    <span class="string">&quot;跨平台支持&quot;</span>: <span class="string">&quot;Windows、macOS、Linux通用&quot;</span>,</span><br><span class="line">    <span class="string">&quot;社区活跃&quot;</span>: <span class="string">&quot;问题解决方案丰富&quot;</span>,</span><br><span class="line">    <span class="string">&quot;学习成本低&quot;</span>: <span class="string">&quot;适合非专业程序员使用&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自动化应用场景"><a href="#自动化应用场景" class="headerlink" title="自动化应用场景"></a>自动化应用场景</h3><ul>
<li><strong>文件操作</strong>: 批量重命名、格式转换、内容处理</li>
<li><strong>数据处理</strong>: Excel处理、数据库操作、API调用</li>
<li><strong>Web自动化</strong>: 网页操作、数据抓取、表单提交</li>
<li><strong>系统管理</strong>: 日志分析、服务监控、备份任务</li>
<li><strong>办公自动化</strong>: 邮件发送、报表生成、文档处理</li>
</ul>
<h2 id="二、环境搭建与基础配置"><a href="#二、环境搭建与基础配置" class="headerlink" title="二、环境搭建与基础配置"></a>二、环境搭建与基础配置</h2><h3 id="Python环境准备"><a href="#Python环境准备" class="headerlink" title="Python环境准备"></a>Python环境准备</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查Python版本（推荐3.8+）</span></span><br><span class="line">python --version</span><br><span class="line">python3 --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">python -m venv automation_env</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活虚拟环境</span></span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">automation_env\Scripts\activate</span><br><span class="line"><span class="comment"># macOS/Linux</span></span><br><span class="line"><span class="built_in">source</span> automation_env/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装常用自动化库</span></span><br><span class="line">pip install requests beautifulsoup4 selenium pandas openpyxl schedule</span><br></pre></td></tr></table></figure>

<h3 id="必备库介绍"><a href="#必备库介绍" class="headerlink" title="必备库介绍"></a>必备库介绍</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 核心自动化库</span></span><br><span class="line"><span class="keyword">import</span> os           <span class="comment"># 系统操作</span></span><br><span class="line"><span class="keyword">import</span> shutil       <span class="comment"># 文件操作</span></span><br><span class="line"><span class="keyword">import</span> glob         <span class="comment"># 文件匹配</span></span><br><span class="line"><span class="keyword">import</span> subprocess   <span class="comment"># 执行系统命令</span></span><br><span class="line"><span class="keyword">import</span> schedule     <span class="comment"># 任务调度</span></span><br><span class="line"><span class="keyword">import</span> time         <span class="comment"># 时间处理</span></span><br><span class="line"><span class="keyword">import</span> datetime     <span class="comment"># 日期时间</span></span><br><span class="line"><span class="keyword">import</span> json         <span class="comment"># JSON处理</span></span><br><span class="line"><span class="keyword">import</span> csv          <span class="comment"># CSV处理</span></span><br><span class="line"><span class="keyword">import</span> requests     <span class="comment"># HTTP请求</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># 数据处理</span></span><br></pre></td></tr></table></figure>

<h2 id="三、文件自动化处理"><a href="#三、文件自动化处理" class="headerlink" title="三、文件自动化处理"></a>三、文件自动化处理</h2><h3 id="批量文件重命名"><a href="#批量文件重命名" class="headerlink" title="批量文件重命名"></a>批量文件重命名</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">批量文件重命名工具</span></span><br><span class="line"><span class="string">支持多种重命名模式：前缀、后缀、序号、日期等</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileRenamer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, directory</span>):</span><br><span class="line">        <span class="variable language_">self</span>.directory = Path(directory)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rename_with_prefix</span>(<span class="params">self, prefix, file_pattern=<span class="string">&quot;*&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;添加前缀重命名&quot;&quot;&quot;</span></span><br><span class="line">        files = <span class="built_in">list</span>(<span class="variable language_">self</span>.directory.glob(file_pattern))</span><br><span class="line">        renamed_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> file_path <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file_path.is_file():</span><br><span class="line">                new_name = <span class="string">f&quot;<span class="subst">&#123;prefix&#125;</span>_<span class="subst">&#123;file_path.name&#125;</span>&quot;</span></span><br><span class="line">                new_path = file_path.parent / new_name</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    file_path.rename(new_path)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名: <span class="subst">&#123;file_path.name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&quot;</span>)</span><br><span class="line">                    renamed_count += <span class="number">1</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名失败 <span class="subst">&#123;file_path.name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;总共重命名了 <span class="subst">&#123;renamed_count&#125;</span> 个文件&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> renamed_count</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rename_with_sequence</span>(<span class="params">self, prefix=<span class="string">&quot;file&quot;</span>, start_num=<span class="number">1</span>, file_pattern=<span class="string">&quot;*&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;按序号重命名&quot;&quot;&quot;</span></span><br><span class="line">        files = <span class="built_in">sorted</span>(<span class="built_in">list</span>(<span class="variable language_">self</span>.directory.glob(file_pattern)))</span><br><span class="line">        renamed_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i, file_path <span class="keyword">in</span> <span class="built_in">enumerate</span>(files):</span><br><span class="line">            <span class="keyword">if</span> file_path.is_file():</span><br><span class="line">                extension = file_path.suffix</span><br><span class="line">                new_name = <span class="string">f&quot;<span class="subst">&#123;prefix&#125;</span>_<span class="subst">&#123;start_num + i:03d&#125;</span><span class="subst">&#123;extension&#125;</span>&quot;</span></span><br><span class="line">                new_path = file_path.parent / new_name</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    file_path.rename(new_path)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名: <span class="subst">&#123;file_path.name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&quot;</span>)</span><br><span class="line">                    renamed_count += <span class="number">1</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名失败 <span class="subst">&#123;file_path.name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> renamed_count</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rename_by_date</span>(<span class="params">self, date_format=<span class="string">&quot;%Y%m%d&quot;</span>, file_pattern=<span class="string">&quot;*&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;按文件修改日期重命名&quot;&quot;&quot;</span></span><br><span class="line">        files = <span class="built_in">list</span>(<span class="variable language_">self</span>.directory.glob(file_pattern))</span><br><span class="line">        renamed_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> file_path <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> file_path.is_file():</span><br><span class="line">                <span class="comment"># 获取文件修改时间</span></span><br><span class="line">                mtime = datetime.fromtimestamp(file_path.stat().st_mtime)</span><br><span class="line">                date_str = mtime.strftime(date_format)</span><br><span class="line">                </span><br><span class="line">                extension = file_path.suffix</span><br><span class="line">                new_name = <span class="string">f&quot;<span class="subst">&#123;date_str&#125;</span>_<span class="subst">&#123;file_path.stem&#125;</span><span class="subst">&#123;extension&#125;</span>&quot;</span></span><br><span class="line">                new_path = file_path.parent / new_name</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    file_path.rename(new_path)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名: <span class="subst">&#123;file_path.name&#125;</span> -&gt; <span class="subst">&#123;new_name&#125;</span>&quot;</span>)</span><br><span class="line">                    renamed_count += <span class="number">1</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;重命名失败 <span class="subst">&#123;file_path.name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> renamed_count</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    renamer = FileRenamer(<span class="string">&quot;./test_files&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加前缀</span></span><br><span class="line">    <span class="comment"># renamer.rename_with_prefix(&quot;backup&quot;, &quot;*.txt&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 按序号重命名</span></span><br><span class="line">    <span class="comment"># renamer.rename_with_sequence(&quot;document&quot;, 1, &quot;*.pdf&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 按日期重命名</span></span><br><span class="line">    <span class="comment"># renamer.rename_by_date(&quot;%Y-%m-%d&quot;, &quot;*.jpg&quot;)</span></span><br></pre></td></tr></table></figure>

<h3 id="文件格式转换"><a href="#文件格式转换" class="headerlink" title="文件格式转换"></a>文件格式转换</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文件格式转换工具</span></span><br><span class="line"><span class="string">支持图片、文档、数据文件等多种格式转换</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileConverter</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_dir, output_dir=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.input_dir = Path(input_dir)</span><br><span class="line">        <span class="variable language_">self</span>.output_dir = Path(output_dir) <span class="keyword">if</span> output_dir <span class="keyword">else</span> <span class="variable language_">self</span>.input_dir / <span class="string">&quot;converted&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.output_dir.mkdir(exist_ok=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert_images</span>(<span class="params">self, source_format, target_format, quality=<span class="number">95</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;批量转换图片格式&quot;&quot;&quot;</span></span><br><span class="line">        pattern = <span class="string">f&quot;*.<span class="subst">&#123;source_format.lower()&#125;</span>&quot;</span></span><br><span class="line">        image_files = <span class="built_in">list</span>(<span class="variable language_">self</span>.input_dir.glob(pattern))</span><br><span class="line">        converted_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> img_path <span class="keyword">in</span> image_files:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">with</span> Image.<span class="built_in">open</span>(img_path) <span class="keyword">as</span> img:</span><br><span class="line">                    <span class="comment"># 处理RGBA模式（PNG透明背景）</span></span><br><span class="line">                    <span class="keyword">if</span> img.mode == <span class="string">&#x27;RGBA&#x27;</span> <span class="keyword">and</span> target_format.upper() == <span class="string">&#x27;JPEG&#x27;</span>:</span><br><span class="line">                        <span class="comment"># 创建白色背景</span></span><br><span class="line">                        background = Image.new(<span class="string">&#x27;RGB&#x27;</span>, img.size, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">                        background.paste(img, mask=img.split()[-<span class="number">1</span>])</span><br><span class="line">                        img = background</span><br><span class="line">                    </span><br><span class="line">                    output_path = <span class="variable language_">self</span>.output_dir / <span class="string">f&quot;<span class="subst">&#123;img_path.stem&#125;</span>.<span class="subst">&#123;target_format.lower()&#125;</span>&quot;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># 保存图片</span></span><br><span class="line">                    <span class="keyword">if</span> target_format.upper() == <span class="string">&#x27;JPEG&#x27;</span>:</span><br><span class="line">                        img.save(output_path, <span class="string">&#x27;JPEG&#x27;</span>, quality=quality)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        img.save(output_path, target_format.upper())</span><br><span class="line">                    </span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;转换完成: <span class="subst">&#123;img_path.name&#125;</span> -&gt; <span class="subst">&#123;output_path.name&#125;</span>&quot;</span>)</span><br><span class="line">                    converted_count += <span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;转换失败 <span class="subst">&#123;img_path.name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;总共转换了 <span class="subst">&#123;converted_count&#125;</span> 个图片文件&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> converted_count</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">excel_to_csv</span>(<span class="params">self, sheet_name=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Excel转CSV&quot;&quot;&quot;</span></span><br><span class="line">        excel_files = <span class="built_in">list</span>(<span class="variable language_">self</span>.input_dir.glob(<span class="string">&quot;*.xlsx&quot;</span>)) + <span class="built_in">list</span>(<span class="variable language_">self</span>.input_dir.glob(<span class="string">&quot;*.xls&quot;</span>))</span><br><span class="line">        converted_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> excel_path <span class="keyword">in</span> excel_files:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># 读取Excel文件</span></span><br><span class="line">                <span class="keyword">if</span> sheet_name:</span><br><span class="line">                    df = pd.read_excel(excel_path, sheet_name=sheet_name)</span><br><span class="line">                    output_path = <span class="variable language_">self</span>.output_dir / <span class="string">f&quot;<span class="subst">&#123;excel_path.stem&#125;</span>_<span class="subst">&#123;sheet_name&#125;</span>.csv&quot;</span></span><br><span class="line">                    df.to_csv(output_path, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>)</span><br><span class="line">                    converted_count += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># 读取所有工作表</span></span><br><span class="line">                    excel_data = pd.read_excel(excel_path, sheet_name=<span class="literal">None</span>)</span><br><span class="line">                    <span class="keyword">for</span> sheet, df <span class="keyword">in</span> excel_data.items():</span><br><span class="line">                        output_path = <span class="variable language_">self</span>.output_dir / <span class="string">f&quot;<span class="subst">&#123;excel_path.stem&#125;</span>_<span class="subst">&#123;sheet&#125;</span>.csv&quot;</span></span><br><span class="line">                        df.to_csv(output_path, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>)</span><br><span class="line">                        converted_count += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;转换完成: <span class="subst">&#123;excel_path.name&#125;</span>&quot;</span>)</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;转换失败 <span class="subst">&#123;excel_path.name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;总共转换了 <span class="subst">&#123;converted_count&#125;</span> 个工作表&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> converted_count</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    converter = FileConverter(<span class="string">&quot;./input_files&quot;</span>, <span class="string">&quot;./output_files&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 图片格式转换</span></span><br><span class="line">    converter.convert_images(<span class="string">&quot;png&quot;</span>, <span class="string">&quot;jpg&quot;</span>, quality=<span class="number">90</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Excel转CSV</span></span><br><span class="line">    converter.excel_to_csv()</span><br></pre></td></tr></table></figure>

<h2 id="四、数据处理自动化"><a href="#四、数据处理自动化" class="headerlink" title="四、数据处理自动化"></a>四、数据处理自动化</h2><h3 id="Excel数据处理"><a href="#Excel数据处理" class="headerlink" title="Excel数据处理"></a>Excel数据处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Excel数据处理自动化</span></span><br><span class="line"><span class="string">包括数据清洗、统计分析、报表生成等功能</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl.styles <span class="keyword">import</span> Font, PatternFill, Alignment</span><br><span class="line"><span class="keyword">from</span> openpyxl.chart <span class="keyword">import</span> BarChart, Reference</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExcelProcessor</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, file_path</span>):</span><br><span class="line">        <span class="variable language_">self</span>.file_path = file_path</span><br><span class="line">        <span class="variable language_">self</span>.data = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_data</span>(<span class="params">self, sheet_name=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;加载Excel数据&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.data = pd.read_excel(<span class="variable language_">self</span>.file_path, sheet_name=sheet_name)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;数据加载成功，共 <span class="subst">&#123;<span class="built_in">len</span>(self.data)&#125;</span> 行，<span class="subst">&#123;<span class="built_in">len</span>(self.data.columns)&#125;</span> 列&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;数据加载失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clean_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;数据清洗&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请先加载数据&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        original_rows = <span class="built_in">len</span>(<span class="variable language_">self</span>.data)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 删除完全重复的行</span></span><br><span class="line">        <span class="variable language_">self</span>.data = <span class="variable language_">self</span>.data.drop_duplicates()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 删除全为空值的行</span></span><br><span class="line">        <span class="variable language_">self</span>.data = <span class="variable language_">self</span>.data.dropna(how=<span class="string">&#x27;all&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 填充数值列的空值（用均值）</span></span><br><span class="line">        numeric_columns = <span class="variable language_">self</span>.data.select_dtypes(include=[np.number]).columns</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> numeric_columns:</span><br><span class="line">            <span class="variable language_">self</span>.data[col].fillna(<span class="variable language_">self</span>.data[col].mean(), inplace=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 填充文本列的空值</span></span><br><span class="line">        text_columns = <span class="variable language_">self</span>.data.select_dtypes(include=[<span class="string">&#x27;object&#x27;</span>]).columns</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> text_columns:</span><br><span class="line">            <span class="variable language_">self</span>.data[col].fillna(<span class="string">&#x27;未知&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        cleaned_rows = <span class="built_in">len</span>(<span class="variable language_">self</span>.data)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;数据清洗完成，从 <span class="subst">&#123;original_rows&#125;</span> 行清洗到 <span class="subst">&#123;cleaned_rows&#125;</span> 行&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_summary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;生成数据摘要&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请先加载数据&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        summary = &#123;</span><br><span class="line">            <span class="string">&#x27;基本信息&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;总行数&#x27;</span>: <span class="built_in">len</span>(<span class="variable language_">self</span>.data),</span><br><span class="line">                <span class="string">&#x27;总列数&#x27;</span>: <span class="built_in">len</span>(<span class="variable language_">self</span>.data.columns),</span><br><span class="line">                <span class="string">&#x27;数值列数&#x27;</span>: <span class="built_in">len</span>(<span class="variable language_">self</span>.data.select_dtypes(include=[np.number]).columns),</span><br><span class="line">                <span class="string">&#x27;文本列数&#x27;</span>: <span class="built_in">len</span>(<span class="variable language_">self</span>.data.select_dtypes(include=[<span class="string">&#x27;object&#x27;</span>]).columns)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&#x27;数据质量&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;重复行数&#x27;</span>: <span class="variable language_">self</span>.data.duplicated().<span class="built_in">sum</span>(),</span><br><span class="line">                <span class="string">&#x27;完全空行数&#x27;</span>: <span class="variable language_">self</span>.data.isnull().<span class="built_in">all</span>(axis=<span class="number">1</span>).<span class="built_in">sum</span>(),</span><br><span class="line">                <span class="string">&#x27;有空值的列&#x27;</span>: <span class="variable language_">self</span>.data.isnull().<span class="built_in">any</span>().<span class="built_in">sum</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> summary</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_report</span>(<span class="params">self, output_path</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;创建Excel报表&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.data <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;请先加载数据&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        wb = Workbook()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 数据摘要工作表</span></span><br><span class="line">        ws_summary = wb.active</span><br><span class="line">        ws_summary.title = <span class="string">&quot;数据摘要&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 设置标题样式</span></span><br><span class="line">        title_font = Font(bold=<span class="literal">True</span>, size=<span class="number">14</span>)</span><br><span class="line">        header_font = Font(bold=<span class="literal">True</span>)</span><br><span class="line">        header_fill = PatternFill(start_color=<span class="string">&quot;CCCCCC&quot;</span>, end_color=<span class="string">&quot;CCCCCC&quot;</span>, fill_type=<span class="string">&quot;solid&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 写入摘要信息</span></span><br><span class="line">        summary = <span class="variable language_">self</span>.generate_summary()</span><br><span class="line">        row = <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> category, items <span class="keyword">in</span> summary.items():</span><br><span class="line">            ws_summary.cell(row=row, column=<span class="number">1</span>, value=category).font = title_font</span><br><span class="line">            row += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> key, value <span class="keyword">in</span> items.items():</span><br><span class="line">                ws_summary.cell(row=row, column=<span class="number">1</span>, value=key)</span><br><span class="line">                ws_summary.cell(row=row, column=<span class="number">2</span>, value=value)</span><br><span class="line">                row += <span class="number">1</span></span><br><span class="line">            row += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 原始数据工作表</span></span><br><span class="line">        ws_data = wb.create_sheet(<span class="string">&quot;原始数据&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 写入列标题</span></span><br><span class="line">        <span class="keyword">for</span> col_idx, column <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="variable language_">self</span>.data.columns, <span class="number">1</span>):</span><br><span class="line">            cell = ws_data.cell(row=<span class="number">1</span>, column=col_idx, value=column)</span><br><span class="line">            cell.font = header_font</span><br><span class="line">            cell.fill = header_fill</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 写入数据</span></span><br><span class="line">        <span class="keyword">for</span> row_idx, row_data <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="variable language_">self</span>.data.values, <span class="number">2</span>):</span><br><span class="line">            <span class="keyword">for</span> col_idx, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(row_data, <span class="number">1</span>):</span><br><span class="line">                ws_data.cell(row=row_idx, column=col_idx, value=value)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 统计分析工作表（仅数值列）</span></span><br><span class="line">        numeric_data = <span class="variable language_">self</span>.data.select_dtypes(include=[np.number])</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> numeric_data.empty:</span><br><span class="line">            ws_stats = wb.create_sheet(<span class="string">&quot;统计分析&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            stats = numeric_data.describe()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 写入统计信息</span></span><br><span class="line">            <span class="keyword">for</span> col_idx, column <span class="keyword">in</span> <span class="built_in">enumerate</span>(stats.columns, <span class="number">2</span>):</span><br><span class="line">                ws_stats.cell(row=<span class="number">1</span>, column=col_idx, value=column).font = header_font</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> row_idx, index <span class="keyword">in</span> <span class="built_in">enumerate</span>(stats.index, <span class="number">2</span>):</span><br><span class="line">                ws_stats.cell(row=row_idx, column=<span class="number">1</span>, value=index).font = header_font</span><br><span class="line">                <span class="keyword">for</span> col_idx, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(stats.loc[index], <span class="number">2</span>):</span><br><span class="line">                    ws_stats.cell(row=row_idx, column=col_idx, value=value)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 保存文件</span></span><br><span class="line">        wb.save(output_path)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;报表已保存到: <span class="subst">&#123;output_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    processor = ExcelProcessor(<span class="string">&quot;sales_data.xlsx&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> processor.load_data():</span><br><span class="line">        processor.clean_data()</span><br><span class="line">        processor.create_report(<span class="string">&quot;sales_report.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="数据库自动化操作"><a href="#数据库自动化操作" class="headerlink" title="数据库自动化操作"></a>数据库自动化操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">数据库自动化操作</span></span><br><span class="line"><span class="string">支持MySQL、PostgreSQL、SQLite等数据库</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DatabaseAutomation</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, db_type=<span class="string">&quot;sqlite&quot;</span>, **kwargs</span>):</span><br><span class="line">        <span class="variable language_">self</span>.db_type = db_type</span><br><span class="line">        <span class="variable language_">self</span>.connection = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.engine = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> db_type == <span class="string">&quot;sqlite&quot;</span>:</span><br><span class="line">            <span class="variable language_">self</span>.db_path = kwargs.get(<span class="string">&#x27;db_path&#x27;</span>, <span class="string">&#x27;automation.db&#x27;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.connect_sqlite()</span><br><span class="line">        <span class="keyword">elif</span> db_type == <span class="string">&quot;mysql&quot;</span>:</span><br><span class="line">            <span class="variable language_">self</span>.connect_mysql(**kwargs)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connect_sqlite</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;连接SQLite数据库&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.connection = sqlite3.connect(<span class="variable language_">self</span>.db_path)</span><br><span class="line">            <span class="variable language_">self</span>.engine = create_engine(<span class="string">f&#x27;sqlite:///<span class="subst">&#123;self.db_path&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;SQLite数据库连接成功: <span class="subst">&#123;self.db_path&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;SQLite连接失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connect_mysql</span>(<span class="params">self, host, user, password, database, port=<span class="number">3306</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;连接MySQL数据库&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            connection_string = <span class="string">f&quot;mysql+pymysql://<span class="subst">&#123;user&#125;</span>:<span class="subst">&#123;password&#125;</span>@<span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>/<span class="subst">&#123;database&#125;</span>&quot;</span></span><br><span class="line">            <span class="variable language_">self</span>.engine = create_engine(connection_string)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;MySQL数据库连接成功: <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>/<span class="subst">&#123;database&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;MySQL连接失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">execute_query</span>(<span class="params">self, query, params=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;执行SQL查询&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> params:</span><br><span class="line">                result = pd.read_sql_query(query, <span class="variable language_">self</span>.engine, params=params)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = pd.read_sql_query(query, <span class="variable language_">self</span>.engine)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;查询执行失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">backup_table</span>(<span class="params">self, table_name, backup_path=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;备份数据表&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> backup_path:</span><br><span class="line">            timestamp = datetime.now().strftime(<span class="string">&quot;%Y%m%d_%H%M%S&quot;</span>)</span><br><span class="line">            backup_path = <span class="string">f&quot;<span class="subst">&#123;table_name&#125;</span>_backup_<span class="subst">&#123;timestamp&#125;</span>.csv&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            query = <span class="string">f&quot;SELECT * FROM <span class="subst">&#123;table_name&#125;</span>&quot;</span></span><br><span class="line">            data = <span class="variable language_">self</span>.execute_query(query)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> data <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                data.to_csv(backup_path, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;表 <span class="subst">&#123;table_name&#125;</span> 备份完成: <span class="subst">&#123;backup_path&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;备份失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">import_csv_to_table</span>(<span class="params">self, csv_path, table_name, if_exists=<span class="string">&#x27;replace&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;导入CSV到数据表&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            data = pd.read_csv(csv_path)</span><br><span class="line">            data.to_sql(table_name, <span class="variable language_">self</span>.engine, if_exists=if_exists, index=<span class="literal">False</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;CSV导入成功: <span class="subst">&#123;csv_path&#125;</span> -&gt; <span class="subst">&#123;table_name&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;导入失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_daily_report</span>(<span class="params">self, date=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;生成日报&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> date:</span><br><span class="line">            date = datetime.now().strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 示例查询（需要根据实际表结构调整）</span></span><br><span class="line">        queries = &#123;</span><br><span class="line">            <span class="string">&quot;用户统计&quot;</span>: <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                SELECT </span></span><br><span class="line"><span class="string">                    COUNT(*) as 总用户数,</span></span><br><span class="line"><span class="string">                    COUNT(CASE WHEN created_date = &#x27;<span class="subst">&#123;date&#125;</span>&#x27; THEN 1 END) as 新增用户</span></span><br><span class="line"><span class="string">                FROM users</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;订单统计&quot;</span>: <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                SELECT </span></span><br><span class="line"><span class="string">                    COUNT(*) as 总订单数,</span></span><br><span class="line"><span class="string">                    SUM(amount) as 总金额,</span></span><br><span class="line"><span class="string">                    AVG(amount) as 平均订单金额</span></span><br><span class="line"><span class="string">                FROM orders </span></span><br><span class="line"><span class="string">                WHERE DATE(created_at) = &#x27;<span class="subst">&#123;date&#125;</span>&#x27;</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        report_data = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> report_name, query <span class="keyword">in</span> queries.items():</span><br><span class="line">            result = <span class="variable language_">self</span>.execute_query(query)</span><br><span class="line">            <span class="keyword">if</span> result <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                report_data[report_name] = result</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> report_data</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;关闭数据库连接&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.connection:</span><br><span class="line">            <span class="variable language_">self</span>.connection.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;数据库连接已关闭&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># SQLite示例</span></span><br><span class="line">    db = DatabaseAutomation(<span class="string">&quot;sqlite&quot;</span>, db_path=<span class="string">&quot;test.db&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 备份表</span></span><br><span class="line">    <span class="comment"># db.backup_table(&quot;users&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 导入CSV</span></span><br><span class="line">    <span class="comment"># db.import_csv_to_table(&quot;new_data.csv&quot;, &quot;products&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 生成报表</span></span><br><span class="line">    <span class="comment"># report = db.generate_daily_report()</span></span><br><span class="line">    <span class="comment"># print(report)</span></span><br><span class="line">    </span><br><span class="line">    db.close()</span><br></pre></td></tr></table></figure>

<h2 id="五、Web自动化"><a href="#五、Web自动化" class="headerlink" title="五、Web自动化"></a>五、Web自动化</h2><h3 id="网页数据抓取"><a href="#网页数据抓取" class="headerlink" title="网页数据抓取"></a>网页数据抓取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">网页数据抓取自动化</span></span><br><span class="line"><span class="string">使用requests和BeautifulSoup进行数据抓取</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin, urlparse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WebScraper</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, base_url, headers=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.base_url = base_url</span><br><span class="line">        <span class="variable language_">self</span>.session = requests.Session()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 设置默认请求头</span></span><br><span class="line">        default_headers = &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> headers:</span><br><span class="line">            default_headers.update(headers)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.session.headers.update(default_headers)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_page</span>(<span class="params">self, url, params=<span class="literal">None</span>, timeout=<span class="number">10</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;获取网页内容&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = <span class="variable language_">self</span>.session.get(url, params=params, timeout=timeout)</span><br><span class="line">            response.raise_for_status()</span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        <span class="keyword">except</span> requests.RequestException <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;请求失败 <span class="subst">&#123;url&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_html</span>(<span class="params">self, html_content</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;解析HTML内容&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> BeautifulSoup(html_content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">scrape_table</span>(<span class="params">self, url, table_selector=<span class="string">&quot;table&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;抓取表格数据&quot;&quot;&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.get_page(url)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> response:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        soup = <span class="variable language_">self</span>.parse_html(response.text)</span><br><span class="line">        tables = soup.select(table_selector)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> tables:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;未找到表格&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 解析第一个表格</span></span><br><span class="line">        table = tables[<span class="number">0</span>]</span><br><span class="line">        headers = []</span><br><span class="line">        rows = []</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 提取表头</span></span><br><span class="line">        header_row = table.find(<span class="string">&#x27;tr&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> header_row:</span><br><span class="line">            headers = [th.get_text(strip=<span class="literal">True</span>) <span class="keyword">for</span> th <span class="keyword">in</span> header_row.find_all([<span class="string">&#x27;th&#x27;</span>, <span class="string">&#x27;td&#x27;</span>])]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 提取数据行</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> table.find_all(<span class="string">&#x27;tr&#x27;</span>)[<span class="number">1</span>:]:  <span class="comment"># 跳过表头</span></span><br><span class="line">            row_data = [td.get_text(strip=<span class="literal">True</span>) <span class="keyword">for</span> td <span class="keyword">in</span> row.find_all([<span class="string">&#x27;td&#x27;</span>, <span class="string">&#x27;th&#x27;</span>])]</span><br><span class="line">            <span class="keyword">if</span> row_data:</span><br><span class="line">                rows.append(row_data)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 创建DataFrame</span></span><br><span class="line">        <span class="keyword">if</span> headers <span class="keyword">and</span> rows:</span><br><span class="line">            df = pd.DataFrame(rows, columns=headers)</span><br><span class="line">            <span class="keyword">return</span> df</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">scrape_links</span>(<span class="params">self, url, link_selector=<span class="string">&quot;a&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;抓取页面链接&quot;&quot;&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.get_page(url)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> response:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        soup = <span class="variable language_">self</span>.parse_html(response.text)</span><br><span class="line">        links = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> soup.select(link_selector):</span><br><span class="line">            href = link.get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">            text = link.get_text(strip=<span class="literal">True</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> href:</span><br><span class="line">                <span class="comment"># 转换为绝对URL</span></span><br><span class="line">                absolute_url = urljoin(url, href)</span><br><span class="line">                links.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;url&#x27;</span>: absolute_url,</span><br><span class="line">                    <span class="string">&#x27;text&#x27;</span>: text,</span><br><span class="line">                    <span class="string">&#x27;title&#x27;</span>: link.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> links</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">scrape_with_pagination</span>(<span class="params">self, start_url, next_selector=<span class="string">&quot;.next&quot;</span>, max_pages=<span class="number">10</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;处理分页抓取&quot;&quot;&quot;</span></span><br><span class="line">        all_data = []</span><br><span class="line">        current_url = start_url</span><br><span class="line">        page_count = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> current_url <span class="keyword">and</span> page_count &lt; max_pages:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;抓取第 <span class="subst">&#123;page_count + <span class="number">1</span>&#125;</span> 页: <span class="subst">&#123;current_url&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            response = <span class="variable language_">self</span>.get_page(current_url)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> response:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">            soup = <span class="variable language_">self</span>.parse_html(response.text)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 这里需要根据具体网站结构提取数据</span></span><br><span class="line">            <span class="comment"># 示例：提取所有文章标题</span></span><br><span class="line">            articles = soup.select(<span class="string">&#x27;.article-title&#x27;</span>)</span><br><span class="line">            page_data = [article.get_text(strip=<span class="literal">True</span>) <span class="keyword">for</span> article <span class="keyword">in</span> articles]</span><br><span class="line">            all_data.extend(page_data)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 查找下一页链接</span></span><br><span class="line">            next_link = soup.select_one(next_selector)</span><br><span class="line">            <span class="keyword">if</span> next_link <span class="keyword">and</span> next_link.get(<span class="string">&#x27;href&#x27;</span>):</span><br><span class="line">                current_url = urljoin(current_url, next_link[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                current_url = <span class="literal">None</span></span><br><span class="line">            </span><br><span class="line">            page_count += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 添加延迟避免被封</span></span><br><span class="line">            time.sleep(random.uniform(<span class="number">1</span>, <span class="number">3</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> all_data</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_data</span>(<span class="params">self, data, filename, <span class="built_in">format</span>=<span class="string">&#x27;csv&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;保存数据&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">format</span> == <span class="string">&#x27;csv&#x27;</span> <span class="keyword">and</span> <span class="built_in">isinstance</span>(data, pd.DataFrame):</span><br><span class="line">            data.to_csv(filename, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">format</span> == <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                json.dump(data, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;数据已保存到: <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    scraper = WebScraper(<span class="string">&quot;https://example.com&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 抓取表格数据</span></span><br><span class="line">    <span class="comment"># table_data = scraper.scrape_table(&quot;https://example.com/table&quot;)</span></span><br><span class="line">    <span class="comment"># if table_data is not None:</span></span><br><span class="line">    <span class="comment">#     scraper.save_data(table_data, &quot;scraped_table.csv&quot;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 抓取链接</span></span><br><span class="line">    <span class="comment"># links = scraper.scrape_links(&quot;https://example.com&quot;)</span></span><br><span class="line">    <span class="comment"># scraper.save_data(links, &quot;scraped_links.json&quot;, format=&#x27;json&#x27;)</span></span><br></pre></td></tr></table></figure>

<h2 id="六、任务调度与监控"><a href="#六、任务调度与监控" class="headerlink" title="六、任务调度与监控"></a>六、任务调度与监控</h2><h3 id="定时任务调度"><a href="#定时任务调度" class="headerlink" title="定时任务调度"></a>定时任务调度</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">任务调度系统</span></span><br><span class="line"><span class="string">支持定时执行、条件触发、失败重试等功能</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> schedule</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskScheduler</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, log_file=<span class="string">&quot;scheduler.log&quot;</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.jobs = []</span><br><span class="line">        <span class="variable language_">self</span>.running = <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 配置日志</span></span><br><span class="line">        logging.basicConfig(</span><br><span class="line">            level=logging.INFO,</span><br><span class="line">            <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span>,</span><br><span class="line">            handlers=[</span><br><span class="line">                logging.FileHandler(log_file, encoding=<span class="string">&#x27;utf-8&#x27;</span>),</span><br><span class="line">                logging.StreamHandler()</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.logger = logging.getLogger(__name__)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_daily_job</span>(<span class="params">self, func, time_str, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;添加每日定时任务&quot;&quot;&quot;</span></span><br><span class="line">        job = schedule.every().day.at(time_str).do(<span class="variable language_">self</span>._run_job, func, *args, **kwargs)</span><br><span class="line">        <span class="variable language_">self</span>.jobs.append(&#123;</span><br><span class="line">            <span class="string">&#x27;job&#x27;</span>: job,</span><br><span class="line">            <span class="string">&#x27;func&#x27;</span>: func,</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;daily&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;time&#x27;</span>: time_str,</span><br><span class="line">            <span class="string">&#x27;args&#x27;</span>: args,</span><br><span class="line">            <span class="string">&#x27;kwargs&#x27;</span>: kwargs</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;添加每日任务: <span class="subst">&#123;func.__name__&#125;</span> at <span class="subst">&#123;time_str&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_interval_job</span>(<span class="params">self, func, interval_minutes, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;添加间隔执行任务&quot;&quot;&quot;</span></span><br><span class="line">        job = schedule.every(interval_minutes).minutes.do(<span class="variable language_">self</span>._run_job, func, *args, **kwargs)</span><br><span class="line">        <span class="variable language_">self</span>.jobs.append(&#123;</span><br><span class="line">            <span class="string">&#x27;job&#x27;</span>: job,</span><br><span class="line">            <span class="string">&#x27;func&#x27;</span>: func,</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;interval&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;interval&#x27;</span>: interval_minutes,</span><br><span class="line">            <span class="string">&#x27;args&#x27;</span>: args,</span><br><span class="line">            <span class="string">&#x27;kwargs&#x27;</span>: kwargs</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;添加间隔任务: <span class="subst">&#123;func.__name__&#125;</span> every <span class="subst">&#123;interval_minutes&#125;</span> minutes&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_weekly_job</span>(<span class="params">self, func, day, time_str, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;添加每周定时任务&quot;&quot;&quot;</span></span><br><span class="line">        job = <span class="built_in">getattr</span>(schedule.every(), day.lower()).at(time_str).do(<span class="variable language_">self</span>._run_job, func, *args, **kwargs)</span><br><span class="line">        <span class="variable language_">self</span>.jobs.append(&#123;</span><br><span class="line">            <span class="string">&#x27;job&#x27;</span>: job,</span><br><span class="line">            <span class="string">&#x27;func&#x27;</span>: func,</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;weekly&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;day&#x27;</span>: day,</span><br><span class="line">            <span class="string">&#x27;time&#x27;</span>: time_str,</span><br><span class="line">            <span class="string">&#x27;args&#x27;</span>: args,</span><br><span class="line">            <span class="string">&#x27;kwargs&#x27;</span>: kwargs</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;添加每周任务: <span class="subst">&#123;func.__name__&#125;</span> on <span class="subst">&#123;day&#125;</span> at <span class="subst">&#123;time_str&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_run_job</span>(<span class="params">self, func, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;执行任务（带错误处理）&quot;&quot;&quot;</span></span><br><span class="line">        start_time = datetime.now()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;开始执行任务: <span class="subst">&#123;func.__name__&#125;</span>&quot;</span>)</span><br><span class="line">            result = func(*args, **kwargs)</span><br><span class="line">            end_time = datetime.now()</span><br><span class="line">            duration = (end_time - start_time).total_seconds()</span><br><span class="line">            <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;任务执行成功: <span class="subst">&#123;func.__name__&#125;</span> (耗时: <span class="subst">&#123;duration:<span class="number">.2</span>f&#125;</span>秒)&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            end_time = datetime.now()</span><br><span class="line">            duration = (end_time - start_time).total_seconds()</span><br><span class="line">            <span class="variable language_">self</span>.logger.error(<span class="string">f&quot;任务执行失败: <span class="subst">&#123;func.__name__&#125;</span> (耗时: <span class="subst">&#123;duration:<span class="number">.2</span>f&#125;</span>秒) - <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 发送错误通知</span></span><br><span class="line">            <span class="variable language_">self</span>._send_error_notification(func.__name__, <span class="built_in">str</span>(e))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_send_error_notification</span>(<span class="params">self, task_name, error_message</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;发送错误通知邮件&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 这里可以配置邮件发送</span></span><br><span class="line">        <span class="comment"># 为了简化，这里只记录日志</span></span><br><span class="line">        <span class="variable language_">self</span>.logger.error(<span class="string">f&quot;任务 <span class="subst">&#123;task_name&#125;</span> 执行失败，错误信息: <span class="subst">&#123;error_message&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;启动调度器&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.running = <span class="literal">True</span></span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">&quot;任务调度器启动&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="variable language_">self</span>.running:</span><br><span class="line">            schedule.run_pending()</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">stop</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;停止调度器&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.running = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">&quot;任务调度器停止&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">list_jobs</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;列出所有任务&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.logger.info(<span class="string">&quot;当前任务列表:&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> i, job_info <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="variable language_">self</span>.jobs):</span><br><span class="line">            <span class="variable language_">self</span>.logger.info(<span class="string">f&quot;<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>. <span class="subst">&#123;job_info[<span class="string">&#x27;func&#x27;</span>].__name__&#125;</span> - <span class="subst">&#123;job_info[<span class="string">&#x27;type&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_in_background</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;在后台线程中运行调度器&quot;&quot;&quot;</span></span><br><span class="line">        thread = threading.Thread(target=<span class="variable language_">self</span>.start)</span><br><span class="line">        thread.daemon = <span class="literal">True</span></span><br><span class="line">        thread.start()</span><br><span class="line">        <span class="keyword">return</span> thread</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例任务函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">backup_database</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;数据库备份任务&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行数据库备份...&quot;</span>)</span><br><span class="line">    <span class="comment"># 这里添加实际的备份逻辑</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)  <span class="comment"># 模拟备份过程</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;数据库备份完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_daily_report</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送日报任务&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;生成并发送日报...&quot;</span>)</span><br><span class="line">    <span class="comment"># 这里添加报表生成和发送逻辑</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;日报发送完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cleanup_temp_files</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;清理临时文件任务&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;清理临时文件...&quot;</span>)</span><br><span class="line">    <span class="comment"># 这里添加文件清理逻辑</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;临时文件清理完成&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    scheduler = TaskScheduler()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加任务</span></span><br><span class="line">    scheduler.add_daily_job(backup_database, <span class="string">&quot;02:00&quot;</span>)  <span class="comment"># 每天凌晨2点备份</span></span><br><span class="line">    scheduler.add_daily_job(send_daily_report, <span class="string">&quot;09:00&quot;</span>)  <span class="comment"># 每天上午9点发送日报</span></span><br><span class="line">    scheduler.add_interval_job(cleanup_temp_files, <span class="number">60</span>)  <span class="comment"># 每60分钟清理一次</span></span><br><span class="line">    scheduler.add_weekly_job(backup_database, <span class="string">&quot;sunday&quot;</span>, <span class="string">&quot;01:00&quot;</span>)  <span class="comment"># 每周日凌晨1点备份</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 列出任务</span></span><br><span class="line">    scheduler.list_jobs()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 启动调度器</span></span><br><span class="line">        scheduler.start()</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        scheduler.stop()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;调度器已停止&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="七、系统监控与告警"><a href="#七、系统监控与告警" class="headerlink" title="七、系统监控与告警"></a>七、系统监控与告警</h2><h3 id="系统资源监控"><a href="#系统资源监控" class="headerlink" title="系统资源监控"></a>系统资源监控</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">系统资源监控</span></span><br><span class="line"><span class="string">监控CPU、内存、磁盘、网络等系统资源</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> psutil</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SystemMonitor</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config_file=<span class="string">&quot;monitor_config.json&quot;</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.config = <span class="variable language_">self</span>.load_config(config_file)</span><br><span class="line">        <span class="variable language_">self</span>.alerts_sent = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_config</span>(<span class="params">self, config_file</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;加载监控配置&quot;&quot;&quot;</span></span><br><span class="line">        default_config = &#123;</span><br><span class="line">            <span class="string">&quot;thresholds&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;cpu_percent&quot;</span>: <span class="number">80</span>,</span><br><span class="line">                <span class="string">&quot;memory_percent&quot;</span>: <span class="number">85</span>,</span><br><span class="line">                <span class="string">&quot;disk_percent&quot;</span>: <span class="number">90</span>,</span><br><span class="line">                <span class="string">&quot;network_io_mb&quot;</span>: <span class="number">100</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&quot;check_interval&quot;</span>: <span class="number">60</span>,</span><br><span class="line">            <span class="string">&quot;alert_cooldown&quot;</span>: <span class="number">300</span>,  <span class="comment"># 5分钟内不重复发送同类告警</span></span><br><span class="line">            <span class="string">&quot;email&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;enabled&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;smtp_server&quot;</span>: <span class="string">&quot;smtp.gmail.com&quot;</span>,</span><br><span class="line">                <span class="string">&quot;smtp_port&quot;</span>: <span class="number">587</span>,</span><br><span class="line">                <span class="string">&quot;username&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;to_addresses&quot;</span>: []</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(config_file, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                config = json.load(f)</span><br><span class="line">                <span class="comment"># 合并默认配置</span></span><br><span class="line">                <span class="keyword">for</span> key, value <span class="keyword">in</span> default_config.items():</span><br><span class="line">                    <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> config:</span><br><span class="line">                        config[key] = value</span><br><span class="line">                <span class="keyword">return</span> config</span><br><span class="line">        <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">            <span class="comment"># 创建默认配置文件</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(config_file, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                json.dump(default_config, f, indent=<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> default_config</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_system_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;获取系统信息&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># CPU信息</span></span><br><span class="line">        cpu_percent = psutil.cpu_percent(interval=<span class="number">1</span>)</span><br><span class="line">        cpu_count = psutil.cpu_count()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 内存信息</span></span><br><span class="line">        memory = psutil.virtual_memory()</span><br><span class="line">        memory_percent = memory.percent</span><br><span class="line">        memory_total = memory.total / (<span class="number">1024</span>**<span class="number">3</span>)  <span class="comment"># GB</span></span><br><span class="line">        memory_used = memory.used / (<span class="number">1024</span>**<span class="number">3</span>)   <span class="comment"># GB</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 磁盘信息</span></span><br><span class="line">        disk = psutil.disk_usage(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        disk_percent = disk.percent</span><br><span class="line">        disk_total = disk.total / (<span class="number">1024</span>**<span class="number">3</span>)     <span class="comment"># GB</span></span><br><span class="line">        disk_used = disk.used / (<span class="number">1024</span>**<span class="number">3</span>)       <span class="comment"># GB</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 网络信息</span></span><br><span class="line">        network = psutil.net_io_counters()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().isoformat(),</span><br><span class="line">            <span class="string">&#x27;cpu&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;percent&#x27;</span>: cpu_percent,</span><br><span class="line">                <span class="string">&#x27;count&#x27;</span>: cpu_count</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&#x27;memory&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;percent&#x27;</span>: memory_percent,</span><br><span class="line">                <span class="string">&#x27;total_gb&#x27;</span>: <span class="built_in">round</span>(memory_total, <span class="number">2</span>),</span><br><span class="line">                <span class="string">&#x27;used_gb&#x27;</span>: <span class="built_in">round</span>(memory_used, <span class="number">2</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&#x27;disk&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;percent&#x27;</span>: disk_percent,</span><br><span class="line">                <span class="string">&#x27;total_gb&#x27;</span>: <span class="built_in">round</span>(disk_total, <span class="number">2</span>),</span><br><span class="line">                <span class="string">&#x27;used_gb&#x27;</span>: <span class="built_in">round</span>(disk_used, <span class="number">2</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">&#x27;network&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;bytes_sent&#x27;</span>: network.bytes_sent,</span><br><span class="line">                <span class="string">&#x27;bytes_recv&#x27;</span>: network.bytes_recv</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_thresholds</span>(<span class="params">self, system_info</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;检查阈值并生成告警&quot;&quot;&quot;</span></span><br><span class="line">        alerts = []</span><br><span class="line">        thresholds = <span class="variable language_">self</span>.config[<span class="string">&#x27;thresholds&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># CPU检查</span></span><br><span class="line">        <span class="keyword">if</span> system_info[<span class="string">&#x27;cpu&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>] &gt; thresholds[<span class="string">&#x27;cpu_percent&#x27;</span>]:</span><br><span class="line">            alerts.append(&#123;</span><br><span class="line">                <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;cpu&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;message&#x27;</span>: <span class="string">f&quot;CPU使用率过高: <span class="subst">&#123;system_info[<span class="string">&#x27;cpu&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>%&quot;</span>,</span><br><span class="line">                <span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 内存检查</span></span><br><span class="line">        <span class="keyword">if</span> system_info[<span class="string">&#x27;memory&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>] &gt; thresholds[<span class="string">&#x27;memory_percent&#x27;</span>]:</span><br><span class="line">            alerts.append(&#123;</span><br><span class="line">                <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;memory&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;message&#x27;</span>: <span class="string">f&quot;内存使用率过高: <span class="subst">&#123;system_info[<span class="string">&#x27;memory&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>%&quot;</span>,</span><br><span class="line">                <span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 磁盘检查</span></span><br><span class="line">        <span class="keyword">if</span> system_info[<span class="string">&#x27;disk&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>] &gt; thresholds[<span class="string">&#x27;disk_percent&#x27;</span>]:</span><br><span class="line">            alerts.append(&#123;</span><br><span class="line">                <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;disk&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;message&#x27;</span>: <span class="string">f&quot;磁盘使用率过高: <span class="subst">&#123;system_info[<span class="string">&#x27;disk&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>%&quot;</span>,</span><br><span class="line">                <span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;critical&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> alerts</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_alert</span>(<span class="params">self, alert</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;发送告警&quot;&quot;&quot;</span></span><br><span class="line">        alert_key = <span class="string">f&quot;<span class="subst">&#123;alert[<span class="string">&#x27;type&#x27;</span>]&#125;</span>_<span class="subst">&#123;alert[<span class="string">&#x27;severity&#x27;</span>]&#125;</span>&quot;</span></span><br><span class="line">        current_time = time.time()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 检查告警冷却时间</span></span><br><span class="line">        <span class="keyword">if</span> alert_key <span class="keyword">in</span> <span class="variable language_">self</span>.alerts_sent:</span><br><span class="line">            <span class="keyword">if</span> current_time - <span class="variable language_">self</span>.alerts_sent[alert_key] &lt; <span class="variable language_">self</span>.config[<span class="string">&#x27;alert_cooldown&#x27;</span>]:</span><br><span class="line">                <span class="keyword">return</span>  <span class="comment"># 在冷却时间内，不发送重复告警</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 记录告警发送时间</span></span><br><span class="line">        <span class="variable language_">self</span>.alerts_sent[alert_key] = current_time</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 打印告警（实际应用中可以发送邮件、短信等）</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;datetime.now()&#125;</span>] 告警: <span class="subst">&#123;alert[<span class="string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 如果配置了邮件，发送邮件告警</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;enabled&#x27;</span>]:</span><br><span class="line">            <span class="variable language_">self</span>.send_email_alert(alert)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_email_alert</span>(<span class="params">self, alert</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;发送邮件告警&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            msg = MIMEText(<span class="string">f&quot;系统告警\n\n<span class="subst">&#123;alert[<span class="string">&#x27;message&#x27;</span>]&#125;</span>\n\n时间: <span class="subst">&#123;datetime.now()&#125;</span>&quot;</span>)</span><br><span class="line">            msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">f&quot;系统监控告警 - <span class="subst">&#123;alert[<span class="string">&#x27;type&#x27;</span>].upper()&#125;</span>&quot;</span></span><br><span class="line">            msg[<span class="string">&#x27;From&#x27;</span>] = <span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">            msg[<span class="string">&#x27;To&#x27;</span>] = <span class="string">&#x27;, &#x27;</span>.join(<span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;to_addresses&#x27;</span>])</span><br><span class="line">            </span><br><span class="line">            server = smtplib.SMTP(<span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;smtp_server&#x27;</span>], <span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;smtp_port&#x27;</span>])</span><br><span class="line">            server.starttls()</span><br><span class="line">            server.login(<span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;username&#x27;</span>], <span class="variable language_">self</span>.config[<span class="string">&#x27;email&#x27;</span>][<span class="string">&#x27;password&#x27;</span>])</span><br><span class="line">            server.send_message(msg)</span><br><span class="line">            server.quit()</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;告警邮件已发送: <span class="subst">&#123;alert[<span class="string">&#x27;message&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;邮件发送失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_monitoring</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;运行监控&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;系统监控启动...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                <span class="comment"># 获取系统信息</span></span><br><span class="line">                system_info = <span class="variable language_">self</span>.get_system_info()</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 打印当前状态</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;\n[<span class="subst">&#123;system_info[<span class="string">&#x27;timestamp&#x27;</span>]&#125;</span>]&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;CPU: <span class="subst">&#123;system_info[<span class="string">&#x27;cpu&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>%&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;内存: <span class="subst">&#123;system_info[<span class="string">&#x27;memory&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>% (<span class="subst">&#123;system_info[<span class="string">&#x27;memory&#x27;</span>][<span class="string">&#x27;used_gb&#x27;</span>]:<span class="number">.1</span>f&#125;</span>GB/<span class="subst">&#123;system_info[<span class="string">&#x27;memory&#x27;</span>][<span class="string">&#x27;total_gb&#x27;</span>]:<span class="number">.1</span>f&#125;</span>GB)&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;磁盘: <span class="subst">&#123;system_info[<span class="string">&#x27;disk&#x27;</span>][<span class="string">&#x27;percent&#x27;</span>]:<span class="number">.1</span>f&#125;</span>% (<span class="subst">&#123;system_info[<span class="string">&#x27;disk&#x27;</span>][<span class="string">&#x27;used_gb&#x27;</span>]:<span class="number">.1</span>f&#125;</span>GB/<span class="subst">&#123;system_info[<span class="string">&#x27;disk&#x27;</span>][<span class="string">&#x27;total_gb&#x27;</span>]:<span class="number">.1</span>f&#125;</span>GB)&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 检查告警</span></span><br><span class="line">                alerts = <span class="variable language_">self</span>.check_thresholds(system_info)</span><br><span class="line">                <span class="keyword">for</span> alert <span class="keyword">in</span> alerts:</span><br><span class="line">                    <span class="variable language_">self</span>.send_alert(alert)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># 等待下次检查</span></span><br><span class="line">                time.sleep(<span class="variable language_">self</span>.config[<span class="string">&#x27;check_interval&#x27;</span>])</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n监控已停止&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    monitor = SystemMonitor()</span><br><span class="line">    monitor.run_monitoring()</span><br></pre></td></tr></table></figure>

<h2 id="八、后记与总结"><a href="#八、后记与总结" class="headerlink" title="八、后记与总结"></a>八、后记与总结</h2><ul>
<li><strong>本文核心观点</strong>: Python自动化脚本是提升工作效率的强大工具，通过系统化的学习和实践，可以显著减少重复性工作</li>
<li><strong>值得进一步探讨的问题</strong>: <ul>
<li>如何设计更加健壮和可维护的自动化系统</li>
<li>如何在团队中推广和标准化自动化实践</li>
<li>如何平衡自动化的复杂度和实用性</li>
</ul>
</li>
<li><strong>行动项</strong>: <ul>
<li>✅ 掌握Python自动化的核心技术和常用库</li>
<li>📋 在实际工作中识别和实施自动化机会</li>
<li>📋 建立个人的自动化工具库和最佳实践</li>
<li>📋 持续学习新的自动化技术和工具</li>
</ul>
</li>
</ul>
<h2 id="相关技术文档"><a href="#相关技术文档" class="headerlink" title="相关技术文档"></a>相关技术文档</h2><h3 id="深度学习资源"><a href="#深度学习资源" class="headerlink" title="深度学习资源"></a>深度学习资源</h3><ul>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0%E6%89%A9%E5%B1%95/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python%E9%AB%98%E7%BA%A7.md">Python高级编程技巧</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/CI_CD/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6.md">任务调度系统设计</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%B7%A5%E5%85%B7%E6%89%A9%E5%B1%95/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6.md">系统监控最佳实践</a></li>
</ul>
<h3 id="相关工具链接"><a href="#相关工具链接" class="headerlink" title="相关工具链接"></a>相关工具链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3/">Python官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://pandas.pydata.org/docs/">Pandas数据处理</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python-requests.org/">Requests HTTP库</a></li>
<li><a target="_blank" rel="noopener" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beautiful Soup解析</a></li>
</ul>
<hr>
<p><em>创建于：2025年09月25日 14:30</em><br><em>更新于：2025年09月25日 14:30</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/Python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/" data-id="cmfzn3a7v001dla3iakoj5dcn" data-title="Python自动化脚本实战指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/" rel="tag">任务调度</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/" rel="tag">批处理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">效率工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/" rel="tag">自动化脚本</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-自动化工具/README" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/README/" class="article-date">
  <time class="dt-published" datetime="2025-09-25T14:00:00.000Z" itemprop="datePublished">2025-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a>►<a class="article-category-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/%E5%B7%A5%E5%85%B7%E9%9B%86/">工具集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/README/">自动化工具文章分类说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="🤖-自动化工具文章分类"><a href="#🤖-自动化工具文章分类" class="headerlink" title="🤖 自动化工具文章分类"></a>🤖 自动化工具文章分类</h1><h2 id="📁-分类说明"><a href="#📁-分类说明" class="headerlink" title="📁 分类说明"></a>📁 分类说明</h2><p>本文件夹专门收录各种自动化工具、脚本和工作流优化的相关文章，帮助开发者和技术人员提升工作效率，减少重复性劳动。</p>
<h2 id="🎯-内容范围"><a href="#🎯-内容范围" class="headerlink" title="🎯 内容范围"></a>🎯 内容范围</h2><h3 id="开发自动化"><a href="#开发自动化" class="headerlink" title="开发自动化"></a>开发自动化</h3><ul>
<li><strong>构建自动化</strong>: Make、CMake、Gradle等构建工具的使用</li>
<li><strong>部署自动化</strong>: CI&#x2F;CD流水线、Docker容器化部署</li>
<li><strong>测试自动化</strong>: 单元测试、集成测试、自动化测试框架</li>
<li><strong>代码质量</strong>: 代码检查、格式化、静态分析工具</li>
</ul>
<h3 id="系统运维自动化"><a href="#系统运维自动化" class="headerlink" title="系统运维自动化"></a>系统运维自动化</h3><ul>
<li><strong>服务器管理</strong>: 批量服务器配置、监控告警</li>
<li><strong>备份恢复</strong>: 自动化备份策略、灾难恢复</li>
<li><strong>日志分析</strong>: 日志收集、分析、可视化</li>
<li><strong>性能监控</strong>: 系统性能监控、资源使用分析</li>
</ul>
<h3 id="日常工作自动化"><a href="#日常工作自动化" class="headerlink" title="日常工作自动化"></a>日常工作自动化</h3><ul>
<li><strong>文件处理</strong>: 批量文件操作、格式转换</li>
<li><strong>数据处理</strong>: 数据清洗、转换、导入导出</li>
<li><strong>报表生成</strong>: 自动化报表、数据可视化</li>
<li><strong>通知提醒</strong>: 自动化通知、任务提醒系统</li>
</ul>
<h3 id="开发工具自动化"><a href="#开发工具自动化" class="headerlink" title="开发工具自动化"></a>开发工具自动化</h3><ul>
<li><strong>环境配置</strong>: 开发环境自动化搭建</li>
<li><strong>依赖管理</strong>: 包管理、版本控制自动化</li>
<li><strong>文档生成</strong>: API文档、技术文档自动生成</li>
<li><strong>代码生成</strong>: 模板代码、脚手架工具</li>
</ul>
<h2 id="🛠️-技术栈覆盖"><a href="#🛠️-技术栈覆盖" class="headerlink" title="🛠️ 技术栈覆盖"></a>🛠️ 技术栈覆盖</h2><h3 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h3><ul>
<li><strong>Shell脚本</strong>: Bash、PowerShell、Zsh</li>
<li><strong>Python自动化</strong>: 系统管理、数据处理、Web自动化</li>
<li><strong>Node.js工具</strong>: 前端构建、任务调度</li>
<li><strong>Go工具</strong>: 高性能CLI工具、系统工具</li>
</ul>
<h3 id="自动化平台"><a href="#自动化平台" class="headerlink" title="自动化平台"></a>自动化平台</h3><ul>
<li><strong>GitHub Actions</strong>: 代码仓库自动化</li>
<li><strong>Jenkins</strong>: 企业级CI&#x2F;CD平台</li>
<li><strong>GitLab CI</strong>: 集成的DevOps平台</li>
<li><strong>Azure DevOps</strong>: 微软云端自动化</li>
</ul>
<h3 id="容器化与编排"><a href="#容器化与编排" class="headerlink" title="容器化与编排"></a>容器化与编排</h3><ul>
<li><strong>Docker</strong>: 容器化部署自动化</li>
<li><strong>Kubernetes</strong>: 容器编排和管理</li>
<li><strong>Docker Compose</strong>: 多容器应用编排</li>
<li><strong>Helm</strong>: Kubernetes包管理</li>
</ul>
<h2 id="📚-文章类型"><a href="#📚-文章类型" class="headerlink" title="📚 文章类型"></a>📚 文章类型</h2><h3 id="教程指南"><a href="#教程指南" class="headerlink" title="教程指南"></a>教程指南</h3><ul>
<li>从零开始的完整安装配置教程</li>
<li>实际项目中的应用案例分析</li>
<li>最佳实践和经验分享</li>
<li>常见问题和故障排查</li>
</ul>
<h3 id="工具评测"><a href="#工具评测" class="headerlink" title="工具评测"></a>工具评测</h3><ul>
<li>不同自动化工具的对比分析</li>
<li>性能测试和使用体验</li>
<li>适用场景和选择建议</li>
<li>成本效益分析</li>
</ul>
<h3 id="实战案例"><a href="#实战案例" class="headerlink" title="实战案例"></a>实战案例</h3><ul>
<li>真实项目的自动化改造</li>
<li>效率提升的量化分析</li>
<li>团队协作的自动化实践</li>
<li>企业级自动化解决方案</li>
</ul>
<h2 id="🎯-目标读者"><a href="#🎯-目标读者" class="headerlink" title="🎯 目标读者"></a>🎯 目标读者</h2><h3 id="开发工程师"><a href="#开发工程师" class="headerlink" title="开发工程师"></a>开发工程师</h3><ul>
<li>希望提升开发效率的程序员</li>
<li>需要自动化构建和部署的团队</li>
<li>想要减少重复工作的开发者</li>
</ul>
<h3 id="运维工程师"><a href="#运维工程师" class="headerlink" title="运维工程师"></a>运维工程师</h3><ul>
<li>系统管理员和运维人员</li>
<li>DevOps工程师和SRE</li>
<li>需要大规模系统管理的技术人员</li>
</ul>
<h3 id="技术管理者"><a href="#技术管理者" class="headerlink" title="技术管理者"></a>技术管理者</h3><ul>
<li>技术团队负责人</li>
<li>项目经理和产品经理</li>
<li>关注团队效率提升的管理者</li>
</ul>
<h2 id="🚀-价值主张"><a href="#🚀-价值主张" class="headerlink" title="🚀 价值主张"></a>🚀 价值主张</h2><h3 id="效率提升"><a href="#效率提升" class="headerlink" title="效率提升"></a>效率提升</h3><ul>
<li><strong>时间节省</strong>: 自动化重复性任务，释放人力资源</li>
<li><strong>错误减少</strong>: 减少人为操作失误，提高工作质量</li>
<li><strong>标准化</strong>: 建立统一的工作流程和操作规范</li>
</ul>
<h3 id="成本优化"><a href="#成本优化" class="headerlink" title="成本优化"></a>成本优化</h3><ul>
<li><strong>人力成本</strong>: 减少人工操作，降低人力成本</li>
<li><strong>时间成本</strong>: 加快交付速度，缩短项目周期</li>
<li><strong>维护成本</strong>: 提高系统稳定性，降低维护成本</li>
</ul>
<h3 id="质量保证"><a href="#质量保证" class="headerlink" title="质量保证"></a>质量保证</h3><ul>
<li><strong>一致性</strong>: 确保每次操作的一致性和可重复性</li>
<li><strong>可追溯</strong>: 完整的操作日志和审计跟踪</li>
<li><strong>可靠性</strong>: 提高系统和流程的可靠性</li>
</ul>
<h2 id="📖-学习路径"><a href="#📖-学习路径" class="headerlink" title="📖 学习路径"></a>📖 学习路径</h2><h3 id="入门级"><a href="#入门级" class="headerlink" title="入门级"></a>入门级</h3><ol>
<li><strong>基础脚本编写</strong>: 学习Shell、Python基础脚本</li>
<li><strong>简单自动化</strong>: 文件操作、数据处理自动化</li>
<li><strong>工具使用</strong>: 掌握常用自动化工具的基本用法</li>
</ol>
<h3 id="进阶级"><a href="#进阶级" class="headerlink" title="进阶级"></a>进阶级</h3><ol>
<li><strong>CI&#x2F;CD实践</strong>: 搭建完整的持续集成流水线</li>
<li><strong>容器化部署</strong>: 使用Docker和Kubernetes</li>
<li><strong>监控告警</strong>: 建立完善的监控和告警体系</li>
</ol>
<h3 id="专家级"><a href="#专家级" class="headerlink" title="专家级"></a>专家级</h3><ol>
<li><strong>架构设计</strong>: 设计企业级自动化架构</li>
<li><strong>工具开发</strong>: 开发自定义的自动化工具</li>
<li><strong>团队推广</strong>: 在团队中推广自动化文化</li>
</ol>
<h2 id="🔗-相关资源"><a href="#🔗-相关资源" class="headerlink" title="🔗 相关资源"></a>🔗 相关资源</h2><h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/en/actions">GitHub Actions文档</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/">Docker官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/">Kubernetes文档</a></li>
</ul>
<h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><ul>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/CI_CD/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95.md">自动化测试最佳实践</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/CI_CD/Docker%E5%AE%9E%E8%B7%B5.md">Docker容器化实践</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%B7%A5%E5%85%B7%E6%89%A9%E5%B1%95/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/Shell%E7%BC%96%E7%A8%8B.md">Shell脚本编程指南</a></li>
</ul>
<h2 id="📝-贡献指南"><a href="#📝-贡献指南" class="headerlink" title="📝 贡献指南"></a>📝 贡献指南</h2><h3 id="文章标准"><a href="#文章标准" class="headerlink" title="文章标准"></a>文章标准</h3><ul>
<li><strong>实用性</strong>: 提供可直接使用的解决方案</li>
<li><strong>完整性</strong>: 包含完整的操作步骤和配置</li>
<li><strong>准确性</strong>: 所有代码和配置经过验证</li>
<li><strong>时效性</strong>: 保持内容的最新性</li>
</ul>
<h3 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h3><ul>
<li>使用清晰描述性的文件名</li>
<li>包含技术栈和应用场景</li>
<li>遵循统一的命名格式</li>
</ul>
<h3 id="内容结构"><a href="#内容结构" class="headerlink" title="内容结构"></a>内容结构</h3><ul>
<li>明确的问题描述和解决方案</li>
<li>详细的步骤说明和代码示例</li>
<li>常见问题和故障排查</li>
<li>相关资源和扩展阅读</li>
</ul>
<hr>
<p><em>本分类将持续更新，欢迎贡献优质的自动化相关内容！</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/25/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/README/" data-id="cmfzn3a7w001hla3iaa8oejrc" data-title="自动化工具文章分类说明" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81%E4%BC%98%E5%8C%96/" rel="tag">工作流优化</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">效率工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" rel="tag">脚本编程</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="tag">自动化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-目标/Go与Python学习计划优化版" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/25/%E7%9B%AE%E6%A0%87/Go%E4%B8%8EPython%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92%E4%BC%98%E5%8C%96%E7%89%88/" class="article-date">
  <time class="dt-published" datetime="2025-09-25T13:00:00.000Z" itemprop="datePublished">2025-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>►<a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/25/%E7%9B%AE%E6%A0%87/Go%E4%B8%8EPython%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92%E4%BC%98%E5%8C%96%E7%89%88/">Go与Python学习计划优化版</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="一、学习目标与规划概述"><a href="#一、学习目标与规划概述" class="headerlink" title="一、学习目标与规划概述"></a>一、学习目标与规划概述</h2><h3 id="核心学习目标"><a href="#核心学习目标" class="headerlink" title="核心学习目标"></a>核心学习目标</h3><ul>
<li><strong>Go语言进阶</strong>: 从基础语法到高级特性，掌握现代Go开发实践</li>
<li><strong>Python深度应用</strong>: 数据科学、Web开发、自动化脚本等实用技能</li>
<li><strong>项目驱动学习</strong>: 通过实际项目巩固理论知识</li>
<li><strong>技术栈整合</strong>: 建立完整的后端开发技能体系</li>
</ul>
<h3 id="学习方法论"><a href="#学习方法论" class="headerlink" title="学习方法论"></a>学习方法论</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">理论学习 → 实践练习 → 项目应用 → 总结反思</span><br><span class="line">   ↓         ↓         ↓         ↓</span><br><span class="line"> 概念理解   代码实现   真实场景   经验积累</span><br></pre></td></tr></table></figure>

<h3 id="时间规划"><a href="#时间规划" class="headerlink" title="时间规划"></a>时间规划</h3><ul>
<li><strong>总学习周期</strong>: 6个月</li>
<li><strong>每周学习时间</strong>: 15-20小时</li>
<li><strong>项目实践比例</strong>: 60%理论 + 40%实践</li>
</ul>
<h2 id="二、Go语言进阶学习计划"><a href="#二、Go语言进阶学习计划" class="headerlink" title="二、Go语言进阶学习计划"></a>二、Go语言进阶学习计划</h2><h3 id="阶段一：基础巩固与查漏补缺（2周）"><a href="#阶段一：基础巩固与查漏补缺（2周）" class="headerlink" title="阶段一：基础巩固与查漏补缺（2周）"></a>阶段一：基础巩固与查漏补缺（2周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>重点关注</th>
<th>实践项目</th>
<th>验收标准</th>
</tr>
</thead>
<tbody><tr>
<td><strong>环境升级</strong></td>
<td>Go 1.22+新特性、工具链</td>
<td>2天</td>
<td>新版本特性</td>
<td>环境配置文档</td>
<td>成功运行新特性代码</td>
</tr>
<tr>
<td><strong>语法回顾</strong></td>
<td>基础语法、数据类型、控制结构</td>
<td>3天</td>
<td>查漏补缺</td>
<td>命令行工具开发</td>
<td>完成CLI工具</td>
</tr>
<tr>
<td><strong>并发编程</strong></td>
<td>Goroutine、Channel、Select</td>
<td>5天</td>
<td><strong>核心特性</strong></td>
<td>并发下载器</td>
<td>实现高并发下载</td>
</tr>
<tr>
<td><strong>标准库</strong></td>
<td>io、net、http、json等</td>
<td>4天</td>
<td>常用包掌握</td>
<td>HTTP服务器</td>
<td>构建完整API</td>
</tr>
</tbody></table>
<p><strong>阶段目标</strong>: 巩固Go基础，熟练使用并发特性</p>
<h3 id="阶段二：Web开发与框架应用（3周）"><a href="#阶段二：Web开发与框架应用（3周）" class="headerlink" title="阶段二：Web开发与框架应用（3周）"></a>阶段二：Web开发与框架应用（3周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心价值</th>
<th>实践项目</th>
<th>技术要点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>HTTP基础</strong></td>
<td>net&#x2F;http包、路由、中间件</td>
<td>1周</td>
<td>原生开发</td>
<td>简单Web服务</td>
<td>理解HTTP协议</td>
</tr>
<tr>
<td><strong>Gin框架</strong></td>
<td>路由、中间件、模板、JSON</td>
<td>1周</td>
<td><strong>实用框架</strong></td>
<td>RESTful API</td>
<td>快速开发能力</td>
</tr>
<tr>
<td><strong>数据库集成</strong></td>
<td>GORM、MySQL、事务处理</td>
<td>1周</td>
<td>数据持久化</td>
<td>用户管理系统</td>
<td>ORM使用技巧</td>
</tr>
</tbody></table>
<p><strong>实战项目</strong>: 博客管理系统</p>
<ul>
<li>用户注册登录</li>
<li>文章CRUD操作</li>
<li>评论系统</li>
<li>权限管理</li>
</ul>
<h3 id="阶段三：微服务与高级特性（4周）"><a href="#阶段三：微服务与高级特性（4周）" class="headerlink" title="阶段三：微服务与高级特性（4周）"></a>阶段三：微服务与高级特性（4周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心价值</th>
<th>实践项目</th>
<th>技术深度</th>
</tr>
</thead>
<tbody><tr>
<td><strong>gRPC</strong></td>
<td>Protocol Buffers、服务定义</td>
<td>1周</td>
<td><strong>微服务通信</strong></td>
<td>RPC服务</td>
<td>高性能通信</td>
</tr>
<tr>
<td><strong>微服务架构</strong></td>
<td>服务发现、负载均衡、熔断</td>
<td>2周</td>
<td>架构设计</td>
<td>分布式系统</td>
<td>系统设计能力</td>
</tr>
<tr>
<td><strong>性能优化</strong></td>
<td>内存管理、性能分析、调优</td>
<td>1周</td>
<td>工程实践</td>
<td>性能监控工具</td>
<td>生产环境优化</td>
</tr>
</tbody></table>
<p><strong>实战项目</strong>: 微服务电商系统</p>
<ul>
<li>用户服务</li>
<li>商品服务</li>
<li>订单服务</li>
<li>支付服务</li>
</ul>
<h3 id="阶段四：专家级进阶（持续学习）"><a href="#阶段四：专家级进阶（持续学习）" class="headerlink" title="阶段四：专家级进阶（持续学习）"></a>阶段四：专家级进阶（持续学习）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心价值</th>
<th>实践项目</th>
<th>成长目标</th>
</tr>
</thead>
<tbody><tr>
<td><strong>源码阅读</strong></td>
<td>Go运行时、标准库源码</td>
<td>4周</td>
<td><strong>深度理解</strong></td>
<td>源码分析文档</td>
<td>理解底层原理</td>
</tr>
<tr>
<td><strong>工具开发</strong></td>
<td>编译器插件、代码生成</td>
<td>3周</td>
<td>工具链扩展</td>
<td>自定义工具</td>
<td>提升开发效率</td>
</tr>
<tr>
<td><strong>开源贡献</strong></td>
<td>参与Go社区项目</td>
<td>持续</td>
<td>社区影响力</td>
<td>开源项目</td>
<td>技术影响力</td>
</tr>
</tbody></table>
<h2 id="三、Python全栈学习计划"><a href="#三、Python全栈学习计划" class="headerlink" title="三、Python全栈学习计划"></a>三、Python全栈学习计划</h2><h3 id="阶段一：语法进阶与生态了解（2周）"><a href="#阶段一：语法进阶与生态了解（2周）" class="headerlink" title="阶段一：语法进阶与生态了解（2周）"></a>阶段一：语法进阶与生态了解（2周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>重点关注</th>
<th>实践项目</th>
<th>掌握程度</th>
</tr>
</thead>
<tbody><tr>
<td><strong>语法进阶</strong></td>
<td>装饰器、生成器、元类</td>
<td>1周</td>
<td><strong>高级特性</strong></td>
<td>框架设计</td>
<td>熟练运用</td>
</tr>
<tr>
<td><strong>标准库</strong></td>
<td>collections、itertools、functools</td>
<td>3天</td>
<td>内置工具</td>
<td>数据处理脚本</td>
<td>常用库掌握</td>
</tr>
<tr>
<td><strong>包管理</strong></td>
<td>pip、poetry、虚拟环境</td>
<td>4天</td>
<td>环境管理</td>
<td>项目模板</td>
<td>规范化开发</td>
</tr>
</tbody></table>
<h3 id="阶段二：Web开发专精（4周）"><a href="#阶段二：Web开发专精（4周）" class="headerlink" title="阶段二：Web开发专精（4周）"></a>阶段二：Web开发专精（4周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心技能</th>
<th>实践项目</th>
<th>技术栈</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Django框架</strong></td>
<td>MTV模式、ORM、Admin</td>
<td>2周</td>
<td><strong>全栈开发</strong></td>
<td>内容管理系统</td>
<td>企业级开发</td>
</tr>
<tr>
<td><strong>FastAPI</strong></td>
<td>异步编程、API文档、验证</td>
<td>1周</td>
<td>现代API</td>
<td>高性能API服务</td>
<td>异步编程</td>
</tr>
<tr>
<td><strong>前端集成</strong></td>
<td>Jinja2、Bootstrap、AJAX</td>
<td>1周</td>
<td>全栈能力</td>
<td>完整Web应用</td>
<td>前后端协作</td>
</tr>
</tbody></table>
<p><strong>实战项目</strong>: 在线学习平台</p>
<ul>
<li>用户管理系统</li>
<li>课程管理</li>
<li>视频播放</li>
<li>进度跟踪</li>
<li>支付集成</li>
</ul>
<h3 id="阶段三：数据科学与AI应用（3周）"><a href="#阶段三：数据科学与AI应用（3周）" class="headerlink" title="阶段三：数据科学与AI应用（3周）"></a>阶段三：数据科学与AI应用（3周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心技能</th>
<th>实践项目</th>
<th>应用领域</th>
</tr>
</thead>
<tbody><tr>
<td><strong>数据处理</strong></td>
<td>NumPy、Pandas、数据清洗</td>
<td>1周</td>
<td>数据分析</td>
<td>数据分析报告</td>
<td>商业智能</td>
</tr>
<tr>
<td><strong>数据可视化</strong></td>
<td>Matplotlib、Seaborn、Plotly</td>
<td>1周</td>
<td>可视化</td>
<td>交互式图表</td>
<td>数据展示</td>
</tr>
<tr>
<td><strong>机器学习</strong></td>
<td>Scikit-learn、模型训练</td>
<td>1周</td>
<td>AI应用</td>
<td>预测模型</td>
<td>智能应用</td>
</tr>
</tbody></table>
<p><strong>实战项目</strong>: 数据分析平台</p>
<ul>
<li>数据导入清洗</li>
<li>统计分析</li>
<li>可视化展示</li>
<li>预测建模</li>
</ul>
<h3 id="阶段四：自动化与运维（2周）"><a href="#阶段四：自动化与运维（2周）" class="headerlink" title="阶段四：自动化与运维（2周）"></a>阶段四：自动化与运维（2周）</h3><table>
<thead>
<tr>
<th>模块</th>
<th>学习内容</th>
<th>时间安排</th>
<th>核心技能</th>
<th>实践项目</th>
<th>效率提升</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Web自动化</strong></td>
<td>Selenium、requests、爬虫</td>
<td>1周</td>
<td>自动化测试</td>
<td>自动化测试套件</td>
<td>测试效率</td>
</tr>
<tr>
<td><strong>系统运维</strong></td>
<td>脚本编写、任务调度、监控</td>
<td>1周</td>
<td>运维自动化</td>
<td>监控告警系统</td>
<td>运维效率</td>
</tr>
</tbody></table>
<h2 id="四、项目实战规划"><a href="#四、项目实战规划" class="headerlink" title="四、项目实战规划"></a>四、项目实战规划</h2><h3 id="Go项目实战路线"><a href="#Go项目实战路线" class="headerlink" title="Go项目实战路线"></a>Go项目实战路线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">命令行工具 → HTTP服务 → Web应用 → 微服务系统</span><br><span class="line">    ↓           ↓         ↓          ↓</span><br><span class="line">  基础练习    API开发   全栈开发   架构设计</span><br></pre></td></tr></table></figure>

<p><strong>项目1: 文件管理工具</strong></p>
<ul>
<li>功能：文件搜索、批量重命名、格式转换</li>
<li>技术：CLI、文件操作、并发处理</li>
<li>周期：1周</li>
</ul>
<p><strong>项目2: API网关</strong></p>
<ul>
<li>功能：路由转发、负载均衡、限流熔断</li>
<li>技术：HTTP、中间件、微服务</li>
<li>周期：2周</li>
</ul>
<p><strong>项目3: 分布式任务调度系统</strong></p>
<ul>
<li>功能：任务分发、状态监控、故障恢复</li>
<li>技术：gRPC、分布式、消息队列</li>
<li>周期：3周</li>
</ul>
<h3 id="Python项目实战路线"><a href="#Python项目实战路线" class="headerlink" title="Python项目实战路线"></a>Python项目实战路线</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据处理脚本 → Web应用 → 数据分析平台 → AI应用</span><br><span class="line">      ↓          ↓         ↓           ↓</span><br><span class="line">    自动化     全栈开发   数据科学    机器学习</span><br></pre></td></tr></table></figure>

<p><strong>项目1: 自动化运维工具</strong></p>
<ul>
<li>功能：服务器监控、日志分析、告警通知</li>
<li>技术：系统编程、网络编程、数据处理</li>
<li>周期：1周</li>
</ul>
<p><strong>项目2: 内容管理系统</strong></p>
<ul>
<li>功能：用户管理、内容发布、权限控制</li>
<li>技术：Django、数据库、前端集成</li>
<li>周期：2周</li>
</ul>
<p><strong>项目3: 智能推荐系统</strong></p>
<ul>
<li>功能：用户画像、内容推荐、效果分析</li>
<li>技术：机器学习、数据挖掘、算法优化</li>
<li>周期：3周</li>
</ul>
<h2 id="五、学习资源与工具"><a href="#五、学习资源与工具" class="headerlink" title="五、学习资源与工具"></a>五、学习资源与工具</h2><h3 id="在线资源"><a href="#在线资源" class="headerlink" title="在线资源"></a>在线资源</h3><ul>
<li><strong>Go官方文档</strong>: <a target="_blank" rel="noopener" href="https://golang.org/doc/">https://golang.org/doc/</a></li>
<li><strong>Go by Example</strong>: <a target="_blank" rel="noopener" href="https://gobyexample.com/">https://gobyexample.com/</a></li>
<li><strong>Python官方教程</strong>: <a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/">https://docs.python.org/3/tutorial/</a></li>
<li><strong>Real Python</strong>: <a target="_blank" rel="noopener" href="https://realpython.com/">https://realpython.com/</a></li>
</ul>
<h3 id="推荐书籍"><a href="#推荐书籍" class="headerlink" title="推荐书籍"></a>推荐书籍</h3><ul>
<li><strong>Go语言</strong>: 《Go语言实战》、《Go语言高级编程》</li>
<li><strong>Python</strong>: 《流畅的Python》、《Python Tricks》</li>
<li><strong>架构设计</strong>: 《微服务设计》、《分布式系统概念与设计》</li>
</ul>
<h3 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h3><ul>
<li><strong>IDE</strong>: VS Code、GoLand、PyCharm</li>
<li><strong>版本控制</strong>: Git、GitHub</li>
<li><strong>容器化</strong>: Docker、Docker Compose</li>
<li><strong>监控</strong>: Prometheus、Grafana</li>
</ul>
<h2 id="六、学习进度跟踪"><a href="#六、学习进度跟踪" class="headerlink" title="六、学习进度跟踪"></a>六、学习进度跟踪</h2><h3 id="每周检查点"><a href="#每周检查点" class="headerlink" title="每周检查点"></a>每周检查点</h3><ul>
<li><strong>周一</strong>: 制定本周学习计划</li>
<li><strong>周三</strong>: 中期进度检查和调整</li>
<li><strong>周五</strong>: 周总结和下周规划</li>
<li><strong>周日</strong>: 项目实践和代码review</li>
</ul>
<h3 id="月度里程碑"><a href="#月度里程碑" class="headerlink" title="月度里程碑"></a>月度里程碑</h3><ul>
<li><strong>第1月</strong>: Go基础巩固 + Python语法进阶</li>
<li><strong>第2月</strong>: Go Web开发 + Python Web框架</li>
<li><strong>第3月</strong>: Go微服务 + Python数据科学</li>
<li><strong>第4月</strong>: 项目实战和技术整合</li>
<li><strong>第5月</strong>: 性能优化和架构设计</li>
<li><strong>第6月</strong>: 开源贡献和技术分享</li>
</ul>
<h3 id="评估标准"><a href="#评估标准" class="headerlink" title="评估标准"></a>评估标准</h3><ul>
<li><strong>理论掌握</strong>: 能够解释核心概念和原理</li>
<li><strong>实践能力</strong>: 能够独立完成项目开发</li>
<li><strong>问题解决</strong>: 能够调试和优化代码</li>
<li><strong>技术视野</strong>: 了解技术发展趋势</li>
</ul>
<h2 id="七、后记与反思"><a href="#七、后记与反思" class="headerlink" title="七、后记与反思"></a>七、后记与反思</h2><ul>
<li><strong>本文核心观点</strong>: 基于已有Go基础，采用项目驱动的学习方式，同时深入Go进阶特性和Python全栈开发，建立完整的后端技术栈</li>
<li><strong>值得进一步探讨的问题</strong>: <ul>
<li>如何在学习过程中保持技术热情和持续动力</li>
<li>如何平衡理论学习和实践项目的时间分配</li>
<li>如何建立个人技术品牌和影响力</li>
</ul>
</li>
<li><strong>行动项</strong>: <ul>
<li>✅ 制定详细的学习计划和时间安排</li>
<li>📋 开始第一个Go进阶项目的开发</li>
<li>📋 建立学习笔记和技术博客</li>
<li>📋 参与开源项目和技术社区</li>
</ul>
</li>
</ul>
<h2 id="相关学习资源"><a href="#相关学习资源" class="headerlink" title="相关学习资源"></a>相关学习资源</h2><h3 id="扩展文档"><a href="#扩展文档" class="headerlink" title="扩展文档"></a>扩展文档</h3><ul>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0%E6%89%A9%E5%B1%95/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97.md">Go语言进阶指南</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0%E6%89%A9%E5%B1%95/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python%E5%85%A8%E6%A0%88.md">Python全栈开发路线</a></li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0%E6%89%A9%E5%B1%95/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C.md">项目实战经验总结</a></li>
</ul>
<h3 id="原始计划对照"><a href="#原始计划对照" class="headerlink" title="原始计划对照"></a>原始计划对照</h3><ul>
<li><a href="./%E7%9B%AE%E6%A0%871.md">原始Go与Python学习计划</a> - 基础版本的学习计划表</li>
</ul>
<hr>
<p><em>创建于：2025年09月25日 13:00</em><br><em>更新于：2025年09月25日 13:00</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/25/%E7%9B%AE%E6%A0%87/Go%E4%B8%8EPython%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92%E4%BC%98%E5%8C%96%E7%89%88/" data-id="cmfzn3a7r0010la3icjqd3g5w" data-title="Go与Python学习计划优化版" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/" rel="tag">Go</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="tag">学习计划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E8%83%BD%E6%8F%90%E5%8D%87/" rel="tag">技能提升</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="tag">项目实战</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-常用/node" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/25/%E5%B8%B8%E7%94%A8/node/" class="article-date">
  <time class="dt-published" datetime="2025-09-25T01:51:25.000Z" itemprop="datePublished">2025-09-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/25/%E5%B8%B8%E7%94%A8/node/">Node.js开发环境配置与包管理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="一、Node-js环境管理"><a href="#一、Node-js环境管理" class="headerlink" title="一、Node.js环境管理"></a>一、Node.js环境管理</h2><h3 id="版本管理工具"><a href="#版本管理工具" class="headerlink" title="版本管理工具"></a>版本管理工具</h3><p><strong>使用nvm管理Node.js版本：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows (nvm-windows)</span></span><br><span class="line">nvm list available     <span class="comment"># 查看可用版本</span></span><br><span class="line">nvm install 18.17.0    <span class="comment"># 安装指定版本</span></span><br><span class="line">nvm use 18.17.0        <span class="comment"># 切换到指定版本</span></span><br><span class="line">nvm list               <span class="comment"># 查看已安装版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># macOS/Linux</span></span><br><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash</span><br><span class="line">nvm install --lts     <span class="comment"># 安装最新LTS版本</span></span><br><span class="line">nvm <span class="built_in">alias</span> default 18  <span class="comment"># 设置默认版本</span></span><br></pre></td></tr></table></figure>

<h3 id="环境验证"><a href="#环境验证" class="headerlink" title="环境验证"></a>环境验证</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node -v    <span class="comment"># 查看Node.js版本</span></span><br><span class="line">npm -v     <span class="comment"># 查看npm版本</span></span><br><span class="line"><span class="built_in">which</span> node <span class="comment"># 查看Node.js安装路径</span></span><br></pre></td></tr></table></figure>

<h2 id="二、包管理器配置"><a href="#二、包管理器配置" class="headerlink" title="二、包管理器配置"></a>二、包管理器配置</h2><h3 id="npm配置优化"><a href="#npm配置优化" class="headerlink" title="npm配置优化"></a>npm配置优化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/  <span class="comment"># 设置淘宝镜像</span></span><br><span class="line">npm config <span class="built_in">set</span> cache ~/.npm                             <span class="comment"># 设置缓存目录</span></span><br><span class="line">npm config <span class="built_in">set</span> prefix ~/.npm-global                     <span class="comment"># 设置全局包安装目录</span></span><br><span class="line">npm config list                                         <span class="comment"># 查看所有配置</span></span><br></pre></td></tr></table></figure>

<h3 id="yarn包管理器"><a href="#yarn包管理器" class="headerlink" title="yarn包管理器"></a>yarn包管理器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yarn                    <span class="comment"># 全局安装yarn</span></span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com/  <span class="comment"># 设置镜像源</span></span><br><span class="line">yarn install --ignore-engines         <span class="comment"># 忽略引擎版本检查，强制安装依赖</span></span><br><span class="line">yarn install --frozen-lockfile        <span class="comment"># 严格按照lockfile安装</span></span><br></pre></td></tr></table></figure>

<h3 id="pnpm高性能包管理器"><a href="#pnpm高性能包管理器" class="headerlink" title="pnpm高性能包管理器"></a>pnpm高性能包管理器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pnpm                    <span class="comment"># 安装pnpm</span></span><br><span class="line">pnpm config <span class="built_in">set</span> registry https://registry.npmmirror.com/  <span class="comment"># 设置镜像源</span></span><br><span class="line">pnpm install                          <span class="comment"># 安装依赖（节省磁盘空间）</span></span><br><span class="line">pnpm install --frozen-lockfile       <span class="comment"># 严格模式安装</span></span><br></pre></td></tr></table></figure>

<h2 id="三、依赖管理最佳实践"><a href="#三、依赖管理最佳实践" class="headerlink" title="三、依赖管理最佳实践"></a>三、依赖管理最佳实践</h2><h3 id="解决依赖冲突"><a href="#解决依赖冲突" class="headerlink" title="解决依赖冲突"></a>解决依赖冲突</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清理缓存和重新安装</span></span><br><span class="line">npm cache clean --force               <span class="comment"># 清理npm缓存</span></span><br><span class="line"><span class="built_in">rm</span> -rf node_modules package-lock.json <span class="comment"># 删除依赖和锁文件</span></span><br><span class="line">npm install                           <span class="comment"># 重新安装</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># yarn清理</span></span><br><span class="line">yarn cache clean                      <span class="comment"># 清理yarn缓存</span></span><br><span class="line"><span class="built_in">rm</span> -rf node_modules yarn.lock         <span class="comment"># 删除依赖和锁文件</span></span><br><span class="line">yarn install                          <span class="comment"># 重新安装</span></span><br></pre></td></tr></table></figure>

<h3 id="版本锁定策略"><a href="#版本锁定策略" class="headerlink" title="版本锁定策略"></a>版本锁定策略</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm ci                                <span class="comment"># 基于package-lock.json安装（CI环境推荐）</span></span><br><span class="line">npm install --save-exact package-name <span class="comment"># 安装精确版本</span></span><br><span class="line">npm shrinkwrap                        <span class="comment"># 生成npm-shrinkwrap.json锁定版本</span></span><br></pre></td></tr></table></figure>

<h2 id="四、常见问题解决方案"><a href="#四、常见问题解决方案" class="headerlink" title="四、常见问题解决方案"></a>四、常见问题解决方案</h2><h3 id="引擎版本不兼容"><a href="#引擎版本不兼容" class="headerlink" title="引擎版本不兼容"></a>引擎版本不兼容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn install --ignore-engines         <span class="comment"># 忽略Node.js版本检查</span></span><br><span class="line">npm install --force                   <span class="comment"># 强制安装（谨慎使用）</span></span><br><span class="line">npm config <span class="built_in">set</span> engine-strict <span class="literal">false</span>    <span class="comment"># 全局关闭引擎检查</span></span><br></pre></td></tr></table></figure>


<hr>
<h3 id="权限问题解决"><a href="#权限问题解决" class="headerlink" title="权限问题解决"></a>权限问题解决</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># macOS/Linux全局包权限问题</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R $(<span class="built_in">whoami</span>) ~/.npm-global  <span class="comment"># 修改全局目录权限</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=~/.npm-global/bin:$PATH&#x27;</span> &gt;&gt; ~/.bashrc  <span class="comment"># 添加到PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows权限问题</span></span><br><span class="line">npm config <span class="built_in">set</span> prefix %APPDATA%\npm    <span class="comment"># 设置用户级全局目录</span></span><br></pre></td></tr></table></figure>

<h3 id="网络问题排查"><a href="#网络问题排查" class="headerlink" title="网络问题排查"></a>网络问题排查</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry                <span class="comment"># 检查当前镜像源</span></span><br><span class="line">npm config <span class="built_in">set</span> proxy http://proxy:port <span class="comment"># 设置代理（如需要）</span></span><br><span class="line">npm config delete proxy               <span class="comment"># 删除代理设置</span></span><br><span class="line">npm ping                              <span class="comment"># 测试npm服务连通性</span></span><br></pre></td></tr></table></figure>

<h2 id="五、开发环境优化"><a href="#五、开发环境优化" class="headerlink" title="五、开发环境优化"></a>五、开发环境优化</h2><h3 id="项目初始化模板"><a href="#项目初始化模板" class="headerlink" title="项目初始化模板"></a>项目初始化模板</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm init -y                           <span class="comment"># 快速初始化package.json</span></span><br><span class="line">npm init @vitejs/app my-project       <span class="comment"># 使用Vite模板创建项目</span></span><br><span class="line">npx create-react-app my-app           <span class="comment"># 创建React应用</span></span><br><span class="line">npx create-next-app my-next-app       <span class="comment"># 创建Next.js应用</span></span><br></pre></td></tr></table></figure>

<h3 id="脚本命令配置"><a href="#脚本命令配置" class="headerlink" title="脚本命令配置"></a>脚本命令配置</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .js,.jsx,.ts,.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rm -rf node_modules package-lock.json &amp;&amp; npm install&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="六、速查表"><a href="#六、速查表" class="headerlink" title="六、速查表"></a>六、速查表</h2><table>
<thead>
<tr>
<th>场景</th>
<th>npm命令</th>
<th>yarn命令</th>
<th>pnpm命令</th>
</tr>
</thead>
<tbody><tr>
<td><strong>安装依赖</strong></td>
<td><code>npm install</code></td>
<td><code>yarn install</code></td>
<td><code>pnpm install</code></td>
</tr>
<tr>
<td><strong>添加依赖</strong></td>
<td><code>npm install package</code></td>
<td><code>yarn add package</code></td>
<td><code>pnpm add package</code></td>
</tr>
<tr>
<td><strong>全局安装</strong></td>
<td><code>npm install -g package</code></td>
<td><code>yarn global add package</code></td>
<td><code>pnpm add -g package</code></td>
</tr>
<tr>
<td><strong>开发依赖</strong></td>
<td><code>npm install -D package</code></td>
<td><code>yarn add -D package</code></td>
<td><code>pnpm add -D package</code></td>
</tr>
<tr>
<td><strong>移除依赖</strong></td>
<td><code>npm uninstall package</code></td>
<td><code>yarn remove package</code></td>
<td><code>pnpm remove package</code></td>
</tr>
<tr>
<td><strong>更新依赖</strong></td>
<td><code>npm update</code></td>
<td><code>yarn upgrade</code></td>
<td><code>pnpm update</code></td>
</tr>
<tr>
<td><strong>清理缓存</strong></td>
<td><code>npm cache clean --force</code></td>
<td><code>yarn cache clean</code></td>
<td><code>pnpm store prune</code></td>
</tr>
</tbody></table>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li><strong>本文核心观点</strong>: Node.js生态系统的包管理是现代前端开发的基础，掌握多种包管理器的使用技巧能显著提升开发效率</li>
<li><strong>值得进一步探讨的问题</strong>:<ul>
<li>如何在团队中统一包管理器和版本策略</li>
<li>私有npm仓库的搭建和管理</li>
<li>Monorepo项目的依赖管理最佳实践</li>
</ul>
</li>
<li><strong>行动项</strong>:<ul>
<li>✅ 配置npm&#x2F;yarn镜像源提升安装速度</li>
<li>📋 学习使用nvm管理多个Node.js版本</li>
<li>📋 在项目中建立统一的依赖管理规范</li>
</ul>
</li>
</ul>
<h2 id="相关扩展文档"><a href="#相关扩展文档" class="headerlink" title="相关扩展文档"></a>相关扩展文档</h2><ul>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Node.js%E7%94%9F%E6%80%81/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E8%AF%A6%E8%A7%A3.md">Node.js版本管理详解</a></li>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Node.js%E7%94%9F%E6%80%81/%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E5%AF%B9%E6%AF%94.md">包管理器性能对比</a></li>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Node.js%E7%94%9F%E6%80%81/%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA.md">npm私有仓库搭建</a></li>
</ul>
<hr>
<p><em>创建于：2025年09月25日 01:51</em><br><em>最后修改：2025-09-25 01:51</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/25/%E5%B8%B8%E7%94%A8/node/" data-id="cmfzn3a7f000dla3i4tjj9qdv" data-title="Node.js开发环境配置与包管理" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yarn/" rel="tag">yarn</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8C%85%E7%AE%A1%E7%90%86/" rel="tag">包管理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" rel="tag">开发环境</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-常用/make使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/24/%E5%B8%B8%E7%94%A8/make%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2025-09-24T10:45:05.000Z" itemprop="datePublished">2025-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">构建工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/24/%E5%B8%B8%E7%94%A8/make%E4%BD%BF%E7%94%A8/">Make构建工具终极实用指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="正文内容"><a href="#正文内容" class="headerlink" title="正文内容"></a>正文内容</h2><h2 id="一、Make-核心概念"><a href="#一、Make-核心概念" class="headerlink" title="一、Make 核心概念"></a>一、Make 核心概念</h2><p><strong>Make</strong> 是自动化构建工具，通过 <code>Makefile</code> 定义任务依赖关系，实现”一次配置，重复运行”。</p>
<p><strong>核心概念</strong>：</p>
<ul>
<li><p><strong>目标 (Target)</strong>：要生成的文件或执行的任务</p>
</li>
<li><p><strong>依赖 (Prerequisites)</strong>：目标所需的文件或其他目标</p>
</li>
<li><p><strong>规则 (Recipe)</strong>：生成目标需要执行的命令</p>
</li>
<li><p><strong>变量 (Variables)</strong>：可重用的参数和配置</p>
</li>
</ul>
<h2 id="二、多平台安装指南"><a href="#二、多平台安装指南" class="headerlink" title="二、多平台安装指南"></a>二、多平台安装指南</h2><h3 id="Windows-系统安装"><a href="#Windows-系统安装" class="headerlink" title="Windows 系统安装"></a>Windows 系统安装</h3><h4 id="方法1：使用-Chocolatey（推荐）"><a href="#方法1：使用-Chocolatey（推荐）" class="headerlink" title="方法1：使用 Chocolatey（推荐）"></a>方法1：使用 Chocolatey（推荐）</h4><p>powershell</p>
<h1 id="以管理员身份运行-PowerShell，安装-Chocolatey"><a href="#以管理员身份运行-PowerShell，安装-Chocolatey" class="headerlink" title="以管理员身份运行 PowerShell，安装 Chocolatey"></a>以管理员身份运行 PowerShell，安装 Chocolatey</h1><p>Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol &#x3D; [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(‘<a target="_blank" rel="noopener" href="https://community.chocolatey.org/install.ps1">https://community.chocolatey.org/install.ps1</a>‘))</p>
<h1 id="使用-Chocolatey-安装-Make"><a href="#使用-Chocolatey-安装-Make" class="headerlink" title="使用 Chocolatey 安装 Make"></a>使用 Chocolatey 安装 Make</h1><p>choco install make -y  # -y 自动确认所有提示</p>
<h4 id="方法2：使用-MinGW-w64"><a href="#方法2：使用-MinGW-w64" class="headerlink" title="方法2：使用 MinGW-w64"></a>方法2：使用 MinGW-w64</h4><p>bash</p>
<h1 id="下载-MinGW-w64-安装器，安装时勾选-“mingw32-make”"><a href="#下载-MinGW-w64-安装器，安装时勾选-“mingw32-make”" class="headerlink" title="下载 MinGW-w64 安装器，安装时勾选 “mingw32-make”"></a>下载 MinGW-w64 安装器，安装时勾选 “mingw32-make”</h1><h1 id="安装后重命名或创建符号链接"><a href="#安装后重命名或创建符号链接" class="headerlink" title="安装后重命名或创建符号链接"></a>安装后重命名或创建符号链接</h1><p>cp &#x2F;mingw64&#x2F;bin&#x2F;mingw32-make.exe &#x2F;mingw64&#x2F;bin&#x2F;make.exe  # 重命名</p>
<h4 id="方法3：使用-WSL（Windows-Subsystem-for-Linux）"><a href="#方法3：使用-WSL（Windows-Subsystem-for-Linux）" class="headerlink" title="方法3：使用 WSL（Windows Subsystem for Linux）"></a>方法3：使用 WSL（Windows Subsystem for Linux）</h4><p>bash</p>
<h1 id="启用-WSL"><a href="#启用-WSL" class="headerlink" title="启用 WSL"></a>启用 WSL</h1><p>wsl –install  # Windows 10&#x2F;11 自动安装默认 Linux 发行版</p>
<h1 id="在-WSL-中安装-Make"><a href="#在-WSL-中安装-Make" class="headerlink" title="在 WSL 中安装 Make"></a>在 WSL 中安装 Make</h1><p>sudo apt update &amp;&amp; sudo apt install make  # Ubuntu&#x2F;Debian</p>
<h3 id="macOS-系统安装"><a href="#macOS-系统安装" class="headerlink" title="macOS 系统安装"></a>macOS 系统安装</h3><p>bash</p>
<h1 id="使用-Homebrew（推荐）"><a href="#使用-Homebrew（推荐）" class="headerlink" title="使用 Homebrew（推荐）"></a>使用 Homebrew（推荐）</h1><p>&#x2F;bin&#x2F;bash -c “$(curl -fsSL <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh">https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh</a>)”<br>brew install make  # 安装 GNU Make</p>
<h1 id="或使用-Xcode-Command-Line-Tools"><a href="#或使用-Xcode-Command-Line-Tools" class="headerlink" title="或使用 Xcode Command Line Tools"></a>或使用 Xcode Command Line Tools</h1><p>xcode-select –install  # 安装开发工具包，包含 make</p>
<h3 id="Linux-系统安装"><a href="#Linux-系统安装" class="headerlink" title="Linux 系统安装"></a>Linux 系统安装</h3><p>bash</p>
<h1 id="Ubuntu-Debian"><a href="#Ubuntu-Debian" class="headerlink" title="Ubuntu&#x2F;Debian"></a>Ubuntu&#x2F;Debian</h1><p>sudo apt update &amp;&amp; sudo apt install make  # 安装 make</p>
<h1 id="CentOS-RHEL-Fedora"><a href="#CentOS-RHEL-Fedora" class="headerlink" title="CentOS&#x2F;RHEL&#x2F;Fedora"></a>CentOS&#x2F;RHEL&#x2F;Fedora</h1><p>sudo yum install make  # 旧版 CentOS&#x2F;RHEL<br>sudo dnf install make  # Fedora&#x2F;CentOS 8+</p>
<h1 id="Arch-Linux"><a href="#Arch-Linux" class="headerlink" title="Arch Linux"></a>Arch Linux</h1><p>sudo pacman -S make  # Arch 系系统</p>
<h2 id="三、安装验证与基础测试"><a href="#三、安装验证与基础测试" class="headerlink" title="三、安装验证与基础测试"></a>三、安装验证与基础测试</h2><h3 id="验证安装成功"><a href="#验证安装成功" class="headerlink" title="验证安装成功"></a>验证安装成功</h3><p>bash</p>
<p>make –version  # 查看 make 版本信息，确认安装成功<br>which make      # 查看 make 安装路径</p>
<h3 id="创建第一个-Makefile-测试"><a href="#创建第一个-Makefile-测试" class="headerlink" title="创建第一个 Makefile 测试"></a>创建第一个 Makefile 测试</h3><p>makefile</p>
<h1 id="创建测试文件-Makefile"><a href="#创建测试文件-Makefile" class="headerlink" title="创建测试文件 Makefile"></a>创建测试文件 Makefile</h1><p>echo ‘hello:<br>	@echo “Hello, Make!”‘ &gt; Makefile</p>
<h1 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h1><p>make hello  # 应该输出 “Hello, Make!”</p>
<h2 id="四、Makefile-核心语法详解"><a href="#四、Makefile-核心语法详解" class="headerlink" title="四、Makefile 核心语法详解"></a>四、Makefile 核心语法详解</h2><h3 id="基本规则结构"><a href="#基本规则结构" class="headerlink" title="基本规则结构"></a>基本规则结构</h3><p>makefile</p>
<p>target: prerequisites<br>	recipe  # 注意：recipe 前必须是 Tab 制表符，不能是空格</p>
<h3 id="变量定义与使用"><a href="#变量定义与使用" class="headerlink" title="变量定义与使用"></a>变量定义与使用</h3><p>makefile</p>
<h1 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h1><p>CC &#x3D; go<br>TARGET &#x3D; myapp<br>SRC &#x3D; main.go helper.go</p>
<h1 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h1><p>build:<br>	$(CC) build -o $(TARGET) $(SRC)  # 使用 $(VAR) 或 ${VAR} 引用变量</p>
<h3 id="常用自动变量"><a href="#常用自动变量" class="headerlink" title="常用自动变量"></a>常用自动变量</h3><p>makefile</p>
<p>test: foo.go bar.go<br>	@echo “目标: $@”      # $@ 代表当前目标名称 (test)<br>	@echo “第一个依赖: $&lt;” # $&lt; 代表第一个依赖文件 (foo.go)<br>	@echo “所有依赖: $^”   # $^ 代表所有依赖文件 (foo.go bar.go)</p>
<h3 id="伪目标声明"><a href="#伪目标声明" class="headerlink" title="伪目标声明"></a>伪目标声明</h3><p>makefile</p>
<p>.PHONY: clean install test  # 声明这些目标不是实际文件，避免与同名文件冲突</p>
<p>clean:<br>	rm -f $(TARGET) *.o</p>
<h2 id="五、Go-项目完整-Makefile-示例"><a href="#五、Go-项目完整-Makefile-示例" class="headerlink" title="五、Go 项目完整 Makefile 示例"></a>五、Go 项目完整 Makefile 示例</h2><p>makefile</p>
<h1 id="Go-项目-Makefile-示例"><a href="#Go-项目-Makefile-示例" class="headerlink" title="Go 项目 Makefile 示例"></a>Go 项目 Makefile 示例</h1><h1 id="变量定义-1"><a href="#变量定义-1" class="headerlink" title="变量定义"></a>变量定义</h1><p>BINARY_NAME &#x3D; myapp<br>GO_VERSION &#x3D; 1.21<br>BUILD_DIR &#x3D; build<br>SRC_DIR &#x3D; .&#x2F;cmd&#x2F;app<br>MAIN_FILE &#x3D; main.go</p>
<h1 id="构建标志"><a href="#构建标志" class="headerlink" title="构建标志"></a>构建标志</h1><p>LDFLAGS &#x3D; -ldflags&#x3D;”-s -w -X main.version&#x3D;1.0.0”<br>BUILD_FLAGS &#x3D; -v</p>
<h1 id="默认目标"><a href="#默认目标" class="headerlink" title="默认目标"></a>默认目标</h1><p>.DEFAULT_GOAL :&#x3D; help</p>
<h1 id="显示帮助信息"><a href="#显示帮助信息" class="headerlink" title="显示帮助信息"></a>显示帮助信息</h1><p>help:<br>	@echo “可用命令:”<br>	@echo “  make build     - 编译项目”<br>	@echo “  make run       - 运行项目”<br>	@echo “  make test      - 运行测试”<br>	@echo “  make clean     - 清理构建文件”<br>	@echo “  make docker    - 构建 Docker 镜像”<br>	@echo “  make install   - 安装依赖”</p>
<h1 id="编译项目"><a href="#编译项目" class="headerlink" title="编译项目"></a>编译项目</h1><p>build:<br>	@echo “正在编译 $(BINARY_NAME)…”<br>	go build $(BUILD_FLAGS) $(LDFLAGS) -o $(BUILD_DIR)&#x2F;$(BINARY_NAME) $(SRC_DIR)&#x2F;$(MAIN_FILE)<br>	@echo “编译完成: $(BUILD_DIR)&#x2F;$(BINARY_NAME)”</p>
<h1 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h1><p>run: build<br>	@echo “启动 $(BINARY_NAME)…”<br>	.&#x2F;$(BUILD_DIR)&#x2F;$(BINARY_NAME)</p>
<h1 id="运行测试-1"><a href="#运行测试-1" class="headerlink" title="运行测试"></a>运行测试</h1><p>test:<br>	@echo “运行测试…”<br>	go test -v .&#x2F;…</p>
<h1 id="代码质量检查"><a href="#代码质量检查" class="headerlink" title="代码质量检查"></a>代码质量检查</h1><p>lint:<br>	@echo “代码检查…”<br>	golangci-lint run</p>
<h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><p>install:<br>	@echo “安装 Go 工具…”<br>	go mod tidy<br>	go install github.com&#x2F;golangci&#x2F;golangci-lint&#x2F;cmd&#x2F;golangci-lint@latest</p>
<h1 id="清理构建文件"><a href="#清理构建文件" class="headerlink" title="清理构建文件"></a>清理构建文件</h1><p>clean:<br>	@echo “清理构建文件…”<br>	rm -rf $(BUILD_DIR)<br>	go clean</p>
<h1 id="跨平台编译"><a href="#跨平台编译" class="headerlink" title="跨平台编译"></a>跨平台编译</h1><p>build-all: build-linux build-windows build-darwin</p>
<p>build-linux:<br>	GOOS&#x3D;linux GOARCH&#x3D;amd64 go build -o $(BUILD_DIR)&#x2F;$(BINARY_NAME)-linux $(SRC_DIR)&#x2F;$(MAIN_FILE)</p>
<p>build-windows:<br>	GOOS&#x3D;windows GOARCH&#x3D;amd64 go build -o $(BUILD_DIR)&#x2F;$(BINARY_NAME).exe $(SRC_DIR)&#x2F;$(MAIN_FILE)</p>
<p>build-darwin:<br>	GOOS&#x3D;darwin GOARCH&#x3D;amd64 go build -o $(BUILD_DIR)&#x2F;$(BINARY_NAME)-darwin $(SRC_DIR)&#x2F;$(MAIN_FILE)</p>
<h1 id="Docker-构建"><a href="#Docker-构建" class="headerlink" title="Docker 构建"></a>Docker 构建</h1><p>docker:<br>	@echo “构建 Docker 镜像…”<br>	docker build -t $(BINARY_NAME):latest .</p>
<h1 id="安装到系统路径"><a href="#安装到系统路径" class="headerlink" title="安装到系统路径"></a>安装到系统路径</h1><p>install-system: build<br>	@echo “安装到 &#x2F;usr&#x2F;local&#x2F;bin…”<br>	sudo cp $(BUILD_DIR)&#x2F;$(BINARY_NAME) &#x2F;usr&#x2F;local&#x2F;bin&#x2F;<br>	@echo “安装完成”</p>
<p>.PHONY: help build run test lint install clean build-all docker install-system</p>
<h2 id="六、高级技巧与最佳实践"><a href="#六、高级技巧与最佳实践" class="headerlink" title="六、高级技巧与最佳实践"></a>六、高级技巧与最佳实践</h2><h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>makefile</p>
<h1 id="根据环境变量选择不同的构建选项"><a href="#根据环境变量选择不同的构建选项" class="headerlink" title="根据环境变量选择不同的构建选项"></a>根据环境变量选择不同的构建选项</h1><p>DEBUG ?&#x3D; 0</p>
<p>ifeq ($(DEBUG), 1)<br>    BUILD_FLAGS +&#x3D; -gcflags&#x3D;”all&#x3D;-N -l”<br>endif</p>
<p>build:<br>	go build $(BUILD_FLAGS) -o $(BINARY_NAME)</p>
<h3 id="文件依赖自动检测"><a href="#文件依赖自动检测" class="headerlink" title="文件依赖自动检测"></a>文件依赖自动检测</h3><p>makefile</p>
<h1 id="自动检测-go-文件变化"><a href="#自动检测-go-文件变化" class="headerlink" title="自动检测 .go 文件变化"></a>自动检测 .go 文件变化</h1><p>SRCS :&#x3D; $(shell find . -name “*.go”)</p>
<p>$(BINARY_NAME): $(SRCS)<br>	go build -o $@ .&#x2F;cmd&#x2F;app</p>
<h3 id="包含其他-Makefile"><a href="#包含其他-Makefile" class="headerlink" title="包含其他 Makefile"></a>包含其他 Makefile</h3><p>makefile</p>
<h1 id="主-Makefile"><a href="#主-Makefile" class="headerlink" title="主 Makefile"></a>主 Makefile</h1><p>include config.mk  # 包含配置文件<br>include docker.mk  # 包含 Docker 相关规则</p>
<h2 id="七、常见问题排查指南"><a href="#七、常见问题排查指南" class="headerlink" title="七、常见问题排查指南"></a>七、常见问题排查指南</h2><h3 id="问题1：make-No-targets-specified-and-no-makefile-found"><a href="#问题1：make-No-targets-specified-and-no-makefile-found" class="headerlink" title="问题1：make: *** No targets specified and no makefile found."></a>问题1：<code>make: *** No targets specified and no makefile found.</code></h3><p>bash</p>
<p>ls -la | grep -i makefile  # 检查 Makefile 是否存在<br>make -f CustomMakefile     # 使用 -f 指定自定义文件名</p>
<h3 id="问题2：Missing-separator-Stop"><a href="#问题2：Missing-separator-Stop" class="headerlink" title="问题2：Missing separator. Stop."></a>问题2：<code>Missing separator. Stop.</code></h3><p>makefile</p>
<h1 id="错误：使用空格而不是-Tab"><a href="#错误：使用空格而不是-Tab" class="headerlink" title="错误：使用空格而不是 Tab"></a>错误：使用空格而不是 Tab</h1><p>target:<br>    echo “Hello”  # ✗ 错误：使用了 4 个空格</p>
<h1 id="正确：使用-Tab"><a href="#正确：使用-Tab" class="headerlink" title="正确：使用 Tab"></a>正确：使用 Tab</h1><p>target:<br>	echo “Hello”  # ✓ 正确：使用了 Tab</p>
<h3 id="问题3：命令在-Makefile-中不执行"><a href="#问题3：命令在-Makefile-中不执行" class="headerlink" title="问题3：命令在 Makefile 中不执行"></a>问题3：命令在 Makefile 中不执行</h3><p>makefile</p>
<h1 id="错误：命令前加了-，抑制了输出"><a href="#错误：命令前加了-，抑制了输出" class="headerlink" title="错误：命令前加了 @，抑制了输出"></a>错误：命令前加了 @，抑制了输出</h1><p>target:<br>	@cd &#x2F;some&#x2F;dir &amp;&amp; command  # 如果 command 失败，整个命令静默失败</p>
<h1 id="正确：分别执行或添加错误检查"><a href="#正确：分别执行或添加错误检查" class="headerlink" title="正确：分别执行或添加错误检查"></a>正确：分别执行或添加错误检查</h1><p>target:<br>	cd &#x2F;some&#x2F;dir &amp;&amp; command  # 移除 @ 查看输出<br>	# 或使用 set -e<br>	set -e; cd &#x2F;some&#x2F;dir &amp;&amp; command</p>
<h3 id="问题4：变量不展开"><a href="#问题4：变量不展开" class="headerlink" title="问题4：变量不展开"></a>问题4：变量不展开</h3><p>makefile</p>
<h1 id="错误：使用了错误的变量语法"><a href="#错误：使用了错误的变量语法" class="headerlink" title="错误：使用了错误的变量语法"></a>错误：使用了错误的变量语法</h1><p>VAR &#x3D; value<br>target:<br>	echo $VAR    # ✗ 输出空行（shell 变量）</p>
<h1 id="正确：使用-Makefile-变量语法"><a href="#正确：使用-Makefile-变量语法" class="headerlink" title="正确：使用 Makefile 变量语法"></a>正确：使用 Makefile 变量语法</h1><p>target:<br>	echo $(VAR)  # ✓ 正确：输出 value<br>	echo ${VAR}  # ✓ 也是正确的</p>
<h2 id="八、实用工作流示例"><a href="#八、实用工作流示例" class="headerlink" title="八、实用工作流示例"></a>八、实用工作流示例</h2><h3 id="日常开发工作流"><a href="#日常开发工作流" class="headerlink" title="日常开发工作流"></a>日常开发工作流</h3><p>bash</p>
<p>make install    # 安装依赖<br>make test       # 运行测试<br>make build      # 构建项目<br>make run        # 本地运行</p>
<h3 id="CI-CD-集成工作流"><a href="#CI-CD-集成工作流" class="headerlink" title="CI&#x2F;CD 集成工作流"></a>CI&#x2F;CD 集成工作流</h3><p>bash</p>
<p>make lint       # 代码质量检查<br>make test       # 单元测试<br>make build-all  # 多平台构建<br>make docker     # 构建镜像</p>
<h2 id="九、速查表（Cheatsheet）"><a href="#九、速查表（Cheatsheet）" class="headerlink" title="九、速查表（Cheatsheet）"></a>九、速查表（Cheatsheet）</h2><table>
<thead>
<tr>
<th>场景</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>基本运行</strong></td>
<td><code>make</code></td>
<td>运行默认目标（通常是第一个目标）</td>
</tr>
<tr>
<td></td>
<td><code>make target</code></td>
<td>运行指定目标</td>
</tr>
<tr>
<td></td>
<td><code>make -f custom.mk</code></td>
<td>使用自定义 Makefile 文件</td>
</tr>
<tr>
<td><strong>调试诊断</strong></td>
<td><code>make -n</code></td>
<td>干跑模式，显示但不执行命令</td>
</tr>
<tr>
<td></td>
<td><code>make -B</code></td>
<td>强制重建所有目标</td>
</tr>
<tr>
<td></td>
<td><code>make --debug</code></td>
<td>显示调试信息</td>
</tr>
<tr>
<td><strong>变量操作</strong></td>
<td><code>make VAR=value</code></td>
<td>命令行传递变量</td>
</tr>
<tr>
<td></td>
<td><code>make -e</code></td>
<td>优先使用环境变量</td>
</tr>
<tr>
<td><strong>并行构建</strong></td>
<td><code>make -j4</code></td>
<td>使用 4 个任务并行构建</td>
</tr>
<tr>
<td><strong>常用目标</strong></td>
<td><code>make clean</code></td>
<td>清理构建产物</td>
</tr>
<tr>
<td></td>
<td><code>make install</code></td>
<td>安装到系统</td>
</tr>
<tr>
<td></td>
<td><code>make test</code></td>
<td>运行测试套件</td>
</tr>
</tbody></table>
<h2 id="十、总结"><a href="#十、总结" class="headerlink" title="十、总结"></a>十、总结</h2><p>通过本指南，你已经掌握了：</p>
<ul>
<li><p>✅ <strong>多平台安装</strong> Make 的方法</p>
</li>
<li><p>✅ <strong>Makefile 核心语法</strong>和最佳实践</p>
</li>
<li><p>✅ <strong>Go 项目完整配置</strong>示例</p>
</li>
<li><p>✅ <strong>常见问题排查</strong>技巧</p>
</li>
<li><p>✅ <strong>高效工作流</strong>设计</p>
</li>
</ul>
<hr>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li>本文核心观点：</li>
<li>值得进一步探讨的问题：</li>
<li>行动项：</li>
</ul>
<hr>
<p><em>创建于：2025年09月24日 10:45</em><br><em>最后修改：2025-09-24 10:45</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/24/%E5%B8%B8%E7%94%A8/make%E4%BD%BF%E7%94%A8/" data-id="cmfzn3a7d000ala3i3xkvhaey" data-title="Make构建工具终极实用指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Make/" rel="tag">Make</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Makefile/" rel="tag">Makefile</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91/" rel="tag">编译</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="tag">自动化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-技术/未命名" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/24/%E6%8A%80%E6%9C%AF/%E6%9C%AA%E5%91%BD%E5%90%8D/" class="article-date">
  <time class="dt-published" datetime="2025-09-24T10:45:00.000Z" itemprop="datePublished">2025-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>►<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/%E8%8D%89%E7%A8%BF/">草稿</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/24/%E6%8A%80%E6%9C%AF/%E6%9C%AA%E5%91%BD%E5%90%8D/">待完善的技术文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="正文内容"><a href="#正文内容" class="headerlink" title="正文内容"></a>正文内容</h2><hr>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li>本文核心观点：</li>
<li>值得进一步探讨的问题：</li>
<li>行动项：</li>
</ul>
<hr>
<p><em>创建于：2025年09月24日 10:45</em><br><em>最后修改：2025-09-24 10:45</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/24/%E6%8A%80%E6%9C%AF/%E6%9C%AA%E5%91%BD%E5%90%8D/" data-id="cmfzn3a7l000mla3ih37ofbf6" data-title="待完善的技术文档" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%85%E5%AE%8C%E5%96%84/" rel="tag">待完善</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" rel="tag">技术文档</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%8D%89%E7%A8%BF/" rel="tag">草稿</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-技术/Windows下安装Make" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/24/%E6%8A%80%E6%9C%AF/Windows%E4%B8%8B%E5%AE%89%E8%A3%85Make/" class="article-date">
  <time class="dt-published" datetime="2025-09-24T10:37:54.000Z" itemprop="datePublished">2025-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/24/%E6%8A%80%E6%9C%AF/Windows%E4%B8%8B%E5%AE%89%E8%A3%85Make/">Windows系统下Make工具安装配置指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="一、Windows环境下Make工具概述"><a href="#一、Windows环境下Make工具概述" class="headerlink" title="一、Windows环境下Make工具概述"></a>一、Windows环境下Make工具概述</h2><h3 id="什么是Make工具"><a href="#什么是Make工具" class="headerlink" title="什么是Make工具"></a>什么是Make工具</h3><p>Make是一个自动化构建工具，通过读取Makefile文件来执行编译、链接、安装等任务。在Windows环境下安装Make工具，可以让开发者使用与Linux&#x2F;macOS相同的构建流程。</p>
<h3 id="Windows下的Make工具选择"><a href="#Windows下的Make工具选择" class="headerlink" title="Windows下的Make工具选择"></a>Windows下的Make工具选择</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主要选择方案</span></span><br><span class="line">1. MinGW-w64 + MSYS2     <span class="comment"># 推荐：完整的Unix环境</span></span><br><span class="line">2. Chocolatey包管理器     <span class="comment"># 简单：一键安装</span></span><br><span class="line">3. Git <span class="keyword">for</span> Windows       <span class="comment"># 轻量：随Git一起安装</span></span><br><span class="line">4. Visual Studio Build Tools  <span class="comment"># 企业：微软官方工具</span></span><br><span class="line">5. WSL (Windows Subsystem <span class="keyword">for</span> Linux)  <span class="comment"># 原生：Linux环境</span></span><br></pre></td></tr></table></figure>

<h2 id="二、安装方法详解"><a href="#二、安装方法详解" class="headerlink" title="二、安装方法详解"></a>二、安装方法详解</h2><h3 id="方法1：使用MSYS2安装（推荐）"><a href="#方法1：使用MSYS2安装（推荐）" class="headerlink" title="方法1：使用MSYS2安装（推荐）"></a>方法1：使用MSYS2安装（推荐）</h3><p><strong>下载安装MSYS2：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 访问官网下载安装包</span></span><br><span class="line"><span class="comment"># https://www.msys2.org/</span></span><br><span class="line"><span class="comment"># 下载 msys2-x86_64-*.exe</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 安装完成后，打开MSYS2终端</span></span><br><span class="line"><span class="comment"># 更新包数据库</span></span><br><span class="line">pacman -Syu</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 安装Make工具</span></span><br><span class="line">pacman -S make</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 安装完整的开发工具链（可选）</span></span><br><span class="line">pacman -S base-devel</span><br><span class="line">pacman -S mingw-w64-x86_64-toolchain</span><br></pre></td></tr></table></figure>

<p><strong>配置环境变量：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加到系统PATH环境变量</span></span><br><span class="line">C:\msys64\usr\bin</span><br><span class="line">C:\msys64\mingw64\bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">make --version</span><br></pre></td></tr></table></figure>

<h3 id="方法2：使用Chocolatey安装"><a href="#方法2：使用Chocolatey安装" class="headerlink" title="方法2：使用Chocolatey安装"></a>方法2：使用Chocolatey安装</h3><p><strong>安装Chocolatey：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以管理员身份运行PowerShell</span></span><br><span class="line"><span class="built_in">Set-ExecutionPolicy</span> Bypass <span class="literal">-Scope</span> <span class="keyword">Process</span> <span class="literal">-Force</span></span><br><span class="line">[<span class="type">System.Net.ServicePointManager</span>]::SecurityProtocol = [<span class="type">System.Net.ServicePointManager</span>]::SecurityProtocol <span class="operator">-bor</span> <span class="number">3072</span></span><br><span class="line"><span class="built_in">iex</span> ((<span class="built_in">New-Object</span> System.Net.WebClient).DownloadString(<span class="string">&#x27;https://community.chocolatey.org/install.ps1&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><strong>安装Make：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装Make工具</span></span><br><span class="line">choco install make</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">make <span class="literal">--version</span></span><br></pre></td></tr></table></figure>

<h3 id="方法3：使用Git-for-Windows"><a href="#方法3：使用Git-for-Windows" class="headerlink" title="方法3：使用Git for Windows"></a>方法3：使用Git for Windows</h3><p><strong>安装Git for Windows：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 下载Git for Windows</span></span><br><span class="line"><span class="comment"># https://git-scm.com/download/win</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 安装时选择&quot;Use Git and optional Unix tools from the Command Prompt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. Git Bash中已包含make工具</span></span><br><span class="line"><span class="comment"># 打开Git Bash验证</span></span><br><span class="line">make --version</span><br></pre></td></tr></table></figure>

<h3 id="方法4：使用WSL（Windows-Subsystem-for-Linux）"><a href="#方法4：使用WSL（Windows-Subsystem-for-Linux）" class="headerlink" title="方法4：使用WSL（Windows Subsystem for Linux）"></a>方法4：使用WSL（Windows Subsystem for Linux）</h3><p><strong>启用WSL：</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以管理员身份运行PowerShell</span></span><br><span class="line"><span class="comment"># 启用WSL功能</span></span><br><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:Microsoft<span class="literal">-Windows-Subsystem-Linux</span> /all /norestart</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用虚拟机平台</span></span><br><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:VirtualMachinePlatform /all /norestart</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启计算机</span></span><br></pre></td></tr></table></figure>

<p><strong>安装Linux发行版：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从Microsoft Store安装Ubuntu</span></span><br><span class="line"><span class="comment"># 或使用命令行安装</span></span><br><span class="line">wsl --install -d Ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在WSL中安装make</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install build-essential</span><br><span class="line">make --version</span><br></pre></td></tr></table></figure>

<h2 id="三、验证安装与基础测试"><a href="#三、验证安装与基础测试" class="headerlink" title="三、验证安装与基础测试"></a>三、验证安装与基础测试</h2><h3 id="创建测试Makefile"><a href="#创建测试Makefile" class="headerlink" title="创建测试Makefile"></a>创建测试Makefile</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件：Makefile</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: hello clean test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认目标</span></span><br><span class="line"><span class="section">all: hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单的hello目标</span></span><br><span class="line"><span class="section">hello:</span></span><br><span class="line">	@echo <span class="string">&quot;Hello from Windows Make!&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;Make version: <span class="variable">$(MAKE_VERSION)</span>&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;Operating System: Windows&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试变量和函数</span></span><br><span class="line"><span class="section">test:</span></span><br><span class="line">	@echo <span class="string">&quot;Current directory: <span class="variable">$(CURDIR)</span>&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;Shell: <span class="variable">$(SHELL)</span>&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;Date: $(shell date)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理目标</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	@echo <span class="string">&quot;Cleaning up...&quot;</span></span><br><span class="line">	@if exist *.tmp del *.tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 帮助信息</span></span><br><span class="line"><span class="section">help:</span></span><br><span class="line">	@echo <span class="string">&quot;Available targets:&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;  hello  - Print hello message&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;  test   - Test make functionality&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;  clean  - Clean temporary files&quot;</span></span><br><span class="line">	@echo <span class="string">&quot;  help   - Show this help&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="测试Make功能"><a href="#测试Make功能" class="headerlink" title="测试Make功能"></a>测试Make功能</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础测试</span></span><br><span class="line">make hello          <span class="comment"># 运行hello目标</span></span><br><span class="line">make <span class="built_in">test</span>           <span class="comment"># 测试系统功能</span></span><br><span class="line">make clean          <span class="comment"># 清理文件</span></span><br><span class="line">make <span class="built_in">help</span>           <span class="comment"># 显示帮助</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 高级测试</span></span><br><span class="line">make -n hello       <span class="comment"># 干跑模式，显示但不执行命令</span></span><br><span class="line">make -j4 all        <span class="comment"># 并行执行（4个任务）</span></span><br><span class="line">make VERBOSE=1 hello <span class="comment"># 详细输出模式</span></span><br></pre></td></tr></table></figure>

<h2 id="四、常见问题解决"><a href="#四、常见问题解决" class="headerlink" title="四、常见问题解决"></a>四、常见问题解决</h2><h3 id="问题1：make命令不识别"><a href="#问题1：make命令不识别" class="headerlink" title="问题1：make命令不识别"></a>问题1：make命令不识别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查PATH环境变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>  <span class="comment"># Git Bash中</span></span><br><span class="line"><span class="built_in">echo</span> %PATH% <span class="comment"># CMD中</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动添加make路径</span></span><br><span class="line"><span class="comment"># 方法1：临时添加</span></span><br><span class="line"><span class="built_in">set</span> PATH=%PATH%;C:\msys64\usr\bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2：永久添加（系统环境变量）</span></span><br><span class="line"><span class="comment"># 控制面板 → 系统 → 高级系统设置 → 环境变量</span></span><br></pre></td></tr></table></figure>

<h3 id="问题2：权限问题"><a href="#问题2：权限问题" class="headerlink" title="问题2：权限问题"></a>问题2：权限问题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以管理员身份运行终端</span></span><br><span class="line"><span class="comment"># 或修改文件权限</span></span><br><span class="line">icacls <span class="string">&quot;C:\msys64&quot;</span> /grant Users:F /T</span><br></pre></td></tr></table></figure>

<h3 id="问题3：路径分隔符问题"><a href="#问题3：路径分隔符问题" class="headerlink" title="问题3：路径分隔符问题"></a>问题3：路径分隔符问题</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows路径处理</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(OS)</span>,Windows_NT)</span><br><span class="line">    RM = del /Q</span><br><span class="line">    MKDIR = mkdir</span><br><span class="line">    SEP = \\</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    RM = rm -f</span><br><span class="line">    MKDIR = mkdir -p</span><br><span class="line">    SEP = /</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	<span class="variable">$(RM)</span> build<span class="variable">$(SEP)</span>*.obj</span><br></pre></td></tr></table></figure>

<h3 id="问题4：编码问题"><a href="#问题4：编码问题" class="headerlink" title="问题4：编码问题"></a>问题4：编码问题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置正确的编码</span></span><br><span class="line">chcp 65001  <span class="comment"># 设置为UTF-8编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在Makefile中处理中文</span></span><br><span class="line">.PHONY: 测试</span><br><span class="line">测试:</span><br><span class="line">	@<span class="built_in">echo</span> <span class="string">&quot;中文测试成功&quot;</span></span><br></pre></td></tr></table></figure>




<hr>
<h2 id="五、Windows特定的Makefile技巧"><a href="#五、Windows特定的Makefile技巧" class="headerlink" title="五、Windows特定的Makefile技巧"></a>五、Windows特定的Makefile技巧</h2><h3 id="跨平台兼容性"><a href="#跨平台兼容性" class="headerlink" title="跨平台兼容性"></a>跨平台兼容性</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检测操作系统</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(OS)</span>,Windows_NT)</span><br><span class="line">    DETECTED_OS := Windows</span><br><span class="line">    EXE_EXT := .exe</span><br><span class="line">    PATH_SEP := \\</span><br><span class="line">    SHELL := cmd.exe</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    DETECTED_OS := <span class="variable">$(<span class="built_in">shell</span> uname -s)</span></span><br><span class="line">    EXE_EXT :=</span><br><span class="line">    PATH_SEP := /</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 平台特定的命令</span></span><br><span class="line"><span class="keyword">ifeq</span> (<span class="variable">$(DETECTED_OS)</span>,Windows)</span><br><span class="line">    MKDIR = if not exist $(1) mkdir $(1)</span><br><span class="line">    RMDIR = if exist $(1) rmdir /s /q $(1)</span><br><span class="line">    COPY = copy $(1) $(2)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    MKDIR = mkdir -p $(1)</span><br><span class="line">    RMDIR = rm -rf $(1)</span><br><span class="line">    COPY = cp $(1) $(2)</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>

<h3 id="与Visual-Studio集成"><a href="#与Visual-Studio集成" class="headerlink" title="与Visual Studio集成"></a>与Visual Studio集成</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检测Visual Studio环境</span></span><br><span class="line"><span class="keyword">ifdef</span> VCINSTALLDIR</span><br><span class="line">    CC = cl.exe</span><br><span class="line">    CFLAGS = /nologo /W3</span><br><span class="line">    LDFLAGS = /nologo</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    CC = gcc</span><br><span class="line">    CFLAGS = -Wall -Wextra</span><br><span class="line">    LDFLAGS =</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Visual Studio项目构建</span></span><br><span class="line"><span class="section">vs-build:</span></span><br><span class="line">	msbuild MyProject.sln /p:Configuration=Release</span><br></pre></td></tr></table></figure>

<h2 id="六、实际项目应用示例"><a href="#六、实际项目应用示例" class="headerlink" title="六、实际项目应用示例"></a>六、实际项目应用示例</h2><h3 id="C-C-项目Makefile"><a href="#C-C-项目Makefile" class="headerlink" title="C&#x2F;C++项目Makefile"></a>C&#x2F;C++项目Makefile</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows C++项目Makefile示例</span></span><br><span class="line">PROJECT = MyApp</span><br><span class="line">SRC_DIR = src</span><br><span class="line">BUILD_DIR = build</span><br><span class="line">BIN_DIR = bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译器设置</span></span><br><span class="line">CXX = g++</span><br><span class="line">CXXFLAGS = -std=c++17 -Wall -Wextra -O2</span><br><span class="line">LDFLAGS =</span><br><span class="line"></span><br><span class="line"><span class="comment"># 源文件和目标文件</span></span><br><span class="line">SOURCES = <span class="variable">$(<span class="built_in">wildcard</span> <span class="variable">$(SRC_DIR)</span>/*.cpp)</span></span><br><span class="line">OBJECTS = $(SOURCES:<span class="variable">$(SRC_DIR)</span>/%.cpp=<span class="variable">$(BUILD_DIR)</span>/%.obj)</span><br><span class="line">TARGET = <span class="variable">$(BIN_DIR)</span>/<span class="variable">$(PROJECT)</span>.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认目标</span></span><br><span class="line"><span class="section">all: <span class="variable">$(TARGET)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="variable">$(BUILD_DIR)</span> <span class="variable">$(BIN_DIR)</span>:</span><br><span class="line">	if not exist <span class="string">&quot;<span class="variable">$@</span>&quot;</span> mkdir <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译目标文件</span></span><br><span class="line"><span class="variable">$(BUILD_DIR)</span>/%.obj: <span class="variable">$(SRC_DIR)</span>/%.cpp | <span class="variable">$(BUILD_DIR)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> -c <span class="variable">$&lt;</span> -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 链接可执行文件</span></span><br><span class="line"><span class="variable">$(TARGET)</span>: <span class="variable">$(OBJECTS)</span> | <span class="variable">$(BIN_DIR)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(OBJECTS)</span> -o <span class="variable">$@</span> <span class="variable">$(LDFLAGS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行程序</span></span><br><span class="line"><span class="section">run: <span class="variable">$(TARGET)</span></span></span><br><span class="line">	<span class="variable">$(TARGET)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	if exist <span class="variable">$(BUILD_DIR)</span> rmdir /s /q <span class="variable">$(BUILD_DIR)</span></span><br><span class="line">	if exist <span class="variable">$(BIN_DIR)</span> rmdir /s /q <span class="variable">$(BIN_DIR)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: all run clean</span></span><br></pre></td></tr></table></figure>

<h3 id="Node-js项目Makefile"><a href="#Node-js项目Makefile" class="headerlink" title="Node.js项目Makefile"></a>Node.js项目Makefile</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Node.js项目Makefile</span></span><br><span class="line">NODE = node</span><br><span class="line">NPM = npm</span><br><span class="line">PROJECT_DIR = <span class="variable">$(CURDIR)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line"><span class="section">install:</span></span><br><span class="line">	<span class="variable">$(NPM)</span> install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开发模式</span></span><br><span class="line"><span class="section">dev:</span></span><br><span class="line">	<span class="variable">$(NPM)</span> run dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建项目</span></span><br><span class="line"><span class="section">build:</span></span><br><span class="line">	<span class="variable">$(NPM)</span> run build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行测试</span></span><br><span class="line"><span class="section">test:</span></span><br><span class="line">	<span class="variable">$(NPM)</span> test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码检查</span></span><br><span class="line"><span class="section">lint:</span></span><br><span class="line">	<span class="variable">$(NPM)</span> run lint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	if exist node_modules rmdir /s /q node_modules</span><br><span class="line">	if exist dist rmdir /s /q dist</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: install dev build test lint clean</span></span><br></pre></td></tr></table></figure>

<h2 id="七、性能优化建议"><a href="#七、性能优化建议" class="headerlink" title="七、性能优化建议"></a>七、性能优化建议</h2><h3 id="并行构建"><a href="#并行构建" class="headerlink" title="并行构建"></a>并行构建</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用并行构建</span></span><br><span class="line">MAKEFLAGS += -j<span class="variable">$(<span class="built_in">shell</span> echo %NUMBER_OF_PROCESSORS%)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或在命令行指定</span></span><br><span class="line"><span class="comment"># make -j4 all</span></span><br></pre></td></tr></table></figure>

<h3 id="缓存优化"><a href="#缓存优化" class="headerlink" title="缓存优化"></a>缓存优化</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用ccache加速编译（如果可用）</span></span><br><span class="line"><span class="keyword">ifneq</span> (<span class="variable">$(<span class="built_in">shell</span> where ccache 2&gt;nul)</span>,)</span><br><span class="line">    CC := ccache <span class="variable">$(CC)</span></span><br><span class="line">    CXX := ccache <span class="variable">$(CXX)</span></span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>

<h2 id="八、故障排查指南"><a href="#八、故障排查指南" class="headerlink" title="八、故障排查指南"></a>八、故障排查指南</h2><h3 id="调试Makefile"><a href="#调试Makefile" class="headerlink" title="调试Makefile"></a>调试Makefile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示详细信息</span></span><br><span class="line">make --debug=verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印变量值</span></span><br><span class="line">make --print-data-base</span><br><span class="line"></span><br><span class="line"><span class="comment"># 干跑模式</span></span><br><span class="line">make --dry-run</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示执行的命令</span></span><br><span class="line">make --print-directory</span><br></pre></td></tr></table></figure>

<h3 id="常见错误解决"><a href="#常见错误解决" class="headerlink" title="常见错误解决"></a>常见错误解决</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误1：&#x27;make&#x27; 不是内部或外部命令</span></span><br><span class="line"><span class="comment"># 解决：检查PATH环境变量，重新安装make</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误2：No targets specified and no makefile found</span></span><br><span class="line"><span class="comment"># 解决：确保当前目录有Makefile文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误3：missing separator</span></span><br><span class="line"><span class="comment"># 解决：检查Makefile中的缩进，必须使用Tab而不是空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误4：recipe for target failed</span></span><br><span class="line"><span class="comment"># 解决：检查命令语法，确保在Windows下使用正确的命令</span></span><br></pre></td></tr></table></figure>

<h2 id="九、推荐工具和扩展"><a href="#九、推荐工具和扩展" class="headerlink" title="九、推荐工具和扩展"></a>九、推荐工具和扩展</h2><h3 id="IDE集成"><a href="#IDE集成" class="headerlink" title="IDE集成"></a>IDE集成</h3><ul>
<li><strong>Visual Studio Code</strong>: Makefile Tools扩展</li>
<li><strong>Visual Studio</strong>: NMake集成</li>
<li><strong>CLion</strong>: 原生Makefile支持</li>
<li><strong>Code::Blocks</strong>: 内置Make支持</li>
</ul>
<h3 id="辅助工具"><a href="#辅助工具" class="headerlink" title="辅助工具"></a>辅助工具</h3><ul>
<li><strong>CMake</strong>: 跨平台构建系统生成器</li>
<li><strong>Ninja</strong>: 高性能构建系统</li>
<li><strong>Bazel</strong>: Google的构建工具</li>
<li><strong>MSBuild</strong>: 微软的构建平台</li>
</ul>
<h2 id="十、最佳实践总结"><a href="#十、最佳实践总结" class="headerlink" title="十、最佳实践总结"></a>十、最佳实践总结</h2><h3 id="Makefile编写规范"><a href="#Makefile编写规范" class="headerlink" title="Makefile编写规范"></a>Makefile编写规范</h3><ol>
<li><strong>使用.PHONY声明伪目标</strong></li>
<li><strong>合理使用变量减少重复</strong></li>
<li><strong>添加帮助目标说明用法</strong></li>
<li><strong>处理跨平台兼容性</strong></li>
<li><strong>使用自动依赖生成</strong></li>
</ol>
<h3 id="Windows特定注意事项"><a href="#Windows特定注意事项" class="headerlink" title="Windows特定注意事项"></a>Windows特定注意事项</h3><ol>
<li><strong>路径分隔符使用反斜杠或正斜杠</strong></li>
<li><strong>注意文件名大小写敏感性</strong></li>
<li><strong>处理空格和特殊字符</strong></li>
<li><strong>选择合适的Shell环境</strong></li>
</ol>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li><strong>本文核心观点</strong>: 在Windows环境下安装和使用Make工具有多种方案，选择合适的方法可以显著提升开发效率</li>
<li><strong>值得进一步探讨的问题</strong>:<ul>
<li>如何在企业环境中标准化Make工具的部署</li>
<li>Windows下Make与其他构建工具的性能对比</li>
<li>跨平台项目的构建策略优化</li>
</ul>
</li>
<li><strong>行动项</strong>:<ul>
<li>✅ 掌握Windows下Make工具的安装方法</li>
<li>📋 实践跨平台Makefile的编写技巧</li>
<li>📋 探索与现代构建工具的集成方案</li>
</ul>
</li>
</ul>
<h2 id="相关技术文档"><a href="#相关技术文档" class="headerlink" title="相关技术文档"></a>相关技术文档</h2><h3 id="深度学习资源"><a href="#深度学习资源" class="headerlink" title="深度学习资源"></a>深度学习资源</h3><ul>
<li><a href="../../%E5%B8%B8%E7%94%A8/make%E4%BD%BF%E7%94%A8.md">Make构建工具终极实用指南</a> - Make工具的完整使用教程</li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/CMake%E8%AF%A6%E8%A7%A3.md">CMake构建系统详解</a> - 现代跨平台构建</li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E5%AF%B9%E6%AF%94.md">构建工具对比分析</a> - 选择最适合的构建工具</li>
</ul>
<h3 id="相关工具链接"><a href="#相关工具链接" class="headerlink" title="相关工具链接"></a>相关工具链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.msys2.org/">MSYS2官网</a> - Windows下的Unix环境</li>
<li><a target="_blank" rel="noopener" href="https://chocolatey.org/">Chocolatey</a> - Windows包管理器</li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/download/win">Git for Windows</a> - Git工具集</li>
<li><a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022">Visual Studio Build Tools</a> - 微软构建工具</li>
</ul>
<hr>
<p><em>创建于：2025年09月24日 10:37</em><br><em>最后修改：2025-09-24 10:37</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/24/%E6%8A%80%E6%9C%AF/Windows%E4%B8%8B%E5%AE%89%E8%A3%85Make/" data-id="cmfzn3a7k000lla3iepaw0me3" data-title="Windows系统下Make工具安装配置指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Make/" rel="tag">Make</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" rel="tag">安装配置</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" rel="tag">开发环境</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-常用/git常用命令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/15/%E5%B8%B8%E7%94%A8/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2025-09-15T15:05:58.000Z" itemprop="datePublished">2025-09-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/15/%E5%B8%B8%E7%94%A8/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Git常用命令速查指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="正文内容"><a href="#正文内容" class="headerlink" title="正文内容"></a>正文内容</h2><h2 id="一、Git-安装与验证"><a href="#一、Git-安装与验证" class="headerlink" title="一、Git 安装与验证"></a>一、Git 安装与验证</h2><h3 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h3><ul>
<li><p>访问 <a target="_blank" rel="noopener" href="https://git-scm.com/downloads">Git - Downloads</a> 下载安装</p>
</li>
<li><p>安装完成后验证：<code>git --version</code></p>
</li>
</ul>
<h3 id="初始配置"><a href="#初始配置" class="headerlink" title="初始配置"></a>初始配置</h3><p>bash</p>
<p>git config –global user.name “你的用户名”<br>git config –global user.email “你的邮箱”<br>git config –list  # 查看配置信息</p>
<h2 id="二、本地仓库操作"><a href="#二、本地仓库操作" class="headerlink" title="二、本地仓库操作"></a>二、本地仓库操作</h2><h3 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h3><p>bash</p>
<p>git init           # 初始化仓库<br>git status         # 查看文件状态<br>git add .          # 添加所有文件到暂存区<br>git add 文件名      # 添加特定文件<br>git commit -m “提交说明”  # 提交更改<br>git commit -am “提交说明” # 对已跟踪文件可省略add</p>
<h3 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h3><p>bash</p>
<p>git restore 文件名           # 丢弃工作区修改<br>git restore –staged 文件名  # 从暂存区撤出<br>git rm 文件名               # 删除文件并暂存</p>
<h2 id="三、分支管理"><a href="#三、分支管理" class="headerlink" title="三、分支管理"></a>三、分支管理</h2><p>bash</p>
<p>git branch                  # 查看分支<br>git branch 分支名           # 创建分支<br>git checkout 分支名         # 切换分支<br>git switch 分支名           # 新命令切换分支<br>git checkout -b 分支名      # 创建并切换<br>git switch -c 分支名        # 新命令创建并切换<br>git merge 分支名            # 合并分支<br>git branch -d 分支名        # 删除已合并分支</p>
<h2 id="四、远程仓库操作"><a href="#四、远程仓库操作" class="headerlink" title="四、远程仓库操作"></a>四、远程仓库操作</h2><h3 id="克隆与推送"><a href="#克隆与推送" class="headerlink" title="克隆与推送"></a>克隆与推送</h3><p>bash</p>
<p>git clone 仓库地址          # 克隆远程仓库<br>git remote add origin 仓库地址  # 关联远程仓库<br>git push -u origin main     # 首次推送<br>git push                   # 后续推送<br>git pull                   # 拉取更新</p>
<h3 id="查看信息"><a href="#查看信息" class="headerlink" title="查看信息"></a>查看信息</h3><p>bash</p>
<p>git log                    # 提交历史<br>git log –oneline –graph  # 简洁图形历史<br>git diff                   # 工作区与暂存区差异<br>git remote -v              # 查看远程仓库信息</p>
<h2 id="五、处理别人的仓库"><a href="#五、处理别人的仓库" class="headerlink" title="五、处理别人的仓库"></a>五、处理别人的仓库</h2><h3 id="推荐方法：Fork-Clone"><a href="#推荐方法：Fork-Clone" class="headerlink" title="推荐方法：Fork + Clone"></a>推荐方法：Fork + Clone</h3><ol>
<li><p>在GitHub页面点击”Fork”</p>
</li>
<li><p>克隆自己的Fork：</p>
</li>
</ol>
<p>bash</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BB%93%E5%BA%93%E5%90%8D.git">https://github.com/你的用户名/仓库名.git</a></p>
<h3 id="已克隆别人仓库的修正方法"><a href="#已克隆别人仓库的修正方法" class="headerlink" title="已克隆别人仓库的修正方法"></a>已克隆别人仓库的修正方法</h3><p>bash</p>
<h1 id="查看当前远程配置"><a href="#查看当前远程配置" class="headerlink" title="查看当前远程配置"></a>查看当前远程配置</h1><p>git remote -v</p>
<h1 id="移除原作者的远程仓库"><a href="#移除原作者的远程仓库" class="headerlink" title="移除原作者的远程仓库"></a>移除原作者的远程仓库</h1><p>git remote remove origin</p>
<h1 id="添加自己的仓库"><a href="#添加自己的仓库" class="headerlink" title="添加自己的仓库"></a>添加自己的仓库</h1><p>git remote add origin <a target="_blank" rel="noopener" href="https://github.com/%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D/%E6%96%B0%E4%BB%93%E5%BA%93%E5%90%8D.git">https://github.com/你的用户名/新仓库名.git</a></p>
<h1 id="解决分支不匹配问题"><a href="#解决分支不匹配问题" class="headerlink" title="解决分支不匹配问题"></a>解决分支不匹配问题</h1><p>git branch -a                    # 查看所有分支<br>git branch -M 原分支名 main      # 重命名分支（如果需要）<br>git push -u origin main          # 推送到自己的仓库</p>
<h3 id="分支不匹配错误解决方案"><a href="#分支不匹配错误解决方案" class="headerlink" title="分支不匹配错误解决方案"></a>分支不匹配错误解决方案</h3><p>bash</p>
<h1 id="错误：src-refspec-main-does-not-match-any"><a href="#错误：src-refspec-main-does-not-match-any" class="headerlink" title="错误：src refspec main does not match any"></a>错误：src refspec main does not match any</h1><p>git branch                      # 查看本地分支<br>git status                      # 检查是否有未提交更改</p>
<h1 id="如果有未提交更改，先提交："><a href="#如果有未提交更改，先提交：" class="headerlink" title="如果有未提交更改，先提交："></a>如果有未提交更改，先提交：</h1><p>git add .<br>git commit -m “Initial commit”</p>
<h1 id="如果本地是master分支："><a href="#如果本地是master分支：" class="headerlink" title="如果本地是master分支："></a>如果本地是master分支：</h1><p>git branch -M main             # 重命名为主分支<br>git push -u origin main        # 推送</p>
<h2 id="六、高级操作"><a href="#六、高级操作" class="headerlink" title="六、高级操作"></a>六、高级操作</h2><p>bash</p>
<p>git commit –amend        # 修改最后一次提交<br>git reset –hard 提交id   # 回退到指定版本（谨慎）<br>git revert 提交id         # 撤销提交（安全）<br>git stash                # 暂存当前修改<br>git stash pop            # 恢复暂存内容</p>
<h2 id="七、保持与原仓库同步"><a href="#七、保持与原仓库同步" class="headerlink" title="七、保持与原仓库同步"></a>七、保持与原仓库同步</h2><p>bash</p>
<h1 id="添加上游仓库（原仓库）"><a href="#添加上游仓库（原仓库）" class="headerlink" title="添加上游仓库（原仓库）"></a>添加上游仓库（原仓库）</h1><p>git remote add upstream <a target="_blank" rel="noopener" href="https://github.com/%E5%8E%9F%E4%BD%9C%E8%80%85/%E5%8E%9F%E4%BB%93%E5%BA%93.git">https://github.com/原作者/原仓库.git</a></p>
<h1 id="获取并合并更新"><a href="#获取并合并更新" class="headerlink" title="获取并合并更新"></a>获取并合并更新</h1><p>git fetch upstream<br>git merge upstream&#x2F;main<br>git push origin main</p>
<h2 id="八、常见工作流程"><a href="#八、常见工作流程" class="headerlink" title="八、常见工作流程"></a>八、常见工作流程</h2><h3 id="新功能开发流程"><a href="#新功能开发流程" class="headerlink" title="新功能开发流程"></a>新功能开发流程</h3><p>bash</p>
<p>git switch -c new-feature    # 创建功能分支</p>
<h1 id="…开发代码…"><a href="#…开发代码…" class="headerlink" title="…开发代码…"></a>…开发代码…</h1><p>git add .<br>git commit -m “功能完成”<br>git switch main              # 切回主分支<br>git merge new-feature        # 合并功能<br>git branch -d new-feature    # 删除功能分支<br>git push                     # 推送更改</p>
<h3 id="日常更新流程"><a href="#日常更新流程" class="headerlink" title="日常更新流程"></a>日常更新流程</h3><p>bash</p>
<p>git add .<br>git commit -m “更新说明”<br>git pull origin main    # 先拉取可能的更新<br>git push origin main    # 推送自己的更新</p>
<h2 id="九、问题排查技巧"><a href="#九、问题排查技巧" class="headerlink" title="九、问题排查技巧"></a>九、问题排查技巧</h2><ol>
<li><p><strong>推送权限错误</strong>：检查远程仓库地址是否正确</p>
</li>
<li><p><strong>分支不存在错误</strong>：使用 <code>git branch -a</code> 确认分支名</p>
</li>
<li><p><strong>冲突解决</strong>：手动解决冲突后 <code>git add</code> 和 <code>git commit</code></p>
</li>
<li><p><strong>查看帮助</strong>：<code>git help &lt;命令&gt;</code> 或 <code>git &lt;命令&gt; --help</code></p>
</li>
</ol>
<h2 id="十、最佳实践"><a href="#十、最佳实践" class="headerlink" title="十、最佳实践"></a>十、最佳实践</h2><hr>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li><strong>本文核心观点</strong>: Git是现代软件开发不可或缺的版本控制工具，掌握常用命令和工作流程是开发者的基本技能</li>
<li><strong>值得进一步探讨的问题</strong>:<ul>
<li>大型项目中的Git工作流最佳实践</li>
<li>Git与CI&#x2F;CD系统的深度集成</li>
<li>分布式团队的Git协作策略</li>
</ul>
</li>
<li><strong>行动项</strong>:<ul>
<li>✅ 掌握Git基础命令和常见操作</li>
<li>📋 学习高级Git工作流和团队协作</li>
<li>📋 实践Git在实际项目中的应用</li>
</ul>
</li>
</ul>
<h2 id="相关技术文档"><a href="#相关技术文档" class="headerlink" title="相关技术文档"></a>相关技术文档</h2><h3 id="深度学习资源"><a href="#深度学习资源" class="headerlink" title="深度学习资源"></a>深度学习资源</h3><ul>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E8%AF%A6%E8%A7%A3.md">Git工作流详解</a> - 深入了解Git Flow、GitHub Flow等工作流</li>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/Git%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7.md">Git高级技巧</a> - 掌握rebase、cherry-pick等高级操作</li>
<li><a href="../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C%E8%A7%84%E8%8C%83.md">团队协作规范</a> - 建立统一的代码管理规范</li>
</ul>
<h3 id="相关文章链接"><a href="#相关文章链接" class="headerlink" title="相关文章链接"></a>相关文章链接</h3><ul>
<li><a href="../%E6%8A%80%E6%9C%AF/3.%E5%88%A9%E7%94%A8github%20action%20%E8%BF%9B%E8%A1%8Ccicd.md">GitHub Actions实现Hexo博客CI&#x2F;CD自动化部署</a> - Git与自动化部署的结合</li>
<li><a href="../%E6%8A%80%E6%9C%AF/2.hexo%E4%B8%8Egit%E5%85%B3%E8%81%94%EF%BC%8C%E7%94%9F%E6%88%90githubpage%E7%BD%91%E9%A1%B5.md">Hexo与GitHub Pages集成部署指南</a> - Git在博客部署中的应用</li>
</ul>
<h3 id="实用工具推荐"><a href="#实用工具推荐" class="headerlink" title="实用工具推荐"></a>实用工具推荐</h3><ul>
<li><strong>GUI工具</strong>: SourceTree, GitKraken, GitHub Desktop</li>
<li><strong>命令行增强</strong>: Oh My Zsh + Git插件, Git Aliases</li>
<li><strong>在线学习</strong>: Learn Git Branching, Git Immersion</li>
<li><strong>文档参考</strong>: Pro Git Book, Atlassian Git Tutorials</li>
</ul>
<hr>
<p><em>创建于：2025年09月15日 15:05</em><br><em>最后修改：2025-09-15 15:05</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/15/%E5%B8%B8%E7%94%A8/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-id="cmfzn3a7d0009la3ihlx9bp58" data-title="Git常用命令速查指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" rel="tag">命令行</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/" rel="tag">速查表</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-爱好/已经完成/给我的edge s pro刷写支持docekr和lxc的内核" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/03/%E7%88%B1%E5%A5%BD/%E5%B7%B2%E7%BB%8F%E5%AE%8C%E6%88%90/%E7%BB%99%E6%88%91%E7%9A%84edge%20s%20pro%E5%88%B7%E5%86%99%E6%94%AF%E6%8C%81docekr%E5%92%8Clxc%E7%9A%84%E5%86%85%E6%A0%B8/" class="article-date">
  <time class="dt-published" datetime="2025-09-03T19:17:55.000Z" itemprop="datePublished">2025-09-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>►<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/Android%E5%88%B7%E6%9C%BA/">Android刷机</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/03/%E7%88%B1%E5%A5%BD/%E5%B7%B2%E7%BB%8F%E5%AE%8C%E6%88%90/%E7%BB%99%E6%88%91%E7%9A%84edge%20s%20pro%E5%88%B7%E5%86%99%E6%94%AF%E6%8C%81docekr%E5%92%8Clxc%E7%9A%84%E5%86%85%E6%A0%B8/">Edge S Pro刷写支持Docker和LXC的内核实战</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <span id="more"></span>

<h2 id="正文内容"><a href="#正文内容" class="headerlink" title="正文内容"></a>正文内容</h2><p><a target="_blank" rel="noopener" href="https://github.com/AndroidAppsUsedByMyself/KernelSU_Action/actions">https://github.com/AndroidAppsUsedByMyself/KernelSU_Action/actions</a> 有大佬搞好了直接刷完事，<br>使用方法<br>1..重新编译安卓内核以支持docker<br><a target="_blank" rel="noopener" href="https://gist.github.com/FreddieOliveira/efe850df7ff3951cb62d74bd770dce27">https://gist.github.com/FreddieOliveira/efe850df7ff3951cb62d74bd770dce27</a> </p>
<p>kuan搞的<br><a target="_blank" rel="noopener" href="https://github.com/tomxi1997/LXC_KernelSU_Action">https://github.com/tomxi1997/LXC_KernelSU_Action</a><br>或wu17481748的 <a target="_blank" rel="noopener" href="https://github.com/wu17481748/LXC-DOCKER-KernelSU_Action">https://github.com/wu17481748/LXC-DOCKER-KernelSU_Action</a><br>或手动<br><a target="_blank" rel="noopener" href="https://github.com/tomxi1997/lxc-docker-support-for-android">https://github.com/tomxi1997/lxc-docker-support-for-android</a> </p>
<p>对于gki内核除上述配置&#x2F;补丁外还需要如下补丁，不然会导致无限重启。<br><a target="_blank" rel="noopener" href="https://github.com/tomxi1997/Enable-LXC-Dockers-for-Android-GKI-kernel">https://github.com/tomxi1997/Enable-LXC-Dockers-for-Android-GKI-kernel</a> </p>
<p>2..刷入模块，重启授予nethunter terminal root权限<br>可以装下面板，由于与linux上的unix嵌套字位置不一样 本二进制位置&#x2F;data&#x2F;docker&#x2F;var&#x2F;run&#x2F;docker.</p>
<p>酷客链接 <a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/63403684?s=MjRmNjAzNDgyMjhmYmNnNjhiODI0MjJ6a1511&shareUid=2265020&shareFrom=com.coolapk.market_15.1.1">https://www.coolapk.com/feed/63403684?s=MjRmNjAzNDgyMjhmYmNnNjhiODI0MjJ6a1511&amp;shareUid=2265020&amp;shareFrom=com.coolapk.market_15.1.1</a></p>
<p>思路fork </p>
<p><a target="_blank" rel="noopener" href="https://github.com/AndroidAppsUsedByMyself/KernelSU_Action/actions">https://github.com/AndroidAppsUsedByMyself/KernelSU_Action/actions</a> 这里面是edge s pro 源码</p>
<p>需要修改env的内核源码 ,因为官方没有开发myui内核源码，先卡住，以后再看看，</p>
<p>ok已经完成<br>刷los21 再刷内核<br>ksu只能0.98之前的</p>
<hr>
<h2 id="后记与反思"><a href="#后记与反思" class="headerlink" title="后记与反思"></a>后记与反思</h2><ul>
<li><strong>本文核心观点</strong>: 通过编译支持Docker和LXC的自定义内核，可以在Android设备上运行容器化应用，扩展设备功能</li>
<li><strong>值得进一步探讨的问题</strong>:<ul>
<li>如何优化容器在Android上的性能表现</li>
<li>不同设备的内核适配差异和解决方案</li>
<li>容器安全性在移动设备上的考虑</li>
</ul>
</li>
<li><strong>行动项</strong>:<ul>
<li>✅ 成功为Edge S Pro刷写支持容器的内核</li>
<li>📋 测试Docker和LXC的实际运行效果</li>
<li>📋 探索更多容器化应用的可能性</li>
</ul>
</li>
</ul>
<h2 id="相关技术文档"><a href="#相关技术文档" class="headerlink" title="相关技术文档"></a>相关技术文档</h2><h3 id="深度学习资源"><a href="#深度学习资源" class="headerlink" title="深度学习资源"></a>深度学习资源</h3><ul>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Android%E5%88%B7%E6%9C%BA/%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91%E8%AF%A6%E8%A7%A3.md">Android内核编译详解</a> - 完整的内核编译指南</li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Android%E5%88%B7%E6%9C%BA/Docker%E7%A7%BB%E6%A4%8D%E6%8C%87%E5%8D%97.md">Docker容器技术详解</a> - Android上的Docker实现</li>
<li><a href="../../../%E6%9C%AA%E5%8F%91%E5%B8%83%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%8A%80%E6%9C%AF%E6%89%A9%E5%B1%95/Android%E5%88%B7%E6%9C%BA/KernelSU%E8%AF%A6%E8%A7%A3.md">KernelSU集成指南</a> - Root权限管理</li>
</ul>
<h3 id="相关项目链接"><a href="#相关项目链接" class="headerlink" title="相关项目链接"></a>相关项目链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/AndroidAppsUsedByMyself/KernelSU_Action/actions">KernelSU Action构建</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tomxi1997/lxc-docker-support-for-android">LXC Docker支持项目</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tomxi1997/Enable-LXC-Dockers-for-Android-GKI-kernel">GKI内核容器支持</a></li>
</ul>
<h3 id="技术要点总结"><a href="#技术要点总结" class="headerlink" title="技术要点总结"></a>技术要点总结</h3><ol>
<li><strong>内核配置</strong>: 启用NAMESPACE、CGROUP等容器必需功能</li>
<li><strong>工具链选择</strong>: 使用合适版本的交叉编译工具</li>
<li><strong>版本兼容</strong>: KernelSU 0.9.8及以前版本兼容性更好</li>
<li><strong>刷机顺序</strong>: 先刷LineageOS 21，再刷自定义内核</li>
</ol>
<hr>
<p><em>创建于：2025年09月03日 19:17</em><br><em>最后修改：2025年09月03日 19:17</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/03/%E7%88%B1%E5%A5%BD/%E5%B7%B2%E7%BB%8F%E5%AE%8C%E6%88%90/%E7%BB%99%E6%88%91%E7%9A%84edge%20s%20pro%E5%88%B7%E5%86%99%E6%94%AF%E6%8C%81docekr%E5%92%8Clxc%E7%9A%84%E5%86%85%E6%A0%B8/" data-id="cmfzn3a7y001lla3ia02bfvsa" data-title="Edge S Pro刷写支持Docker和LXC的内核实战" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android%E5%88%B7%E6%9C%BA/" rel="tag">Android刷机</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Edge-S-Pro/" rel="tag">Edge S Pro</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/KernelSU/" rel="tag">KernelSU</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LXC/" rel="tag">LXC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91/" rel="tag">内核编译</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MCP%E5%B7%A5%E5%85%B7/">MCP工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/MCP%E5%B7%A5%E5%85%B7/AI%E5%8D%8F%E4%BD%9C/">AI协作</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA/">个人</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA/%E5%8D%9A%E5%AE%A2%E4%BB%8B%E7%BB%8D/">博客介绍</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA/%E7%88%B1%E5%A5%BD%E5%88%86%E4%BA%AB/">爱好分享</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E9%A1%B9%E7%9B%AE%E8%A7%84%E5%88%92/">项目规划</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">实用工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">构建工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/Android%E5%88%B7%E6%9C%BA/">Android刷机</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/CI-CD/">CI/CD</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6/">博客框架</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2/">博客部署</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E8%8D%89%E7%A8%BF/">草稿</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%8A%80%E6%9C%AF%E5%88%86%E7%B1%BB/">技术分类</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/Web%E5%AE%89%E5%85%A8/">Web安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/">信息安全</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Docker/">Docker</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Docker/%E5%AE%B9%E5%99%A8%E5%8C%96/">容器化</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Python%E7%BC%96%E7%A8%8B/">Python编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/Shell%E7%BC%96%E7%A8%8B/">Shell编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96/%E5%B7%A5%E5%85%B7%E9%9B%86/">工具集</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI%E5%B7%A5%E5%85%B7/" rel="tag">AI工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android%E5%88%B7%E6%9C%BA/" rel="tag">Android刷机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bash/" rel="tag">Bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSRF%E9%98%B2%E6%8A%A4/" rel="tag">CSRF防护</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Claude/" rel="tag">Claude</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevOps/" rel="tag">DevOps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Edge-S-Pro/" rel="tag">Edge S Pro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Actions/" rel="tag">GitHub Actions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Desktop/" rel="tag">GitHub Desktop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Pages/" rel="tag">GitHub Pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/" rel="tag">Go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KernelSU/" rel="tag">KernelSU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LXC/" rel="tag">LXC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MCP/" rel="tag">MCP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Make/" rel="tag">Make</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Makefile/" rel="tag">Makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Model-Context-Protocol/" rel="tag">Model Context Protocol</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/" rel="tag">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NAS/" rel="tag">NAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OWASP/" rel="tag">OWASP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenWrt/" rel="tag">OpenWrt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL%E4%BC%98%E5%8C%96/" rel="tag">SQL优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL%E6%B3%A8%E5%85%A5/" rel="tag">SQL注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SourceTree/" rel="tag">SourceTree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS-Code/" rel="tag">VS Code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web%E5%AE%89%E5%85%A8/" rel="tag">Web安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSS%E9%98%B2%E6%8A%A4/" rel="tag">XSS防护</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/" rel="tag">yarn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E4%BB%8B%E7%BB%8D/" rel="tag">个人介绍</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/" rel="tag">个人成长</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" rel="tag">主从复制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8/" rel="tag">代码编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/" rel="tag">任务调度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" rel="tag">信息安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91/" rel="tag">内核编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E4%BA%AB/" rel="tag">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8C%85%E7%AE%A1%E7%90%86/" rel="tag">包管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%8F%E4%BD%9C%E5%B7%A5%E5%85%B7/" rel="tag">协作工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" rel="tag">命令行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/" rel="tag">备份恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="tag">学习计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%85%A8%E7%BC%96%E7%A0%81/" rel="tag">安全编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%85%A8%E8%BF%90%E7%BB%B4/" rel="tag">安全运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4/" rel="tag">安全防护</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" rel="tag">安装配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/" rel="tag">容器化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81%E4%BC%98%E5%8C%96/" rel="tag">工作流优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/" rel="tag">工具推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E9%9B%86%E6%88%90/" rel="tag">工具集成</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" rel="tag">开发环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%85%E5%AE%8C%E5%96%84/" rel="tag">待完善</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">微服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E8%80%83/" rel="tag">思考</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" rel="tag">性能优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/" rel="tag">性能调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/" rel="tag">批处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" rel="tag">技术文档</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E7%88%B1%E5%A5%BD/" rel="tag">技术爱好</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E8%A7%84%E5%88%92/" rel="tag">技术规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E8%83%BD%E6%8F%90%E5%8D%87/" rel="tag">技能提升</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/" rel="tag">插件推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">效率工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/" rel="tag">数据库设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96%E5%AD%A6%E4%B9%A0/" rel="tag">模块化学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" rel="tag">渗透测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98/" rel="tag">漏洞挖掘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E9%98%B2%E6%8A%A4/" rel="tag">漏洞防护</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86/" rel="tag">目标管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" rel="tag">系统管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91/" rel="tag">编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" rel="tag">网络安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" rel="tag">脚本编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="tag">自动化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/" rel="tag">自动化脚本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" rel="tag">自动化部署</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/" rel="tag">自动部署</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8D%89%E7%A8%BF/" rel="tag">草稿</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%B0%E5%BD%95/" rel="tag">记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/" rel="tag">软件推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/" rel="tag">速查表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/" rel="tag">静态网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2/" rel="tag">静态网站部署</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/" rel="tag">项目学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" rel="tag">项目实战</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">AI工具</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Android%E5%88%B7%E6%9C%BA/" style="font-size: 10px;">Android刷机</a> <a href="/tags/Bash/" style="font-size: 10px;">Bash</a> <a href="/tags/CI-CD/" style="font-size: 15px;">CI/CD</a> <a href="/tags/CSRF%E9%98%B2%E6%8A%A4/" style="font-size: 10px;">CSRF防护</a> <a href="/tags/Claude/" style="font-size: 10px;">Claude</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/Docker/" style="font-size: 20px;">Docker</a> <a href="/tags/Edge-S-Pro/" style="font-size: 10px;">Edge S Pro</a> <a href="/tags/Git/" style="font-size: 20px;">Git</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/GitHub-Actions/" style="font-size: 10px;">GitHub Actions</a> <a href="/tags/GitHub-Desktop/" style="font-size: 10px;">GitHub Desktop</a> <a href="/tags/GitHub-Pages/" style="font-size: 10px;">GitHub Pages</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a> <a href="/tags/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tags/KernelSU/" style="font-size: 10px;">KernelSU</a> <a href="/tags/LXC/" style="font-size: 10px;">LXC</a> <a href="/tags/MCP/" style="font-size: 15px;">MCP</a> <a href="/tags/Make/" style="font-size: 15px;">Make</a> <a href="/tags/Makefile/" style="font-size: 10px;">Makefile</a> <a href="/tags/Model-Context-Protocol/" style="font-size: 15px;">Model Context Protocol</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/NAS/" style="font-size: 10px;">NAS</a> <a href="/tags/Node-js/" style="font-size: 15px;">Node.js</a> <a href="/tags/OWASP/" style="font-size: 10px;">OWASP</a> <a href="/tags/OpenWrt/" style="font-size: 10px;">OpenWrt</a> <a href="/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/tags/Python/" style="font-size: 20px;">Python</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SQL%E4%BC%98%E5%8C%96/" style="font-size: 10px;">SQL优化</a> <a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">SQL注入</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/SourceTree/" style="font-size: 10px;">SourceTree</a> <a href="/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/tags/Web%E5%AE%89%E5%85%A8/" style="font-size: 10px;">Web安全</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/XSS%E9%98%B2%E6%8A%A4/" style="font-size: 10px;">XSS防护</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/yarn/" style="font-size: 10px;">yarn</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E4%BB%8B%E7%BB%8D/" style="font-size: 10px;">个人介绍</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/" style="font-size: 10px;">个人成长</a> <a href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" style="font-size: 10px;">主从复制</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 10px;">代码编辑器</a> <a href="/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/" style="font-size: 10px;">任务调度</a> <a href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" style="font-size: 10px;">信息安全</a> <a href="/tags/%E5%86%85%E6%A0%B8%E7%BC%96%E8%AF%91/" style="font-size: 10px;">内核编译</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 10px;">分享</a> <a href="/tags/%E5%8C%85%E7%AE%A1%E7%90%86/" style="font-size: 10px;">包管理</a> <a href="/tags/%E5%8D%8F%E4%BD%9C%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">协作工具</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">博客</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">博客搭建</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" style="font-size: 10px;">命令行</a> <a href="/tags/%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D/" style="font-size: 10px;">备份恢复</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" style="font-size: 20px;">学习计划</a> <a href="/tags/%E5%AE%89%E5%85%A8%E7%BC%96%E7%A0%81/" style="font-size: 10px;">安全编码</a> <a href="/tags/%E5%AE%89%E5%85%A8%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">安全运维</a> <a href="/tags/%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4/" style="font-size: 10px;">安全防护</a> <a href="/tags/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">安装配置</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/" style="font-size: 10px;">容器化</a> <a href="/tags/%E5%B7%A5%E4%BD%9C%E6%B5%81%E4%BC%98%E5%8C%96/" style="font-size: 10px;">工作流优化</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/" style="font-size: 10px;">工具推荐</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E9%9B%86%E6%88%90/" style="font-size: 10px;">工具集成</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">开发工具</a> <a href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" style="font-size: 20px;">开发环境</a> <a href="/tags/%E5%BE%85%E5%AE%8C%E5%96%84/" style="font-size: 10px;">待完善</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 10px;">微服务</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 10px;">思考</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 10px;">性能优化</a> <a href="/tags/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/" style="font-size: 10px;">性能调优</a> <a href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/" style="font-size: 10px;">批处理</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" style="font-size: 10px;">技术文档</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E7%88%B1%E5%A5%BD/" style="font-size: 10px;">技术爱好</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E8%A7%84%E5%88%92/" style="font-size: 10px;">技术规划</a> <a href="/tags/%E6%8A%80%E8%83%BD%E6%8F%90%E5%8D%87/" style="font-size: 15px;">技能提升</a> <a href="/tags/%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/" style="font-size: 10px;">插件推荐</a> <a href="/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" style="font-size: 20px;">效率工具</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">数据库设计</a> <a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">构建工具</a> <a href="/tags/%E6%A8%A1%E5%9D%97%E5%8C%96%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">模块化学习</a> <a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">渗透测试</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98/" style="font-size: 10px;">漏洞挖掘</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E9%98%B2%E6%8A%A4/" style="font-size: 10px;">漏洞防护</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 15px;">版本控制</a> <a href="/tags/%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86/" style="font-size: 10px;">目标管理</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/" style="font-size: 10px;">系统管理</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 15px;">编程语言</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 10px;">编译</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 10px;">网络安全</a> <a href="/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">脚本编程</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size: 20px;">自动化</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/" style="font-size: 10px;">自动化脚本</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" style="font-size: 20px;">自动化部署</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">自动部署</a> <a href="/tags/%E8%8D%89%E7%A8%BF/" style="font-size: 10px;">草稿</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">记录</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/" style="font-size: 10px;">软件推荐</a> <a href="/tags/%E9%80%9F%E6%9F%A5%E8%A1%A8/" style="font-size: 10px;">速查表</a> <a href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/" style="font-size: 10px;">静态网站</a> <a href="/tags/%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">静态网站部署</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">项目学习</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/" style="font-size: 10px;">项目实战</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">September 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/09/25/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/002-Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/">Git版本控制工具完全指南 - 从命令行到图形界面</a>
          </li>
        
          <li>
            <a href="/2025/09/25/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/001-VS%20Code%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/">VS Code完全使用指南 - 从入门到精通的代码编辑器</a>
          </li>
        
          <li>
            <a href="/2025/09/25/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/README/">实用工具分类说明</a>
          </li>
        
          <li>
            <a href="/2025/09/25/MCP%E5%B7%A5%E5%85%B7/MCP%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%B7%A5%E5%85%B7%E7%94%9F%E6%80%81%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/">MCP协议与工具生态完全指南</a>
          </li>
        
          <li>
            <a href="/2025/09/25/MCP%E5%B7%A5%E5%85%B7/README/">MCP工具技术文章分类说明</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>